{"format_version":"0.1","terraform_version":"0.12.24","variables":{"TFUpgradeTest_function_name":{"value":"TFUpgradeTest"},"TFUpgradeTest_lambda_handler":{"value":"TFUpgradeTest.handler"},"TFUpgradeTest_memory_size":{"value":256},"TFUpgradeTest_s3_key":{"value":"HandleS3Update.zip"},"TFUpgradeTest_timeout":{"value":900},"additional_tag_map":{"value":{}},"alb_listener_certificate_arn":{"value":"arn:aws:acm:us-east-1:123456789012:certificate/a48731a1-5c79-411a-acb7-fa0b28937250"},"alb_listener_port":{"value":"443"},"alb_listener_protocol":{"value":"HTTPS"},"alb_listener_ssl_policy":{"value":"ELBSecurityPolicy-2016-08"},"alb_target_group_port":{"value":"4000"},"alb_target_group_protocol":{"value":"HTTP"},"alb_target_group_type":{"value":null},"ami_name_regex":{"value":"CENTOS-*-PTCT-AMI-*"},"ami_owner":{"value":"147721705183"},"app_component":{"value":"jmeter-results"},"app_contacts":{"value":"me@example.com"},"app_environment":{"value":"sandbox"},"application":{"value":"myapp"},"asg_associate_public_ip_address":{"value":false},"asg_default_cooldown":{"value":300},"asg_desired_capacity":{"value":1},"asg_ebs_block_device":{"value":[]},"asg_ebs_optimized":{"value":false},"asg_enable_monitoring":{"value":true},"asg_enabled_metrics":{"value":["GroupMinSize","GroupMaxSize","GroupDesiredCapacity","GroupInServiceInstances","GroupPendingInstances","GroupStandbyInstances","GroupTerminatingInstances","GroupTotalInstances"]},"asg_ephemeral_block_device":{"value":[]},"asg_force_delete":{"value":false},"asg_health_check_grace_period":{"value":300},"asg_health_check_type":{"value":"EC2"},"asg_iam_instance_profile":{"value":""},"asg_instance_assume_role":{"value":"arn:aws:iam::123456789012:role/jmeter-sandbox-role-terraform"},"asg_instance_type":{"value":"t2.medium"},"asg_key_name":{"value":"jmeter-keypair"},"asg_load_balancers":{"value":null},"asg_max_size":{"value":1},"asg_metrics_granularity":{"value":"1Minute"},"asg_min_elb_capacity":{"value":0},"asg_min_size":{"value":1},"asg_name":{"value":"myapp"},"asg_placement_group":{"value":""},"asg_placement_tenancy":{"value":"default"},"asg_protect_from_scale_in":{"value":false},"asg_root_block_device":{"value":[]},"asg_sg_tags":{"value":{}},"asg_suspended_processes":{"value":[]},"asg_tags":{"value":[{"key":"Name","propagate_at_launch":true,"value":"ptct-asg"},{"key":"Environment","propagate_at_launch":true,"value":"sandbox"},{"key":"BusinessUnit","propagate_at_launch":true,"value":"mybu"},{"key":"Region","propagate_at_launch":true,"value":"us-east-1"}]},"asg_target_group_arns":{"value":[""]},"asg_termination_policies":{"value":["Default"]},"asg_user_data":{"value":""},"asg_wait_for_capacity_timeout":{"value":"0"},"asg_wait_for_elb_capacity":{"value":1},"assume_account":{"value":"147721705183"},"attributes":{"value":[]},"aws_region":{"value":"us-east-1"},"branch":{"value":"remove-influx-dependency"},"business_unit":{"value":"mybu"},"created_by":{"value":"me@example.com"},"dead_letter_config":{"value":[]},"deregistration_delay":{"value":null},"description":{"value":null},"enable_basepath":{"value":true},"enable_deletion_protection":{"value":false},"enabled":{"value":"true"},"environment":{"value":"Sandbox"},"environment_vars":{"value":[{"variables":{"DB_PASSWORD":"DB_PASSWORD","DB_PORT":"5432","DB_USERNAME":"ptctusrz"}}]},"function":{"value":"appserver"},"health_check":{"value":{"healthy_threshold":2,"interval":60,"matcher":200,"path":"/index.html","port":"traffic-port","protocol":"HTTP","timeout":10,"unhealthy_threshold":5}},"idle_timeout":{"value":"60"},"internal":{"value":true},"ip_address_type":{"value":"ipv4"},"kms_key_arn":{"value":null},"lambda_exec_role_name":{"value":"myapp-lambda-exec-role"},"lambda_runtime":{"value":"python3.7"},"lambda_s3_bucket":{"value":"mybu-sandbox-devops-us-east-1"},"lambda_s3_path":{"value":"lambdas/PTCT"},"lambda_tags":{"value":{"Environment":"Sandbox","ProjectType":"secret"}},"name_prefix":{"value":"us-east-1-mybu-sandbox"},"network_environment":{"value":"sandbox"},"publish":{"value":null},"region":{"value":"us-east-1"},"remote_state_s3_bucket":{"value":"mycompany-shared-devops-us-east-1"},"remote_state_s3_key":{"value":"terraform/backend/nonprod/itio/ptct-tf/us-east-1/sandbox/terraform.tfstate"},"results_s3_bucket":{"value":"performance-team-mybu"},"results_site_url":{"value":"https://ptct.mybusandbox.aws.mycompany.com"},"revision_tag":{"value":"HEAD"},"role_arn":{"value":"arn:aws:iam::123456789012:role/cross-account-roles/cross-account-role-app"},"stickiness":{"value":{"cookie_duration":"1","enabled":"false"}},"subnet_filter":{"value":["*"]},"subnet_type":{"value":"private"},"system_risk_class":{"value":2},"tags":{"value":{"Environment":"SB"}},"vpc_id":{"value":"vpc-32E071F6"},"waf_custom":{"value":""},"waf_policy":{"value":"internal"}},"planned_values":{"outputs":{"lambda_execution_arn":{"sensitive":false,"value":"arn:aws:iam::123456789012:role/myapp-lambda-exec-role-sandbox"}},"root_module":{"resources":[{"address":"aws_iam_instance_profile.profile","mode":"managed","type":"aws_iam_instance_profile","name":"profile","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::123456789012:instance-profile/myapp-sandbox-instance-profile-terraform","create_date":"2019-08-02T18:45:00Z","id":"myapp-sandbox-instance-profile-terraform","name":"myapp-sandbox-instance-profile-terraform","name_prefix":null,"path":"/","role":"myapp-sandbox-instance-role-terraform","roles":["myapp-sandbox-instance-role-terraform"],"unique_id":"AIPAYJLBIKT7QCMHJ3HP5"}},{"address":"aws_iam_role.instance_role","mode":"managed","type":"aws_iam_role","name":"instance_role","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::123456789012:role/myapp-sandbox-instance-role-terraform","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-08-02T18:45:00Z","description":"MyApp Instance Role (Managed by Terraform)","force_detach_policies":false,"id":"myapp-sandbox-instance-role-terraform","max_session_duration":3600,"name":"myapp-sandbox-instance-role-terraform","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Environment":"SB","Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"unique_id":"AROAYJLBIKT7VZO56G73C"}},{"address":"aws_iam_role.lambda_role","mode":"managed","type":"aws_iam_role","name":"lambda_role","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::123456789012:role/myapp-lambda-exec-role-sandbox","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"},{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"apigateway.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-08-02T18:45:00Z","description":"MyApp Lambda Role (Managed by Terraform)","force_detach_policies":false,"id":"myapp-lambda-exec-role-sandbox","max_session_duration":3600,"name":"myapp-lambda-exec-role-sandbox","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Environment":"SB","Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"unique_id":"AROAYJLBIKT74PGAUC6AC"}},{"address":"aws_iam_role_policy.lambda_role_policy","mode":"managed","type":"aws_iam_role_policy","name":"lambda_role_policy","provider_name":"aws","schema_version":0,"values":{"id":"myapp-lambda-exec-role-sandbox:MyAppambdaExecutionRoleAccess","name":"MyAppambdaExecutionRoleAccess","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n\t\t\t\t\"ec2:CreateNetworkInterface\",\n\t\t\t\t\"ec2:DescribeNetworkInterfaces\",\n\t\t\t\t\"ec2:DeleteNetworkInterface\",\n\t\t\t\t\"lambda:InvokeFunction\",\n\t\t\t\t\"cloudformation:DescribeChangeSet\",\n\t\t\t\t\"cloudformation:DescribeStackResources\",\n\t\t\t\t\"cloudformation:DescribeStacks\",\n\t\t\t\t\"cloudformation:GetTemplate\",\n\t\t\t\t\"cloudformation:ListStackResources\",\n\t\t\t\t\"cloudwatch:*\",\n\t\t\t\t\"cognito-identity:ListIdentityPools\",\n\t\t\t\t\"cognito-sync:GetCognitoEvents\",\n\t\t\t\t\"cognito-sync:SetCognitoEvents\",\n\t\t\t\t\"dynamodb:*\",\n\t\t\t\t\"ec2:DescribeSecurityGroups\",\n\t\t\t\t\"ec2:DescribeSubnets\",\n\t\t\t\t\"ec2:DescribeVpcs\",\n\t\t\t\t\"events:*\",\n\t\t\t\t\"iam:GetPolicy\",\n\t\t\t\t\"iam:GetPolicyVersion\",\n\t\t\t\t\"iam:GetRole\",\n\t\t\t\t\"iam:GetRolePolicy\",\n\t\t\t\t\"iam:ListAttachedRolePolicies\",\n\t\t\t\t\"iam:ListRolePolicies\",\n\t\t\t\t\"iam:ListRoles\",\n\t\t\t\t\"iam:PassRole\",\n\t\t\t\t\"iot:AttachPrincipalPolicy\",\n\t\t\t\t\"iot:AttachThingPrincipal\",\n\t\t\t\t\"iot:CreateKeysAndCertificate\",\n\t\t\t\t\"iot:CreatePolicy\",\n\t\t\t\t\"iot:CreateThing\",\n\t\t\t\t\"iot:CreateTopicRule\",\n\t\t\t\t\"iot:DescribeEndpoint\",\n\t\t\t\t\"iot:GetTopicRule\",\n\t\t\t\t\"iot:ListPolicies\",\n\t\t\t\t\"iot:ListThings\",\n\t\t\t\t\"iot:ListTopicRules\",\n\t\t\t\t\"iot:ReplaceTopicRule\",\n\t\t\t\t\"kinesis:DescribeStream\",\n\t\t\t\t\"kinesis:ListStreams\",\n\t\t\t\t\"kinesis:PutRecord\",\n\t\t\t\t\"kms:ListAliases\",\n\t\t\t\t\"lambda:*\",\n\t\t\t\t\"s3:*\",\n\t\t\t\t\"sns:ListSubscriptions\",\n\t\t\t\t\"sns:ListSubscriptionsByTopic\",\n\t\t\t\t\"sns:ListTopics\",\n\t\t\t\t\"sns:Publish\",\n\t\t\t\t\"sns:Subscribe\",\n\t\t\t\t\"sns:Unsubscribe\",\n\t\t\t\t\"sqs:ListQueues\",\n\t\t\t\t\"sqs:SendMessage\",\n\t\t\t\t\"tag:GetResources\",\n\t\t\t\t\"xray:PutTelemetryRecords\",\n\t\t\t\t\"xray:PutTraceSegments\",\n\t\t\t\t\"sts:GetCallerIdentity\"\n\t\t\t],\n\t\t\t\"Resource\": \"*\"\n    },\n\t\t{\n\t\t\t\"Effect\": \"Allow\",\n\t\t\t\"Action\": [\n\t\t\t\t\t\"logs:*\"\n\t\t\t],\n\t\t\t\"Resource\": \"arn:aws:logs:*:*:*\"\n\t\t},\n\t\t{\n\t\t\t\"Effect\": \"Allow\",\n\t\t\t\"Action\": [\n\t\t\t\t\t\"s3:GetObject\",\n\t\t\t\t\t\"s3:PutObject\"\n\t\t\t],\n\t\t\t\"Resource\": \"arn:aws:s3:::*\"\n\t\t},\n\t\t{\n\t    \"Effect\": \"Allow\",\n\t    \"Action\": [\n\t\t\t\t\t\"execute-api:Invoke\"\n\t\t\t],\n\t    \"Resource\": \"arn:aws:execute-api:*:*:*\"\n\t\t},\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Resource\": \"arn:aws:iam::123456789012:role/jmeter-sandbox-role-terraform\"\n    }\n  ]\n}\n","role":"myapp-lambda-exec-role-sandbox"}},{"address":"aws_iam_role_policy.myapp_instance_role_policy","mode":"managed","type":"aws_iam_role_policy","name":"myapp_instance_role_policy","provider_name":"aws","schema_version":0,"values":{"id":"myapp-sandbox-instance-role-terraform:MyAppInstanceRoleAccess","name":"MyAppInstanceRoleAccess","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n\t\t\t\t\"ec2:CreateNetworkInterface\",\n\t\t\t\t\"ec2:DescribeNetworkInterfaces\",\n\t\t\t\t\"ec2:DeleteNetworkInterface\",\n\t\t\t\t\"lambda:InvokeFunction\",\n\t\t\t\t\"cloudformation:DescribeChangeSet\",\n\t\t\t\t\"cloudformation:DescribeStackResources\",\n\t\t\t\t\"cloudformation:DescribeStacks\",\n\t\t\t\t\"cloudformation:GetTemplate\",\n\t\t\t\t\"cloudformation:ListStackResources\",\n\t\t\t\t\"cloudwatch:*\",\n\t\t\t\t\"cognito-identity:ListIdentityPools\",\n\t\t\t\t\"cognito-sync:GetCognitoEvents\",\n\t\t\t\t\"cognito-sync:SetCognitoEvents\",\n\t\t\t\t\"dynamodb:*\",\n\t\t\t\t\"ec2:DescribeSecurityGroups\",\n\t\t\t\t\"ec2:DescribeSubnets\",\n\t\t\t\t\"ec2:DescribeVpcs\",\n\t\t\t\t\"ec2:TerminateInstances\",\n\t\t\t\t\"events:*\",\n\t\t\t\t\"iam:GetPolicy\",\n\t\t\t\t\"iam:GetPolicyVersion\",\n\t\t\t\t\"iam:GetRole\",\n\t\t\t\t\"iam:GetRolePolicy\",\n\t\t\t\t\"iam:ListAttachedRolePolicies\",\n\t\t\t\t\"iam:ListRolePolicies\",\n\t\t\t\t\"iam:ListRoles\",\n\t\t\t\t\"iam:PassRole\",\n\t\t\t\t\"iot:AttachPrincipalPolicy\",\n\t\t\t\t\"iot:AttachThingPrincipal\",\n\t\t\t\t\"iot:CreateKeysAndCertificate\",\n\t\t\t\t\"iot:CreatePolicy\",\n\t\t\t\t\"iot:CreateThing\",\n\t\t\t\t\"iot:CreateTopicRule\",\n\t\t\t\t\"iot:DescribeEndpoint\",\n\t\t\t\t\"iot:GetTopicRule\",\n\t\t\t\t\"iot:ListPolicies\",\n\t\t\t\t\"iot:ListThings\",\n\t\t\t\t\"iot:ListTopicRules\",\n\t\t\t\t\"iot:ReplaceTopicRule\",\n\t\t\t\t\"kinesis:DescribeStream\",\n\t\t\t\t\"kinesis:ListStreams\",\n\t\t\t\t\"kinesis:PutRecord\",\n\t\t\t\t\"kms:ListAliases\",\n\t\t\t\t\"lambda:*\",\n\t\t\t\t\"s3:*\",\n\t\t\t\t\"sns:ListSubscriptions\",\n\t\t\t\t\"sns:ListSubscriptionsByTopic\",\n\t\t\t\t\"sns:ListTopics\",\n\t\t\t\t\"sns:Publish\",\n\t\t\t\t\"sns:Subscribe\",\n\t\t\t\t\"sns:Unsubscribe\",\n\t\t\t\t\"sqs:ListQueues\",\n\t\t\t\t\"sqs:SendMessage\",\n\t\t\t\t\"tag:GetResources\",\n\t\t\t\t\"xray:PutTelemetryRecords\",\n\t\t\t\t\"xray:PutTraceSegments\",\n\t\t\t\t\"sts:GetCallerIdentity\"\n\t\t\t],\n\t\t\t\"Resource\": \"*\"\n    },\n\t\t{\n\t\t\t\"Effect\": \"Allow\",\n\t\t\t\"Action\": [\n\t\t\t\t\t\"logs:*\"\n\t\t\t],\n\t\t\t\"Resource\": \"arn:aws:logs:*:*:*\"\n\t\t},\n\t\t{\n\t\t\t\"Effect\": \"Allow\",\n\t\t\t\"Action\": [\n\t\t\t\t\t\"s3:GetObject\",\n\t\t\t\t\t\"s3:PutObject\"\n\t\t\t],\n\t\t\t\"Resource\": \"arn:aws:s3:::*\"\n\t\t},\n\t\t{\n\t    \"Effect\": \"Allow\",\n\t    \"Action\": [\n\t\t\t\t\t\"execute-api:Invoke\"\n\t\t\t],\n\t    \"Resource\": \"arn:aws:execute-api:*:*:*\"\n\t\t},\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Resource\": \"arn:aws:iam::123456789012:role/jmeter-sandbox-role-terraform\"\n    }\n  ]\n}\n","role":"myapp-sandbox-instance-role-terraform"}},{"address":"aws_iam_role_policy_attachment.systems-manager-role","mode":"managed","type":"aws_iam_role_policy_attachment","name":"systems-manager-role","provider_name":"aws","schema_version":0,"values":{"id":"myapp-sandbox-instance-role-terraform-20190802184500040100000004","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonEC2RoleforSSM","role":"myapp-sandbox-instance-role-terraform"}},{"address":"aws_security_group.lambda_sg","mode":"managed","type":"aws_security_group","name":"lambda_sg","provider_name":"aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:123456789012:security-group/sg-041e96ff356b17d07","description":"MyApp Lambda Security Group (Managed by Terraform)","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-041e96ff356b17d07","ingress":[{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"name":"myapp-lambda-security-group-sandbox","name_prefix":null,"owner_id":"123456789012","revoke_rules_on_delete":false,"tags":{"Environment":"SB","Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"timeouts":null,"vpc_id":"vpc-32E071F6"}},{"address":"aws_security_group_rule.asg-ingress","mode":"managed","type":"aws_security_group_rule","name":"asg-ingress","provider_name":"aws","schema_version":2,"values":{"cidr_blocks":[],"description":"","from_port":4000,"id":"sgrule-1542931884","ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_group_id":"sg-064772947d40297ad","self":false,"source_security_group_id":"sg-0facdb20f33578aa9","to_port":4000,"type":"ingress"}},{"address":"aws_security_group_rule.asg-ingress-https","mode":"managed","type":"aws_security_group_rule","name":"asg-ingress-https","provider_name":"aws","schema_version":2,"values":{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":443,"id":"sgrule-4096621285","ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_group_id":"sg-064772947d40297ad","self":false,"source_security_group_id":null,"to_port":443,"type":"ingress"}},{"address":"aws_security_group_rule.asg-ingress-ssh","mode":"managed","type":"aws_security_group_rule","name":"asg-ingress-ssh","provider_name":"aws","schema_version":2,"values":{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":22,"id":"sgrule-3938363093","ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_group_id":"sg-064772947d40297ad","self":false,"source_security_group_id":null,"to_port":22,"type":"ingress"}},{"address":"aws_security_group_rule.inbound","mode":"managed","type":"aws_security_group_rule","name":"inbound","provider_name":"aws","schema_version":2,"values":{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":443,"id":"sgrule-328527316","ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_group_id":"sg-0facdb20f33578aa9","self":false,"source_security_group_id":null,"to_port":443,"type":"ingress"}},{"address":"aws_security_group_rule.outbound_internet_access","mode":"managed","type":"aws_security_group_rule","name":"outbound_internet_access","provider_name":"aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"id":"sgrule-2791450964","ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_group_id":"sg-0facdb20f33578aa9","self":false,"source_security_group_id":null,"to_port":0,"type":"egress"}}],"child_modules":[{"resources":[{"address":"module.alb.aws_alb.alb","mode":"managed","type":"aws_alb","name":"alb","provider_name":"aws","schema_version":0,"values":{"access_logs":[{"bucket":"alb-access-logs-us-east-1","enabled":true,"prefix":"mybu/myapp/sandbox/jmeter-results"}],"arn":"arn:aws:elasticloadbalancing:us-east-1:123456789012:loadbalancer/app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465","arn_suffix":"app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465","dns_name":"internal-mybu-sandbox-myapp-instance-alb-478863.us-east-1.elb.amazonaws.com","enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"id":"arn:aws:elasticloadbalancing:us-east-1:123456789012:loadbalancer/app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465","idle_timeout":60,"internal":true,"ip_address_type":"ipv4","load_balancer_type":"application","name":"mybu-sandbox-myapp-instance-alb","name_prefix":null,"security_groups":["sg-0facdb20f33578aa9"],"subnet_mapping":[{"allocation_id":"","subnet_id":"subnet-13f44a58"},{"allocation_id":"","subnet_id":"subnet-9918eec4"}],"subnets":["subnet-13f44a58","subnet-9918eec4"],"tags":{"Name":"mybu-sandbox-myapp-instance-alb","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"loadbalancer","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2","waf_custom":"","waf_policy":"internal"},"timeouts":null,"vpc_id":"vpc-32E071F6","zone_id":"Z35SHUIKEG7D7L"}},{"address":"module.alb.aws_alb_listener.alb","mode":"managed","type":"aws_alb_listener","name":"alb","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:us-east-1:123456789012:listener/app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465/ae54df34347920f4","certificate_arn":"arn:aws:acm:us-east-1:123456789012:certificate/a48731a1-5c79-411a-acb7-fa0b28937250","default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:us-east-1:123456789012:targetgroup/mybu-sandbox-myapp-instance-alb/f33662f2da142d83","type":"forward"}],"id":"arn:aws:elasticloadbalancing:us-east-1:123456789012:listener/app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465/ae54df34347920f4","load_balancer_arn":"arn:aws:elasticloadbalancing:us-east-1:123456789012:loadbalancer/app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465","port":443,"protocol":"HTTPS","ssl_policy":"ELBSecurityPolicy-2016-08","timeouts":null}},{"address":"module.alb.aws_alb_target_group.alb","mode":"managed","type":"aws_alb_target_group","name":"alb","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:us-east-1:123456789012:targetgroup/mybu-sandbox-myapp-instance-alb/f33662f2da142d83","arn_suffix":"targetgroup/mybu-sandbox-myapp-instance-alb/f33662f2da142d83","deregistration_delay":300,"health_check":[{"enabled":true,"healthy_threshold":2,"interval":60,"matcher":"200","path":"/index.html","port":"traffic-port","protocol":"HTTP","timeout":10,"unhealthy_threshold":5}],"id":"arn:aws:elasticloadbalancing:us-east-1:123456789012:targetgroup/mybu-sandbox-myapp-instance-alb/f33662f2da142d83","lambda_multi_value_headers_enabled":false,"name":"mybu-sandbox-myapp-instance-alb","name_prefix":null,"port":4000,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":1,"enabled":false,"type":"lb_cookie"}],"tags":{"Name":"mybu-sandbox-myapp-instance-alb","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"loadbalancer","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2","waf_custom":"","waf_policy":"internal"},"target_type":"instance","vpc_id":"vpc-32E071F6"}},{"address":"module.alb.aws_route53_record.route53","mode":"managed","type":"aws_route53_record","name":"route53","provider_name":"aws","schema_version":2,"values":{"alias":[{"evaluate_target_health":true,"name":"internal-mybu-sandbox-myapp-instance-alb-478863.us-east-1.elb.amazonaws.com","zone_id":"Z35SHUIKEG7D7L"}],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"myapp.mybusandbox.aws.mycompany.com","geolocation_routing_policy":[],"health_check_id":"","id":"ZJH0HXNRO2EHR_myapp_A","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"myapp","records":[],"set_identifier":"","ttl":0,"type":"A","weighted_routing_policy":[],"zone_id":"ZJH0HXNRO2EHR"}},{"address":"module.alb.aws_security_group.alb","mode":"managed","type":"aws_security_group","name":"alb","provider_name":"aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:123456789012:security-group/sg-0facdb20f33578aa9","description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0facdb20f33578aa9","ingress":[{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"mybu-sandbox-myapp-instance-alb-alb-sg","name_prefix":null,"owner_id":"123456789012","revoke_rules_on_delete":false,"tags":{"Name":"mybu-sandbox-myapp-instance-alb","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"loadbalancer","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2","waf_custom":"","waf_policy":"internal"},"timeouts":null,"vpc_id":"vpc-32E071F6"}}],"address":"module.alb"},{"resources":[{"address":"module.lambda_TFUpgradeTest.aws_lambda_function.lambda","mode":"managed","type":"aws_lambda_function","name":"lambda","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:lambda:us-east-1:123456789012:function:MyAPP_TFUpgradeTest_SB","dead_letter_config":[],"description":"","environment":[{"variables":{"DB_PASSWORD":"DB_PASSWORD","DB_PORT":"5432","DB_USERNAME":"ptctusrz"}}],"filename":null,"function_name":"MyAPP_TFUpgradeTest_SB","handler":"TFUpgradeTest.handler","id":"MyAPP_TFUpgradeTest_SB","invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:123456789012:function:MyAPP_TFUpgradeTest_SB/invocations","kms_key_arn":"","layers":[],"memory_size":256,"publish":false,"qualified_arn":"arn:aws:lambda:us-east-1:123456789012:function:MyAPP_TFUpgradeTest_SB:$LATEST","reserved_concurrent_executions":-1,"role":"arn:aws:iam::123456789012:role/myapp-lambda-exec-role-sandbox","runtime":"python3.7","s3_bucket":"mybu-sandbox-devops-us-east-1","s3_key":"lambdas/PTCT/sandbox/HandleS3Update.zip","s3_object_version":null,"source_code_hash":"NXnVW3YW8VMPgU70nlFx8NKvuc3T3NCNNUA1X4MgxlM=","source_code_size":12209663,"tags":{"Environment":"Sandbox","Name":"myapp-sandbox-lambda-myapp-tfupgradetest-sb","ProjectType":"secret","app_component":"lambda","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"timeout":900,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[{"security_group_ids":["sg-041e96ff356b17d07"],"subnet_ids":["subnet-13f44a58","subnet-9918eec4"],"vpc_id":"vpc-32E071F6"}]}}],"address":"module.lambda_TFUpgradeTest"},{"resources":[{"address":"module.myapp-asg.aws_autoscaling_group.asg","mode":"managed","type":"aws_autoscaling_group","name":"asg","provider_name":"aws","schema_version":0,"values":{"default_cooldown":300,"desired_capacity":1,"enabled_metrics":["GroupDesiredCapacity","GroupInServiceInstances","GroupMaxSize","GroupMinSize","GroupPendingInstances","GroupStandbyInstances","GroupTerminatingInstances","GroupTotalInstances"],"force_delete":false,"health_check_grace_period":300,"health_check_type":"EC2","initial_lifecycle_hook":[],"launch_template":[],"max_instance_lifetime":null,"max_size":1,"metrics_granularity":"1Minute","min_elb_capacity":0,"min_size":1,"mixed_instances_policy":[],"name_prefix":"myapp-sandbox-jmeter-results-asg-","placement_group":"","protect_from_scale_in":false,"suspended_processes":null,"tag":[],"tags":[{"key":"Name","propagate_at_launch":"true","value":"myapp-jmeter-results-sandbox"},{"key":"app_component","propagate_at_launch":"true","value":"jmeter-results"},{"key":"app_contacts","propagate_at_launch":"true","value":"me@example.com"},{"key":"app_environment","propagate_at_launch":"true","value":"sandbox"},{"key":"application","propagate_at_launch":"true","value":"myapp"},{"key":"business_unit","propagate_at_launch":"true","value":"mybu"},{"key":"created_by","propagate_at_launch":"true","value":"me@example.com"},{"key":"function","propagate_at_launch":"true","value":"appserver"},{"key":"network_environment","propagate_at_launch":"true","value":"sandbox"},{"key":"region","propagate_at_launch":"true","value":"us-east-1"},{"key":"system_risk_class","propagate_at_launch":"true","value":"2"}],"target_group_arns":["arn:aws:elasticloadbalancing:us-east-1:123456789012:targetgroup/mybu-sandbox-myapp-instance-alb/f33662f2da142d83"],"termination_policies":["Default"],"timeouts":null,"vpc_zone_identifier":["subnet-13f44a58","subnet-9918eec4"],"wait_for_capacity_timeout":"0","wait_for_elb_capacity":1}},{"address":"module.myapp-asg.aws_launch_configuration.lc","mode":"managed","type":"aws_launch_configuration","name":"lc","provider_name":"aws","schema_version":0,"values":{"associate_public_ip_address":false,"ebs_optimized":false,"enable_monitoring":true,"ephemeral_block_device":[],"iam_instance_profile":"arn:aws:iam::123456789012:instance-profile/myapp-sandbox-jmeter-results-iam-role-20190802184459990200000003","image_id":"ami-0d8c17087b65a0f94","instance_type":"t2.medium","key_name":"jmeter-keypair","name_prefix":"myapp-sandbox-jmeter-results-lc-","placement_tenancy":"default","security_groups":["sg-064772947d40297ad"],"spot_price":null,"user_data":"fd9003b540fe982315656085e92ed87d0ec1950a","user_data_base64":null,"vpc_classic_link_id":null,"vpc_classic_link_security_groups":null}},{"address":"module.myapp-asg.aws_security_group.sg_asg","mode":"managed","type":"aws_security_group","name":"sg_asg","provider_name":"aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:123456789012:security-group/sg-064772947d40297ad","description":"myapp-sandbox-jmeter-results security group","egress":[],"id":"sg-064772947d40297ad","ingress":[{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":[],"description":"","from_port":4000,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-0facdb20f33578aa9"],"self":false,"to_port":4000}],"name":"myapp-sandbox-jmeter-results-sg-20190802184459801000000001","name_prefix":"myapp-sandbox-jmeter-results-sg-","owner_id":"123456789012","revoke_rules_on_delete":false,"tags":{"Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"timeouts":null,"vpc_id":"vpc-32E071F6"}}],"address":"module.myapp-asg","child_modules":[{"resources":[{"address":"module.myapp-asg.module.iam.aws_iam_instance_profile.profile","mode":"managed","type":"aws_iam_instance_profile","name":"profile","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::123456789012:instance-profile/myapp-sandbox-jmeter-results-iam-role-20190802184459990200000003","create_date":"2019-08-02T18:45:00Z","id":"myapp-sandbox-jmeter-results-iam-role-20190802184459990200000003","name":"myapp-sandbox-jmeter-results-iam-role-20190802184459990200000003","name_prefix":"myapp-sandbox-jmeter-results-iam-role-","path":"/","role":"myapp-sandbox-jmeter-results20190802184459805500000002","roles":["myapp-sandbox-jmeter-results20190802184459805500000002"],"unique_id":"AIPAYJLBIKT772GQ37DXH"}},{"address":"module.myapp-asg.module.iam.aws_iam_role.role","mode":"managed","type":"aws_iam_role","name":"role","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::123456789012:role/myapp-sandbox-jmeter-results20190802184459805500000002","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-08-02T18:45:00Z","description":"myapp-sandbox-jmeter-results role","force_detach_policies":false,"id":"myapp-sandbox-jmeter-results20190802184459805500000002","max_session_duration":3600,"name":"myapp-sandbox-jmeter-results20190802184459805500000002","name_prefix":"myapp-sandbox-jmeter-results","path":"/","permissions_boundary":null,"tags":{"Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"unique_id":"AROAYJLBIKT7TCP2UP7BJ"}},{"address":"module.myapp-asg.module.iam.aws_iam_role_policy_attachment.systems-manager-role","mode":"managed","type":"aws_iam_role_policy_attachment","name":"systems-manager-role","provider_name":"aws","schema_version":0,"values":{"id":"myapp-sandbox-jmeter-results20190802184459805500000002-20190802184500043500000005","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonEC2RoleforSSM","role":"myapp-sandbox-jmeter-results20190802184459805500000002"}}],"address":"module.myapp-asg.module.iam"}]}]}},"resource_changes":[{"address":"aws_iam_instance_profile.profile","mode":"managed","type":"aws_iam_instance_profile","name":"profile","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::123456789012:instance-profile/myapp-sandbox-instance-profile-terraform","create_date":"2019-08-02T18:45:00Z","id":"myapp-sandbox-instance-profile-terraform","name":"myapp-sandbox-instance-profile-terraform","name_prefix":null,"path":"/","role":"myapp-sandbox-instance-role-terraform","roles":["myapp-sandbox-instance-role-terraform"],"unique_id":"AIPAYJLBIKT7QCMHJ3HP5"},"after":{"arn":"arn:aws:iam::123456789012:instance-profile/myapp-sandbox-instance-profile-terraform","create_date":"2019-08-02T18:45:00Z","id":"myapp-sandbox-instance-profile-terraform","name":"myapp-sandbox-instance-profile-terraform","name_prefix":null,"path":"/","role":"myapp-sandbox-instance-role-terraform","roles":["myapp-sandbox-instance-role-terraform"],"unique_id":"AIPAYJLBIKT7QCMHJ3HP5"},"after_unknown":{}}},{"address":"aws_iam_role.instance_role","mode":"managed","type":"aws_iam_role","name":"instance_role","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::123456789012:role/myapp-sandbox-instance-role-terraform","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-08-02T18:45:00Z","description":"MyApp Instance Role (Managed by Terraform)","force_detach_policies":false,"id":"myapp-sandbox-instance-role-terraform","max_session_duration":3600,"name":"myapp-sandbox-instance-role-terraform","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Environment":"SB","Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"unique_id":"AROAYJLBIKT7VZO56G73C"},"after":{"arn":"arn:aws:iam::123456789012:role/myapp-sandbox-instance-role-terraform","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-08-02T18:45:00Z","description":"MyApp Instance Role (Managed by Terraform)","force_detach_policies":false,"id":"myapp-sandbox-instance-role-terraform","max_session_duration":3600,"name":"myapp-sandbox-instance-role-terraform","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Environment":"SB","Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"unique_id":"AROAYJLBIKT7VZO56G73C"},"after_unknown":{}}},{"address":"aws_iam_role.lambda_role","mode":"managed","type":"aws_iam_role","name":"lambda_role","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::123456789012:role/myapp-lambda-exec-role-sandbox","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"},{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"apigateway.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-08-02T18:45:00Z","description":"MyApp Lambda Role (Managed by Terraform)","force_detach_policies":false,"id":"myapp-lambda-exec-role-sandbox","max_session_duration":3600,"name":"myapp-lambda-exec-role-sandbox","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Environment":"SB","Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"unique_id":"AROAYJLBIKT74PGAUC6AC"},"after":{"arn":"arn:aws:iam::123456789012:role/myapp-lambda-exec-role-sandbox","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"},{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"apigateway.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-08-02T18:45:00Z","description":"MyApp Lambda Role (Managed by Terraform)","force_detach_policies":false,"id":"myapp-lambda-exec-role-sandbox","max_session_duration":3600,"name":"myapp-lambda-exec-role-sandbox","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Environment":"SB","Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"unique_id":"AROAYJLBIKT74PGAUC6AC"},"after_unknown":{}}},{"address":"aws_iam_role_policy.lambda_role_policy","mode":"managed","type":"aws_iam_role_policy","name":"lambda_role_policy","provider_name":"aws","change":{"actions":["no-op"],"before":{"id":"myapp-lambda-exec-role-sandbox:MyAppambdaExecutionRoleAccess","name":"MyAppambdaExecutionRoleAccess","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n\t\t\t\t\"ec2:CreateNetworkInterface\",\n\t\t\t\t\"ec2:DescribeNetworkInterfaces\",\n\t\t\t\t\"ec2:DeleteNetworkInterface\",\n\t\t\t\t\"lambda:InvokeFunction\",\n\t\t\t\t\"cloudformation:DescribeChangeSet\",\n\t\t\t\t\"cloudformation:DescribeStackResources\",\n\t\t\t\t\"cloudformation:DescribeStacks\",\n\t\t\t\t\"cloudformation:GetTemplate\",\n\t\t\t\t\"cloudformation:ListStackResources\",\n\t\t\t\t\"cloudwatch:*\",\n\t\t\t\t\"cognito-identity:ListIdentityPools\",\n\t\t\t\t\"cognito-sync:GetCognitoEvents\",\n\t\t\t\t\"cognito-sync:SetCognitoEvents\",\n\t\t\t\t\"dynamodb:*\",\n\t\t\t\t\"ec2:DescribeSecurityGroups\",\n\t\t\t\t\"ec2:DescribeSubnets\",\n\t\t\t\t\"ec2:DescribeVpcs\",\n\t\t\t\t\"events:*\",\n\t\t\t\t\"iam:GetPolicy\",\n\t\t\t\t\"iam:GetPolicyVersion\",\n\t\t\t\t\"iam:GetRole\",\n\t\t\t\t\"iam:GetRolePolicy\",\n\t\t\t\t\"iam:ListAttachedRolePolicies\",\n\t\t\t\t\"iam:ListRolePolicies\",\n\t\t\t\t\"iam:ListRoles\",\n\t\t\t\t\"iam:PassRole\",\n\t\t\t\t\"iot:AttachPrincipalPolicy\",\n\t\t\t\t\"iot:AttachThingPrincipal\",\n\t\t\t\t\"iot:CreateKeysAndCertificate\",\n\t\t\t\t\"iot:CreatePolicy\",\n\t\t\t\t\"iot:CreateThing\",\n\t\t\t\t\"iot:CreateTopicRule\",\n\t\t\t\t\"iot:DescribeEndpoint\",\n\t\t\t\t\"iot:GetTopicRule\",\n\t\t\t\t\"iot:ListPolicies\",\n\t\t\t\t\"iot:ListThings\",\n\t\t\t\t\"iot:ListTopicRules\",\n\t\t\t\t\"iot:ReplaceTopicRule\",\n\t\t\t\t\"kinesis:DescribeStream\",\n\t\t\t\t\"kinesis:ListStreams\",\n\t\t\t\t\"kinesis:PutRecord\",\n\t\t\t\t\"kms:ListAliases\",\n\t\t\t\t\"lambda:*\",\n\t\t\t\t\"s3:*\",\n\t\t\t\t\"sns:ListSubscriptions\",\n\t\t\t\t\"sns:ListSubscriptionsByTopic\",\n\t\t\t\t\"sns:ListTopics\",\n\t\t\t\t\"sns:Publish\",\n\t\t\t\t\"sns:Subscribe\",\n\t\t\t\t\"sns:Unsubscribe\",\n\t\t\t\t\"sqs:ListQueues\",\n\t\t\t\t\"sqs:SendMessage\",\n\t\t\t\t\"tag:GetResources\",\n\t\t\t\t\"xray:PutTelemetryRecords\",\n\t\t\t\t\"xray:PutTraceSegments\",\n\t\t\t\t\"sts:GetCallerIdentity\"\n\t\t\t],\n\t\t\t\"Resource\": \"*\"\n    },\n\t\t{\n\t\t\t\"Effect\": \"Allow\",\n\t\t\t\"Action\": [\n\t\t\t\t\t\"logs:*\"\n\t\t\t],\n\t\t\t\"Resource\": \"arn:aws:logs:*:*:*\"\n\t\t},\n\t\t{\n\t\t\t\"Effect\": \"Allow\",\n\t\t\t\"Action\": [\n\t\t\t\t\t\"s3:GetObject\",\n\t\t\t\t\t\"s3:PutObject\"\n\t\t\t],\n\t\t\t\"Resource\": \"arn:aws:s3:::*\"\n\t\t},\n\t\t{\n\t    \"Effect\": \"Allow\",\n\t    \"Action\": [\n\t\t\t\t\t\"execute-api:Invoke\"\n\t\t\t],\n\t    \"Resource\": \"arn:aws:execute-api:*:*:*\"\n\t\t},\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Resource\": \"arn:aws:iam::123456789012:role/jmeter-sandbox-role-terraform\"\n    }\n  ]\n}\n","role":"myapp-lambda-exec-role-sandbox"},"after":{"id":"myapp-lambda-exec-role-sandbox:MyAppambdaExecutionRoleAccess","name":"MyAppambdaExecutionRoleAccess","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n\t\t\t\t\"ec2:CreateNetworkInterface\",\n\t\t\t\t\"ec2:DescribeNetworkInterfaces\",\n\t\t\t\t\"ec2:DeleteNetworkInterface\",\n\t\t\t\t\"lambda:InvokeFunction\",\n\t\t\t\t\"cloudformation:DescribeChangeSet\",\n\t\t\t\t\"cloudformation:DescribeStackResources\",\n\t\t\t\t\"cloudformation:DescribeStacks\",\n\t\t\t\t\"cloudformation:GetTemplate\",\n\t\t\t\t\"cloudformation:ListStackResources\",\n\t\t\t\t\"cloudwatch:*\",\n\t\t\t\t\"cognito-identity:ListIdentityPools\",\n\t\t\t\t\"cognito-sync:GetCognitoEvents\",\n\t\t\t\t\"cognito-sync:SetCognitoEvents\",\n\t\t\t\t\"dynamodb:*\",\n\t\t\t\t\"ec2:DescribeSecurityGroups\",\n\t\t\t\t\"ec2:DescribeSubnets\",\n\t\t\t\t\"ec2:DescribeVpcs\",\n\t\t\t\t\"events:*\",\n\t\t\t\t\"iam:GetPolicy\",\n\t\t\t\t\"iam:GetPolicyVersion\",\n\t\t\t\t\"iam:GetRole\",\n\t\t\t\t\"iam:GetRolePolicy\",\n\t\t\t\t\"iam:ListAttachedRolePolicies\",\n\t\t\t\t\"iam:ListRolePolicies\",\n\t\t\t\t\"iam:ListRoles\",\n\t\t\t\t\"iam:PassRole\",\n\t\t\t\t\"iot:AttachPrincipalPolicy\",\n\t\t\t\t\"iot:AttachThingPrincipal\",\n\t\t\t\t\"iot:CreateKeysAndCertificate\",\n\t\t\t\t\"iot:CreatePolicy\",\n\t\t\t\t\"iot:CreateThing\",\n\t\t\t\t\"iot:CreateTopicRule\",\n\t\t\t\t\"iot:DescribeEndpoint\",\n\t\t\t\t\"iot:GetTopicRule\",\n\t\t\t\t\"iot:ListPolicies\",\n\t\t\t\t\"iot:ListThings\",\n\t\t\t\t\"iot:ListTopicRules\",\n\t\t\t\t\"iot:ReplaceTopicRule\",\n\t\t\t\t\"kinesis:DescribeStream\",\n\t\t\t\t\"kinesis:ListStreams\",\n\t\t\t\t\"kinesis:PutRecord\",\n\t\t\t\t\"kms:ListAliases\",\n\t\t\t\t\"lambda:*\",\n\t\t\t\t\"s3:*\",\n\t\t\t\t\"sns:ListSubscriptions\",\n\t\t\t\t\"sns:ListSubscriptionsByTopic\",\n\t\t\t\t\"sns:ListTopics\",\n\t\t\t\t\"sns:Publish\",\n\t\t\t\t\"sns:Subscribe\",\n\t\t\t\t\"sns:Unsubscribe\",\n\t\t\t\t\"sqs:ListQueues\",\n\t\t\t\t\"sqs:SendMessage\",\n\t\t\t\t\"tag:GetResources\",\n\t\t\t\t\"xray:PutTelemetryRecords\",\n\t\t\t\t\"xray:PutTraceSegments\",\n\t\t\t\t\"sts:GetCallerIdentity\"\n\t\t\t],\n\t\t\t\"Resource\": \"*\"\n    },\n\t\t{\n\t\t\t\"Effect\": \"Allow\",\n\t\t\t\"Action\": [\n\t\t\t\t\t\"logs:*\"\n\t\t\t],\n\t\t\t\"Resource\": \"arn:aws:logs:*:*:*\"\n\t\t},\n\t\t{\n\t\t\t\"Effect\": \"Allow\",\n\t\t\t\"Action\": [\n\t\t\t\t\t\"s3:GetObject\",\n\t\t\t\t\t\"s3:PutObject\"\n\t\t\t],\n\t\t\t\"Resource\": \"arn:aws:s3:::*\"\n\t\t},\n\t\t{\n\t    \"Effect\": \"Allow\",\n\t    \"Action\": [\n\t\t\t\t\t\"execute-api:Invoke\"\n\t\t\t],\n\t    \"Resource\": \"arn:aws:execute-api:*:*:*\"\n\t\t},\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Resource\": \"arn:aws:iam::123456789012:role/jmeter-sandbox-role-terraform\"\n    }\n  ]\n}\n","role":"myapp-lambda-exec-role-sandbox"},"after_unknown":{}}},{"address":"aws_iam_role_policy.myapp_instance_role_policy","mode":"managed","type":"aws_iam_role_policy","name":"myapp_instance_role_policy","provider_name":"aws","change":{"actions":["no-op"],"before":{"id":"myapp-sandbox-instance-role-terraform:MyAppInstanceRoleAccess","name":"MyAppInstanceRoleAccess","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n\t\t\t\t\"ec2:CreateNetworkInterface\",\n\t\t\t\t\"ec2:DescribeNetworkInterfaces\",\n\t\t\t\t\"ec2:DeleteNetworkInterface\",\n\t\t\t\t\"lambda:InvokeFunction\",\n\t\t\t\t\"cloudformation:DescribeChangeSet\",\n\t\t\t\t\"cloudformation:DescribeStackResources\",\n\t\t\t\t\"cloudformation:DescribeStacks\",\n\t\t\t\t\"cloudformation:GetTemplate\",\n\t\t\t\t\"cloudformation:ListStackResources\",\n\t\t\t\t\"cloudwatch:*\",\n\t\t\t\t\"cognito-identity:ListIdentityPools\",\n\t\t\t\t\"cognito-sync:GetCognitoEvents\",\n\t\t\t\t\"cognito-sync:SetCognitoEvents\",\n\t\t\t\t\"dynamodb:*\",\n\t\t\t\t\"ec2:DescribeSecurityGroups\",\n\t\t\t\t\"ec2:DescribeSubnets\",\n\t\t\t\t\"ec2:DescribeVpcs\",\n\t\t\t\t\"ec2:TerminateInstances\",\n\t\t\t\t\"events:*\",\n\t\t\t\t\"iam:GetPolicy\",\n\t\t\t\t\"iam:GetPolicyVersion\",\n\t\t\t\t\"iam:GetRole\",\n\t\t\t\t\"iam:GetRolePolicy\",\n\t\t\t\t\"iam:ListAttachedRolePolicies\",\n\t\t\t\t\"iam:ListRolePolicies\",\n\t\t\t\t\"iam:ListRoles\",\n\t\t\t\t\"iam:PassRole\",\n\t\t\t\t\"iot:AttachPrincipalPolicy\",\n\t\t\t\t\"iot:AttachThingPrincipal\",\n\t\t\t\t\"iot:CreateKeysAndCertificate\",\n\t\t\t\t\"iot:CreatePolicy\",\n\t\t\t\t\"iot:CreateThing\",\n\t\t\t\t\"iot:CreateTopicRule\",\n\t\t\t\t\"iot:DescribeEndpoint\",\n\t\t\t\t\"iot:GetTopicRule\",\n\t\t\t\t\"iot:ListPolicies\",\n\t\t\t\t\"iot:ListThings\",\n\t\t\t\t\"iot:ListTopicRules\",\n\t\t\t\t\"iot:ReplaceTopicRule\",\n\t\t\t\t\"kinesis:DescribeStream\",\n\t\t\t\t\"kinesis:ListStreams\",\n\t\t\t\t\"kinesis:PutRecord\",\n\t\t\t\t\"kms:ListAliases\",\n\t\t\t\t\"lambda:*\",\n\t\t\t\t\"s3:*\",\n\t\t\t\t\"sns:ListSubscriptions\",\n\t\t\t\t\"sns:ListSubscriptionsByTopic\",\n\t\t\t\t\"sns:ListTopics\",\n\t\t\t\t\"sns:Publish\",\n\t\t\t\t\"sns:Subscribe\",\n\t\t\t\t\"sns:Unsubscribe\",\n\t\t\t\t\"sqs:ListQueues\",\n\t\t\t\t\"sqs:SendMessage\",\n\t\t\t\t\"tag:GetResources\",\n\t\t\t\t\"xray:PutTelemetryRecords\",\n\t\t\t\t\"xray:PutTraceSegments\",\n\t\t\t\t\"sts:GetCallerIdentity\"\n\t\t\t],\n\t\t\t\"Resource\": \"*\"\n    },\n\t\t{\n\t\t\t\"Effect\": \"Allow\",\n\t\t\t\"Action\": [\n\t\t\t\t\t\"logs:*\"\n\t\t\t],\n\t\t\t\"Resource\": \"arn:aws:logs:*:*:*\"\n\t\t},\n\t\t{\n\t\t\t\"Effect\": \"Allow\",\n\t\t\t\"Action\": [\n\t\t\t\t\t\"s3:GetObject\",\n\t\t\t\t\t\"s3:PutObject\"\n\t\t\t],\n\t\t\t\"Resource\": \"arn:aws:s3:::*\"\n\t\t},\n\t\t{\n\t    \"Effect\": \"Allow\",\n\t    \"Action\": [\n\t\t\t\t\t\"execute-api:Invoke\"\n\t\t\t],\n\t    \"Resource\": \"arn:aws:execute-api:*:*:*\"\n\t\t},\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Resource\": \"arn:aws:iam::123456789012:role/jmeter-sandbox-role-terraform\"\n    }\n  ]\n}\n","role":"myapp-sandbox-instance-role-terraform"},"after":{"id":"myapp-sandbox-instance-role-terraform:MyAppInstanceRoleAccess","name":"MyAppInstanceRoleAccess","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n\t\t\t\t\"ec2:CreateNetworkInterface\",\n\t\t\t\t\"ec2:DescribeNetworkInterfaces\",\n\t\t\t\t\"ec2:DeleteNetworkInterface\",\n\t\t\t\t\"lambda:InvokeFunction\",\n\t\t\t\t\"cloudformation:DescribeChangeSet\",\n\t\t\t\t\"cloudformation:DescribeStackResources\",\n\t\t\t\t\"cloudformation:DescribeStacks\",\n\t\t\t\t\"cloudformation:GetTemplate\",\n\t\t\t\t\"cloudformation:ListStackResources\",\n\t\t\t\t\"cloudwatch:*\",\n\t\t\t\t\"cognito-identity:ListIdentityPools\",\n\t\t\t\t\"cognito-sync:GetCognitoEvents\",\n\t\t\t\t\"cognito-sync:SetCognitoEvents\",\n\t\t\t\t\"dynamodb:*\",\n\t\t\t\t\"ec2:DescribeSecurityGroups\",\n\t\t\t\t\"ec2:DescribeSubnets\",\n\t\t\t\t\"ec2:DescribeVpcs\",\n\t\t\t\t\"ec2:TerminateInstances\",\n\t\t\t\t\"events:*\",\n\t\t\t\t\"iam:GetPolicy\",\n\t\t\t\t\"iam:GetPolicyVersion\",\n\t\t\t\t\"iam:GetRole\",\n\t\t\t\t\"iam:GetRolePolicy\",\n\t\t\t\t\"iam:ListAttachedRolePolicies\",\n\t\t\t\t\"iam:ListRolePolicies\",\n\t\t\t\t\"iam:ListRoles\",\n\t\t\t\t\"iam:PassRole\",\n\t\t\t\t\"iot:AttachPrincipalPolicy\",\n\t\t\t\t\"iot:AttachThingPrincipal\",\n\t\t\t\t\"iot:CreateKeysAndCertificate\",\n\t\t\t\t\"iot:CreatePolicy\",\n\t\t\t\t\"iot:CreateThing\",\n\t\t\t\t\"iot:CreateTopicRule\",\n\t\t\t\t\"iot:DescribeEndpoint\",\n\t\t\t\t\"iot:GetTopicRule\",\n\t\t\t\t\"iot:ListPolicies\",\n\t\t\t\t\"iot:ListThings\",\n\t\t\t\t\"iot:ListTopicRules\",\n\t\t\t\t\"iot:ReplaceTopicRule\",\n\t\t\t\t\"kinesis:DescribeStream\",\n\t\t\t\t\"kinesis:ListStreams\",\n\t\t\t\t\"kinesis:PutRecord\",\n\t\t\t\t\"kms:ListAliases\",\n\t\t\t\t\"lambda:*\",\n\t\t\t\t\"s3:*\",\n\t\t\t\t\"sns:ListSubscriptions\",\n\t\t\t\t\"sns:ListSubscriptionsByTopic\",\n\t\t\t\t\"sns:ListTopics\",\n\t\t\t\t\"sns:Publish\",\n\t\t\t\t\"sns:Subscribe\",\n\t\t\t\t\"sns:Unsubscribe\",\n\t\t\t\t\"sqs:ListQueues\",\n\t\t\t\t\"sqs:SendMessage\",\n\t\t\t\t\"tag:GetResources\",\n\t\t\t\t\"xray:PutTelemetryRecords\",\n\t\t\t\t\"xray:PutTraceSegments\",\n\t\t\t\t\"sts:GetCallerIdentity\"\n\t\t\t],\n\t\t\t\"Resource\": \"*\"\n    },\n\t\t{\n\t\t\t\"Effect\": \"Allow\",\n\t\t\t\"Action\": [\n\t\t\t\t\t\"logs:*\"\n\t\t\t],\n\t\t\t\"Resource\": \"arn:aws:logs:*:*:*\"\n\t\t},\n\t\t{\n\t\t\t\"Effect\": \"Allow\",\n\t\t\t\"Action\": [\n\t\t\t\t\t\"s3:GetObject\",\n\t\t\t\t\t\"s3:PutObject\"\n\t\t\t],\n\t\t\t\"Resource\": \"arn:aws:s3:::*\"\n\t\t},\n\t\t{\n\t    \"Effect\": \"Allow\",\n\t    \"Action\": [\n\t\t\t\t\t\"execute-api:Invoke\"\n\t\t\t],\n\t    \"Resource\": \"arn:aws:execute-api:*:*:*\"\n\t\t},\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Resource\": \"arn:aws:iam::123456789012:role/jmeter-sandbox-role-terraform\"\n    }\n  ]\n}\n","role":"myapp-sandbox-instance-role-terraform"},"after_unknown":{}}},{"address":"aws_iam_role_policy_attachment.systems-manager-role","mode":"managed","type":"aws_iam_role_policy_attachment","name":"systems-manager-role","provider_name":"aws","change":{"actions":["no-op"],"before":{"id":"myapp-sandbox-instance-role-terraform-20190802184500040100000004","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonEC2RoleforSSM","role":"myapp-sandbox-instance-role-terraform"},"after":{"id":"myapp-sandbox-instance-role-terraform-20190802184500040100000004","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonEC2RoleforSSM","role":"myapp-sandbox-instance-role-terraform"},"after_unknown":{}}},{"address":"aws_security_group.lambda_sg","mode":"managed","type":"aws_security_group","name":"lambda_sg","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:123456789012:security-group/sg-041e96ff356b17d07","description":"MyApp Lambda Security Group (Managed by Terraform)","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-041e96ff356b17d07","ingress":[{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"name":"myapp-lambda-security-group-sandbox","name_prefix":null,"owner_id":"123456789012","revoke_rules_on_delete":false,"tags":{"Environment":"SB","Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"timeouts":null,"vpc_id":"vpc-32E071F6"},"after":{"arn":"arn:aws:ec2:us-east-1:123456789012:security-group/sg-041e96ff356b17d07","description":"MyApp Lambda Security Group (Managed by Terraform)","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-041e96ff356b17d07","ingress":[{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"name":"myapp-lambda-security-group-sandbox","name_prefix":null,"owner_id":"123456789012","revoke_rules_on_delete":false,"tags":{"Environment":"SB","Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"timeouts":null,"vpc_id":"vpc-32E071F6"},"after_unknown":{}}},{"address":"aws_security_group_rule.asg-ingress","mode":"managed","type":"aws_security_group_rule","name":"asg-ingress","provider_name":"aws","change":{"actions":["no-op"],"before":{"cidr_blocks":[],"description":"","from_port":4000,"id":"sgrule-1542931884","ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_group_id":"sg-064772947d40297ad","self":false,"source_security_group_id":"sg-0facdb20f33578aa9","to_port":4000,"type":"ingress"},"after":{"cidr_blocks":[],"description":"","from_port":4000,"id":"sgrule-1542931884","ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_group_id":"sg-064772947d40297ad","self":false,"source_security_group_id":"sg-0facdb20f33578aa9","to_port":4000,"type":"ingress"},"after_unknown":{}}},{"address":"aws_security_group_rule.asg-ingress-https","mode":"managed","type":"aws_security_group_rule","name":"asg-ingress-https","provider_name":"aws","change":{"actions":["no-op"],"before":{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":443,"id":"sgrule-4096621285","ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_group_id":"sg-064772947d40297ad","self":false,"source_security_group_id":null,"to_port":443,"type":"ingress"},"after":{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":443,"id":"sgrule-4096621285","ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_group_id":"sg-064772947d40297ad","self":false,"source_security_group_id":null,"to_port":443,"type":"ingress"},"after_unknown":{}}},{"address":"aws_security_group_rule.asg-ingress-ssh","mode":"managed","type":"aws_security_group_rule","name":"asg-ingress-ssh","provider_name":"aws","change":{"actions":["no-op"],"before":{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":22,"id":"sgrule-3938363093","ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_group_id":"sg-064772947d40297ad","self":false,"source_security_group_id":null,"to_port":22,"type":"ingress"},"after":{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":22,"id":"sgrule-3938363093","ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_group_id":"sg-064772947d40297ad","self":false,"source_security_group_id":null,"to_port":22,"type":"ingress"},"after_unknown":{}}},{"address":"aws_security_group_rule.inbound","mode":"managed","type":"aws_security_group_rule","name":"inbound","provider_name":"aws","change":{"actions":["no-op"],"before":{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":443,"id":"sgrule-328527316","ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_group_id":"sg-0facdb20f33578aa9","self":false,"source_security_group_id":null,"to_port":443,"type":"ingress"},"after":{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":443,"id":"sgrule-328527316","ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_group_id":"sg-0facdb20f33578aa9","self":false,"source_security_group_id":null,"to_port":443,"type":"ingress"},"after_unknown":{}}},{"address":"aws_security_group_rule.outbound_internet_access","mode":"managed","type":"aws_security_group_rule","name":"outbound_internet_access","provider_name":"aws","change":{"actions":["no-op"],"before":{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"id":"sgrule-2791450964","ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_group_id":"sg-0facdb20f33578aa9","self":false,"source_security_group_id":null,"to_port":0,"type":"egress"},"after":{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"id":"sgrule-2791450964","ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_group_id":"sg-0facdb20f33578aa9","self":false,"source_security_group_id":null,"to_port":0,"type":"egress"},"after_unknown":{}}},{"address":"module.alb.aws_alb.alb","module_address":"module.alb","mode":"managed","type":"aws_alb","name":"alb","provider_name":"aws","change":{"actions":["update"],"before":{"access_logs":[{"bucket":"alb-access-logs-us-east-1","enabled":true,"prefix":"mybu/myapp/sandbox/jmeter-results"}],"arn":"arn:aws:elasticloadbalancing:us-east-1:123456789012:loadbalancer/app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465","arn_suffix":"app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465","dns_name":"internal-mybu-sandbox-myapp-instance-alb-478863.us-east-1.elb.amazonaws.com","enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"id":"arn:aws:elasticloadbalancing:us-east-1:123456789012:loadbalancer/app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465","idle_timeout":60,"internal":true,"ip_address_type":"ipv4","load_balancer_type":"application","name":"mybu-sandbox-myapp-instance-alb","name_prefix":null,"security_groups":["sg-0facdb20f33578aa9"],"subnet_mapping":[{"allocation_id":"","subnet_id":"subnet-13f44a58"},{"allocation_id":"","subnet_id":"subnet-9918eec4"}],"subnets":["subnet-13f44a58","subnet-9918eec4"],"tags":{"Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"loadbalancer","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2","waf_custom":"","waf_policy":"internal"},"timeouts":null,"vpc_id":"vpc-32E071F6","zone_id":"Z35SHUIKEG7D7L"},"after":{"access_logs":[{"bucket":"alb-access-logs-us-east-1","enabled":true,"prefix":"mybu/myapp/sandbox/jmeter-results"}],"arn":"arn:aws:elasticloadbalancing:us-east-1:123456789012:loadbalancer/app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465","arn_suffix":"app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465","dns_name":"internal-mybu-sandbox-myapp-instance-alb-478863.us-east-1.elb.amazonaws.com","enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"id":"arn:aws:elasticloadbalancing:us-east-1:123456789012:loadbalancer/app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465","idle_timeout":60,"internal":true,"ip_address_type":"ipv4","load_balancer_type":"application","name":"mybu-sandbox-myapp-instance-alb","name_prefix":null,"security_groups":["sg-0facdb20f33578aa9"],"subnet_mapping":[{"allocation_id":"","subnet_id":"subnet-13f44a58"},{"allocation_id":"","subnet_id":"subnet-9918eec4"}],"subnets":["subnet-13f44a58","subnet-9918eec4"],"tags":{"Name":"mybu-sandbox-myapp-instance-alb","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"loadbalancer","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2","waf_custom":"","waf_policy":"internal"},"timeouts":null,"vpc_id":"vpc-32E071F6","zone_id":"Z35SHUIKEG7D7L"},"after_unknown":{}}},{"address":"module.alb.aws_alb_listener.alb","module_address":"module.alb","mode":"managed","type":"aws_alb_listener","name":"alb","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:elasticloadbalancing:us-east-1:123456789012:listener/app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465/ae54df34347920f4","certificate_arn":"arn:aws:acm:us-east-1:123456789012:certificate/a48731a1-5c79-411a-acb7-fa0b28937250","default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:us-east-1:123456789012:targetgroup/mybu-sandbox-myapp-instance-alb/f33662f2da142d83","type":"forward"}],"id":"arn:aws:elasticloadbalancing:us-east-1:123456789012:listener/app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465/ae54df34347920f4","load_balancer_arn":"arn:aws:elasticloadbalancing:us-east-1:123456789012:loadbalancer/app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465","port":443,"protocol":"HTTPS","ssl_policy":"ELBSecurityPolicy-2016-08","timeouts":null},"after":{"arn":"arn:aws:elasticloadbalancing:us-east-1:123456789012:listener/app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465/ae54df34347920f4","certificate_arn":"arn:aws:acm:us-east-1:123456789012:certificate/a48731a1-5c79-411a-acb7-fa0b28937250","default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:us-east-1:123456789012:targetgroup/mybu-sandbox-myapp-instance-alb/f33662f2da142d83","type":"forward"}],"id":"arn:aws:elasticloadbalancing:us-east-1:123456789012:listener/app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465/ae54df34347920f4","load_balancer_arn":"arn:aws:elasticloadbalancing:us-east-1:123456789012:loadbalancer/app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465","port":443,"protocol":"HTTPS","ssl_policy":"ELBSecurityPolicy-2016-08","timeouts":null},"after_unknown":{}}},{"address":"module.alb.aws_alb_target_group.alb","module_address":"module.alb","mode":"managed","type":"aws_alb_target_group","name":"alb","provider_name":"aws","change":{"actions":["update"],"before":{"arn":"arn:aws:elasticloadbalancing:us-east-1:123456789012:targetgroup/mybu-sandbox-myapp-instance-alb/f33662f2da142d83","arn_suffix":"targetgroup/mybu-sandbox-myapp-instance-alb/f33662f2da142d83","deregistration_delay":300,"health_check":[{"enabled":true,"healthy_threshold":2,"interval":60,"matcher":"200","path":"/index.html","port":"traffic-port","protocol":"HTTP","timeout":10,"unhealthy_threshold":5}],"id":"arn:aws:elasticloadbalancing:us-east-1:123456789012:targetgroup/mybu-sandbox-myapp-instance-alb/f33662f2da142d83","lambda_multi_value_headers_enabled":false,"name":"mybu-sandbox-myapp-instance-alb","name_prefix":null,"port":4000,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":1,"enabled":false,"type":"lb_cookie"}],"tags":{"Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"loadbalancer","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2","waf_custom":"","waf_policy":"internal"},"target_type":"instance","vpc_id":"vpc-32E071F6"},"after":{"arn":"arn:aws:elasticloadbalancing:us-east-1:123456789012:targetgroup/mybu-sandbox-myapp-instance-alb/f33662f2da142d83","arn_suffix":"targetgroup/mybu-sandbox-myapp-instance-alb/f33662f2da142d83","deregistration_delay":300,"health_check":[{"enabled":true,"healthy_threshold":2,"interval":60,"matcher":"200","path":"/index.html","port":"traffic-port","protocol":"HTTP","timeout":10,"unhealthy_threshold":5}],"id":"arn:aws:elasticloadbalancing:us-east-1:123456789012:targetgroup/mybu-sandbox-myapp-instance-alb/f33662f2da142d83","lambda_multi_value_headers_enabled":false,"name":"mybu-sandbox-myapp-instance-alb","name_prefix":null,"port":4000,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":1,"enabled":false,"type":"lb_cookie"}],"tags":{"Name":"mybu-sandbox-myapp-instance-alb","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"loadbalancer","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2","waf_custom":"","waf_policy":"internal"},"target_type":"instance","vpc_id":"vpc-32E071F6"},"after_unknown":{}}},{"address":"module.alb.aws_route53_record.route53","module_address":"module.alb","mode":"managed","type":"aws_route53_record","name":"route53","provider_name":"aws","change":{"actions":["no-op"],"before":{"alias":[{"evaluate_target_health":true,"name":"internal-mybu-sandbox-myapp-instance-alb-478863.us-east-1.elb.amazonaws.com","zone_id":"Z35SHUIKEG7D7L"}],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"myapp.mybusandbox.aws.mycompany.com","geolocation_routing_policy":[],"health_check_id":"","id":"ZJH0HXNRO2EHR_myapp_A","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"myapp","records":[],"set_identifier":"","ttl":0,"type":"A","weighted_routing_policy":[],"zone_id":"ZJH0HXNRO2EHR"},"after":{"alias":[{"evaluate_target_health":true,"name":"internal-mybu-sandbox-myapp-instance-alb-478863.us-east-1.elb.amazonaws.com","zone_id":"Z35SHUIKEG7D7L"}],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"myapp.mybusandbox.aws.mycompany.com","geolocation_routing_policy":[],"health_check_id":"","id":"ZJH0HXNRO2EHR_myapp_A","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"myapp","records":[],"set_identifier":"","ttl":0,"type":"A","weighted_routing_policy":[],"zone_id":"ZJH0HXNRO2EHR"},"after_unknown":{}}},{"address":"module.alb.aws_security_group.alb","module_address":"module.alb","mode":"managed","type":"aws_security_group","name":"alb","provider_name":"aws","change":{"actions":["update"],"before":{"arn":"arn:aws:ec2:us-east-1:123456789012:security-group/sg-0facdb20f33578aa9","description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0facdb20f33578aa9","ingress":[{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"mybu-sandbox-myapp-instance-alb-alb-sg","name_prefix":null,"owner_id":"123456789012","revoke_rules_on_delete":false,"tags":{"Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"loadbalancer","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2","waf_custom":"","waf_policy":"internal"},"timeouts":null,"vpc_id":"vpc-32E071F6"},"after":{"arn":"arn:aws:ec2:us-east-1:123456789012:security-group/sg-0facdb20f33578aa9","description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0facdb20f33578aa9","ingress":[{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"mybu-sandbox-myapp-instance-alb-alb-sg","name_prefix":null,"owner_id":"123456789012","revoke_rules_on_delete":false,"tags":{"Name":"mybu-sandbox-myapp-instance-alb","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"loadbalancer","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2","waf_custom":"","waf_policy":"internal"},"timeouts":null,"vpc_id":"vpc-32E071F6"},"after_unknown":{}}},{"address":"module.lambda_TFUpgradeTest.aws_lambda_function.lambda","module_address":"module.lambda_TFUpgradeTest","mode":"managed","type":"aws_lambda_function","name":"lambda","provider_name":"aws","change":{"actions":["update"],"before":{"arn":"arn:aws:lambda:us-east-1:123456789012:function:MyAPP_TFUpgradeTest_SB","dead_letter_config":[],"description":"","environment":[{"variables":{"DB_PASSWORD":"DB_PASSWORD","DB_PORT":"5432","DB_USERNAME":"ptctusrz"}}],"filename":null,"function_name":"MyAPP_TFUpgradeTest_SB","handler":"TFUpgradeTest.handler","id":"MyAPP_TFUpgradeTest_SB","invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:123456789012:function:MyAPP_TFUpgradeTest_SB/invocations","kms_key_arn":"","last_modified":"2019-12-10T15:54:39.096+0000","layers":[],"memory_size":256,"publish":false,"qualified_arn":"arn:aws:lambda:us-east-1:123456789012:function:MyAPP_TFUpgradeTest_SB:$LATEST","reserved_concurrent_executions":-1,"role":"arn:aws:iam::123456789012:role/myapp-lambda-exec-role-sandbox","runtime":"python3.7","s3_bucket":"mybu-sandbox-devops-us-east-1","s3_key":"lambdas/PTCT/sandbox/HandleS3Update.zip","s3_object_version":null,"source_code_hash":"JF2nxUZ6bnJhNvF8nOgaOiIMvjiH/Kcdkau4k4khH1o=","source_code_size":12209663,"tags":{"Environment":"Sandbox","Name":"myapp-sandbox-lambda-myapp-tfupgradetest-sb","ProjectType":"secret","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"timeout":900,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[{"security_group_ids":["sg-041e96ff356b17d07"],"subnet_ids":["subnet-13f44a58","subnet-9918eec4"],"vpc_id":"vpc-32E071F6"}]},"after":{"arn":"arn:aws:lambda:us-east-1:123456789012:function:MyAPP_TFUpgradeTest_SB","dead_letter_config":[],"description":"","environment":[{"variables":{"DB_PASSWORD":"DB_PASSWORD","DB_PORT":"5432","DB_USERNAME":"ptctusrz"}}],"filename":null,"function_name":"MyAPP_TFUpgradeTest_SB","handler":"TFUpgradeTest.handler","id":"MyAPP_TFUpgradeTest_SB","invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:123456789012:function:MyAPP_TFUpgradeTest_SB/invocations","kms_key_arn":"","layers":[],"memory_size":256,"publish":false,"qualified_arn":"arn:aws:lambda:us-east-1:123456789012:function:MyAPP_TFUpgradeTest_SB:$LATEST","reserved_concurrent_executions":-1,"role":"arn:aws:iam::123456789012:role/myapp-lambda-exec-role-sandbox","runtime":"python3.7","s3_bucket":"mybu-sandbox-devops-us-east-1","s3_key":"lambdas/PTCT/sandbox/HandleS3Update.zip","s3_object_version":null,"source_code_hash":"NXnVW3YW8VMPgU70nlFx8NKvuc3T3NCNNUA1X4MgxlM=","source_code_size":12209663,"tags":{"Environment":"Sandbox","Name":"myapp-sandbox-lambda-myapp-tfupgradetest-sb","ProjectType":"secret","app_component":"lambda","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"timeout":900,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[{"security_group_ids":["sg-041e96ff356b17d07"],"subnet_ids":["subnet-13f44a58","subnet-9918eec4"],"vpc_id":"vpc-32E071F6"}]},"after_unknown":{"dead_letter_config":[],"environment":[{"variables":{}}],"last_modified":true,"layers":[],"tags":{},"tracing_config":[{}],"vpc_config":[{"security_group_ids":[false],"subnet_ids":[false,false]}]}}},{"address":"module.myapp-asg.aws_autoscaling_group.asg","module_address":"module.myapp-asg","mode":"managed","type":"aws_autoscaling_group","name":"asg","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"default_cooldown":300,"desired_capacity":1,"enabled_metrics":["GroupDesiredCapacity","GroupInServiceInstances","GroupMaxSize","GroupMinSize","GroupPendingInstances","GroupStandbyInstances","GroupTerminatingInstances","GroupTotalInstances"],"force_delete":false,"health_check_grace_period":300,"health_check_type":"EC2","initial_lifecycle_hook":[],"launch_template":[],"max_instance_lifetime":null,"max_size":1,"metrics_granularity":"1Minute","min_elb_capacity":0,"min_size":1,"mixed_instances_policy":[],"name_prefix":"myapp-sandbox-jmeter-results-asg-","placement_group":"","protect_from_scale_in":false,"suspended_processes":null,"tag":[],"tags":[{"key":"Name","propagate_at_launch":"true","value":"myapp-jmeter-results-sandbox"},{"key":"app_component","propagate_at_launch":"true","value":"jmeter-results"},{"key":"app_contacts","propagate_at_launch":"true","value":"me@example.com"},{"key":"app_environment","propagate_at_launch":"true","value":"sandbox"},{"key":"application","propagate_at_launch":"true","value":"myapp"},{"key":"business_unit","propagate_at_launch":"true","value":"mybu"},{"key":"created_by","propagate_at_launch":"true","value":"me@example.com"},{"key":"function","propagate_at_launch":"true","value":"appserver"},{"key":"network_environment","propagate_at_launch":"true","value":"sandbox"},{"key":"region","propagate_at_launch":"true","value":"us-east-1"},{"key":"system_risk_class","propagate_at_launch":"true","value":"2"}],"target_group_arns":["arn:aws:elasticloadbalancing:us-east-1:123456789012:targetgroup/mybu-sandbox-myapp-instance-alb/f33662f2da142d83"],"termination_policies":["Default"],"timeouts":null,"vpc_zone_identifier":["subnet-13f44a58","subnet-9918eec4"],"wait_for_capacity_timeout":"0","wait_for_elb_capacity":1},"after_unknown":{"arn":true,"availability_zones":true,"enabled_metrics":[false,false,false,false,false,false,false,false],"id":true,"initial_lifecycle_hook":[],"launch_configuration":true,"launch_template":[],"load_balancers":true,"mixed_instances_policy":[],"name":true,"service_linked_role_arn":true,"tag":[],"tags":[{},{},{},{},{},{},{},{},{},{},{}],"target_group_arns":[false],"termination_policies":[false],"vpc_zone_identifier":[false,false]}}},{"address":"module.myapp-asg.aws_launch_configuration.lc","module_address":"module.myapp-asg","mode":"managed","type":"aws_launch_configuration","name":"lc","provider_name":"aws","change":{"actions":["create"],"before":null,"after":{"associate_public_ip_address":false,"ebs_optimized":false,"enable_monitoring":true,"ephemeral_block_device":[],"iam_instance_profile":"arn:aws:iam::123456789012:instance-profile/myapp-sandbox-jmeter-results-iam-role-20190802184459990200000003","image_id":"ami-0d8c17087b65a0f94","instance_type":"t2.medium","key_name":"jmeter-keypair","name_prefix":"myapp-sandbox-jmeter-results-lc-","placement_tenancy":"default","security_groups":["sg-064772947d40297ad"],"spot_price":null,"user_data":"fd9003b540fe982315656085e92ed87d0ec1950a","user_data_base64":null,"vpc_classic_link_id":null,"vpc_classic_link_security_groups":null},"after_unknown":{"ebs_block_device":true,"ephemeral_block_device":[],"id":true,"name":true,"root_block_device":true,"security_groups":[false]}}},{"address":"module.myapp-asg.aws_security_group.sg_asg","module_address":"module.myapp-asg","mode":"managed","type":"aws_security_group","name":"sg_asg","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:ec2:us-east-1:123456789012:security-group/sg-064772947d40297ad","description":"myapp-sandbox-jmeter-results security group","egress":[],"id":"sg-064772947d40297ad","ingress":[{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":[],"description":"","from_port":4000,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-0facdb20f33578aa9"],"self":false,"to_port":4000}],"name":"myapp-sandbox-jmeter-results-sg-20190802184459801000000001","name_prefix":"myapp-sandbox-jmeter-results-sg-","owner_id":"123456789012","revoke_rules_on_delete":false,"tags":{"Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"timeouts":null,"vpc_id":"vpc-32E071F6"},"after":{"arn":"arn:aws:ec2:us-east-1:123456789012:security-group/sg-064772947d40297ad","description":"myapp-sandbox-jmeter-results security group","egress":[],"id":"sg-064772947d40297ad","ingress":[{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":[],"description":"","from_port":4000,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-0facdb20f33578aa9"],"self":false,"to_port":4000}],"name":"myapp-sandbox-jmeter-results-sg-20190802184459801000000001","name_prefix":"myapp-sandbox-jmeter-results-sg-","owner_id":"123456789012","revoke_rules_on_delete":false,"tags":{"Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"timeouts":null,"vpc_id":"vpc-32E071F6"},"after_unknown":{}}},{"address":"module.myapp-asg.module.iam.aws_iam_instance_profile.profile","module_address":"module.myapp-asg.module.iam","mode":"managed","type":"aws_iam_instance_profile","name":"profile","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::123456789012:instance-profile/myapp-sandbox-jmeter-results-iam-role-20190802184459990200000003","create_date":"2019-08-02T18:45:00Z","id":"myapp-sandbox-jmeter-results-iam-role-20190802184459990200000003","name":"myapp-sandbox-jmeter-results-iam-role-20190802184459990200000003","name_prefix":"myapp-sandbox-jmeter-results-iam-role-","path":"/","role":"myapp-sandbox-jmeter-results20190802184459805500000002","roles":["myapp-sandbox-jmeter-results20190802184459805500000002"],"unique_id":"AIPAYJLBIKT772GQ37DXH"},"after":{"arn":"arn:aws:iam::123456789012:instance-profile/myapp-sandbox-jmeter-results-iam-role-20190802184459990200000003","create_date":"2019-08-02T18:45:00Z","id":"myapp-sandbox-jmeter-results-iam-role-20190802184459990200000003","name":"myapp-sandbox-jmeter-results-iam-role-20190802184459990200000003","name_prefix":"myapp-sandbox-jmeter-results-iam-role-","path":"/","role":"myapp-sandbox-jmeter-results20190802184459805500000002","roles":["myapp-sandbox-jmeter-results20190802184459805500000002"],"unique_id":"AIPAYJLBIKT772GQ37DXH"},"after_unknown":{}}},{"address":"module.myapp-asg.module.iam.aws_iam_role.role","module_address":"module.myapp-asg.module.iam","mode":"managed","type":"aws_iam_role","name":"role","provider_name":"aws","change":{"actions":["no-op"],"before":{"arn":"arn:aws:iam::123456789012:role/myapp-sandbox-jmeter-results20190802184459805500000002","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-08-02T18:45:00Z","description":"myapp-sandbox-jmeter-results role","force_detach_policies":false,"id":"myapp-sandbox-jmeter-results20190802184459805500000002","max_session_duration":3600,"name":"myapp-sandbox-jmeter-results20190802184459805500000002","name_prefix":"myapp-sandbox-jmeter-results","path":"/","permissions_boundary":null,"tags":{"Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"unique_id":"AROAYJLBIKT7TCP2UP7BJ"},"after":{"arn":"arn:aws:iam::123456789012:role/myapp-sandbox-jmeter-results20190802184459805500000002","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-08-02T18:45:00Z","description":"myapp-sandbox-jmeter-results role","force_detach_policies":false,"id":"myapp-sandbox-jmeter-results20190802184459805500000002","max_session_duration":3600,"name":"myapp-sandbox-jmeter-results20190802184459805500000002","name_prefix":"myapp-sandbox-jmeter-results","path":"/","permissions_boundary":null,"tags":{"Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"unique_id":"AROAYJLBIKT7TCP2UP7BJ"},"after_unknown":{}}},{"address":"module.myapp-asg.module.iam.aws_iam_role_policy_attachment.systems-manager-role","module_address":"module.myapp-asg.module.iam","mode":"managed","type":"aws_iam_role_policy_attachment","name":"systems-manager-role","provider_name":"aws","change":{"actions":["no-op"],"before":{"id":"myapp-sandbox-jmeter-results20190802184459805500000002-20190802184500043500000005","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonEC2RoleforSSM","role":"myapp-sandbox-jmeter-results20190802184459805500000002"},"after":{"id":"myapp-sandbox-jmeter-results20190802184459805500000002-20190802184500043500000005","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonEC2RoleforSSM","role":"myapp-sandbox-jmeter-results20190802184459805500000002"},"after_unknown":{}}}],"output_changes":{"lambda_execution_arn":{"actions":["create"],"before":null,"after":"arn:aws:iam::123456789012:role/myapp-lambda-exec-role-sandbox","after_unknown":false}},"prior_state":{"format_version":"0.1","terraform_version":"0.12.24","values":{"outputs":{"lambda_execution_arn":{"sensitive":false,"value":"arn:aws:iam::123456789012:role/myapp-lambda-exec-role-sandbox"}},"root_module":{"resources":[{"address":"aws_iam_instance_profile.profile","mode":"managed","type":"aws_iam_instance_profile","name":"profile","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::123456789012:instance-profile/myapp-sandbox-instance-profile-terraform","create_date":"2019-08-02T18:45:00Z","id":"myapp-sandbox-instance-profile-terraform","name":"myapp-sandbox-instance-profile-terraform","name_prefix":null,"path":"/","role":"myapp-sandbox-instance-role-terraform","roles":["myapp-sandbox-instance-role-terraform"],"unique_id":"AIPAYJLBIKT7QCMHJ3HP5"},"depends_on":["aws_iam_role.instance_role"]},{"address":"aws_iam_role.instance_role","mode":"managed","type":"aws_iam_role","name":"instance_role","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::123456789012:role/myapp-sandbox-instance-role-terraform","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-08-02T18:45:00Z","description":"MyApp Instance Role (Managed by Terraform)","force_detach_policies":false,"id":"myapp-sandbox-instance-role-terraform","max_session_duration":3600,"name":"myapp-sandbox-instance-role-terraform","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Environment":"SB","Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"unique_id":"AROAYJLBIKT7VZO56G73C"}},{"address":"aws_iam_role.lambda_role","mode":"managed","type":"aws_iam_role","name":"lambda_role","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::123456789012:role/myapp-lambda-exec-role-sandbox","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"lambda.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"},{\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"apigateway.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-08-02T18:45:00Z","description":"MyApp Lambda Role (Managed by Terraform)","force_detach_policies":false,"id":"myapp-lambda-exec-role-sandbox","max_session_duration":3600,"name":"myapp-lambda-exec-role-sandbox","name_prefix":null,"path":"/","permissions_boundary":null,"tags":{"Environment":"SB","Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"unique_id":"AROAYJLBIKT74PGAUC6AC"}},{"address":"aws_iam_role_policy.lambda_role_policy","mode":"managed","type":"aws_iam_role_policy","name":"lambda_role_policy","provider_name":"aws","schema_version":0,"values":{"id":"myapp-lambda-exec-role-sandbox:MyAppambdaExecutionRoleAccess","name":"MyAppambdaExecutionRoleAccess","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n\t\t\t\t\"ec2:CreateNetworkInterface\",\n\t\t\t\t\"ec2:DescribeNetworkInterfaces\",\n\t\t\t\t\"ec2:DeleteNetworkInterface\",\n\t\t\t\t\"lambda:InvokeFunction\",\n\t\t\t\t\"cloudformation:DescribeChangeSet\",\n\t\t\t\t\"cloudformation:DescribeStackResources\",\n\t\t\t\t\"cloudformation:DescribeStacks\",\n\t\t\t\t\"cloudformation:GetTemplate\",\n\t\t\t\t\"cloudformation:ListStackResources\",\n\t\t\t\t\"cloudwatch:*\",\n\t\t\t\t\"cognito-identity:ListIdentityPools\",\n\t\t\t\t\"cognito-sync:GetCognitoEvents\",\n\t\t\t\t\"cognito-sync:SetCognitoEvents\",\n\t\t\t\t\"dynamodb:*\",\n\t\t\t\t\"ec2:DescribeSecurityGroups\",\n\t\t\t\t\"ec2:DescribeSubnets\",\n\t\t\t\t\"ec2:DescribeVpcs\",\n\t\t\t\t\"events:*\",\n\t\t\t\t\"iam:GetPolicy\",\n\t\t\t\t\"iam:GetPolicyVersion\",\n\t\t\t\t\"iam:GetRole\",\n\t\t\t\t\"iam:GetRolePolicy\",\n\t\t\t\t\"iam:ListAttachedRolePolicies\",\n\t\t\t\t\"iam:ListRolePolicies\",\n\t\t\t\t\"iam:ListRoles\",\n\t\t\t\t\"iam:PassRole\",\n\t\t\t\t\"iot:AttachPrincipalPolicy\",\n\t\t\t\t\"iot:AttachThingPrincipal\",\n\t\t\t\t\"iot:CreateKeysAndCertificate\",\n\t\t\t\t\"iot:CreatePolicy\",\n\t\t\t\t\"iot:CreateThing\",\n\t\t\t\t\"iot:CreateTopicRule\",\n\t\t\t\t\"iot:DescribeEndpoint\",\n\t\t\t\t\"iot:GetTopicRule\",\n\t\t\t\t\"iot:ListPolicies\",\n\t\t\t\t\"iot:ListThings\",\n\t\t\t\t\"iot:ListTopicRules\",\n\t\t\t\t\"iot:ReplaceTopicRule\",\n\t\t\t\t\"kinesis:DescribeStream\",\n\t\t\t\t\"kinesis:ListStreams\",\n\t\t\t\t\"kinesis:PutRecord\",\n\t\t\t\t\"kms:ListAliases\",\n\t\t\t\t\"lambda:*\",\n\t\t\t\t\"s3:*\",\n\t\t\t\t\"sns:ListSubscriptions\",\n\t\t\t\t\"sns:ListSubscriptionsByTopic\",\n\t\t\t\t\"sns:ListTopics\",\n\t\t\t\t\"sns:Publish\",\n\t\t\t\t\"sns:Subscribe\",\n\t\t\t\t\"sns:Unsubscribe\",\n\t\t\t\t\"sqs:ListQueues\",\n\t\t\t\t\"sqs:SendMessage\",\n\t\t\t\t\"tag:GetResources\",\n\t\t\t\t\"xray:PutTelemetryRecords\",\n\t\t\t\t\"xray:PutTraceSegments\",\n\t\t\t\t\"sts:GetCallerIdentity\"\n\t\t\t],\n\t\t\t\"Resource\": \"*\"\n    },\n\t\t{\n\t\t\t\"Effect\": \"Allow\",\n\t\t\t\"Action\": [\n\t\t\t\t\t\"logs:*\"\n\t\t\t],\n\t\t\t\"Resource\": \"arn:aws:logs:*:*:*\"\n\t\t},\n\t\t{\n\t\t\t\"Effect\": \"Allow\",\n\t\t\t\"Action\": [\n\t\t\t\t\t\"s3:GetObject\",\n\t\t\t\t\t\"s3:PutObject\"\n\t\t\t],\n\t\t\t\"Resource\": \"arn:aws:s3:::*\"\n\t\t},\n\t\t{\n\t    \"Effect\": \"Allow\",\n\t    \"Action\": [\n\t\t\t\t\t\"execute-api:Invoke\"\n\t\t\t],\n\t    \"Resource\": \"arn:aws:execute-api:*:*:*\"\n\t\t},\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Resource\": \"arn:aws:iam::123456789012:role/jmeter-sandbox-role-terraform\"\n    }\n  ]\n}\n","role":"myapp-lambda-exec-role-sandbox"},"depends_on":["aws_iam_role.lambda_role"]},{"address":"aws_iam_role_policy.myapp_instance_role_policy","mode":"managed","type":"aws_iam_role_policy","name":"myapp_instance_role_policy","provider_name":"aws","schema_version":0,"values":{"id":"myapp-sandbox-instance-role-terraform:MyAppInstanceRoleAccess","name":"MyAppInstanceRoleAccess","name_prefix":null,"policy":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": [\n\t\t\t\t\"ec2:CreateNetworkInterface\",\n\t\t\t\t\"ec2:DescribeNetworkInterfaces\",\n\t\t\t\t\"ec2:DeleteNetworkInterface\",\n\t\t\t\t\"lambda:InvokeFunction\",\n\t\t\t\t\"cloudformation:DescribeChangeSet\",\n\t\t\t\t\"cloudformation:DescribeStackResources\",\n\t\t\t\t\"cloudformation:DescribeStacks\",\n\t\t\t\t\"cloudformation:GetTemplate\",\n\t\t\t\t\"cloudformation:ListStackResources\",\n\t\t\t\t\"cloudwatch:*\",\n\t\t\t\t\"cognito-identity:ListIdentityPools\",\n\t\t\t\t\"cognito-sync:GetCognitoEvents\",\n\t\t\t\t\"cognito-sync:SetCognitoEvents\",\n\t\t\t\t\"dynamodb:*\",\n\t\t\t\t\"ec2:DescribeSecurityGroups\",\n\t\t\t\t\"ec2:DescribeSubnets\",\n\t\t\t\t\"ec2:DescribeVpcs\",\n\t\t\t\t\"ec2:TerminateInstances\",\n\t\t\t\t\"events:*\",\n\t\t\t\t\"iam:GetPolicy\",\n\t\t\t\t\"iam:GetPolicyVersion\",\n\t\t\t\t\"iam:GetRole\",\n\t\t\t\t\"iam:GetRolePolicy\",\n\t\t\t\t\"iam:ListAttachedRolePolicies\",\n\t\t\t\t\"iam:ListRolePolicies\",\n\t\t\t\t\"iam:ListRoles\",\n\t\t\t\t\"iam:PassRole\",\n\t\t\t\t\"iot:AttachPrincipalPolicy\",\n\t\t\t\t\"iot:AttachThingPrincipal\",\n\t\t\t\t\"iot:CreateKeysAndCertificate\",\n\t\t\t\t\"iot:CreatePolicy\",\n\t\t\t\t\"iot:CreateThing\",\n\t\t\t\t\"iot:CreateTopicRule\",\n\t\t\t\t\"iot:DescribeEndpoint\",\n\t\t\t\t\"iot:GetTopicRule\",\n\t\t\t\t\"iot:ListPolicies\",\n\t\t\t\t\"iot:ListThings\",\n\t\t\t\t\"iot:ListTopicRules\",\n\t\t\t\t\"iot:ReplaceTopicRule\",\n\t\t\t\t\"kinesis:DescribeStream\",\n\t\t\t\t\"kinesis:ListStreams\",\n\t\t\t\t\"kinesis:PutRecord\",\n\t\t\t\t\"kms:ListAliases\",\n\t\t\t\t\"lambda:*\",\n\t\t\t\t\"s3:*\",\n\t\t\t\t\"sns:ListSubscriptions\",\n\t\t\t\t\"sns:ListSubscriptionsByTopic\",\n\t\t\t\t\"sns:ListTopics\",\n\t\t\t\t\"sns:Publish\",\n\t\t\t\t\"sns:Subscribe\",\n\t\t\t\t\"sns:Unsubscribe\",\n\t\t\t\t\"sqs:ListQueues\",\n\t\t\t\t\"sqs:SendMessage\",\n\t\t\t\t\"tag:GetResources\",\n\t\t\t\t\"xray:PutTelemetryRecords\",\n\t\t\t\t\"xray:PutTraceSegments\",\n\t\t\t\t\"sts:GetCallerIdentity\"\n\t\t\t],\n\t\t\t\"Resource\": \"*\"\n    },\n\t\t{\n\t\t\t\"Effect\": \"Allow\",\n\t\t\t\"Action\": [\n\t\t\t\t\t\"logs:*\"\n\t\t\t],\n\t\t\t\"Resource\": \"arn:aws:logs:*:*:*\"\n\t\t},\n\t\t{\n\t\t\t\"Effect\": \"Allow\",\n\t\t\t\"Action\": [\n\t\t\t\t\t\"s3:GetObject\",\n\t\t\t\t\t\"s3:PutObject\"\n\t\t\t],\n\t\t\t\"Resource\": \"arn:aws:s3:::*\"\n\t\t},\n\t\t{\n\t    \"Effect\": \"Allow\",\n\t    \"Action\": [\n\t\t\t\t\t\"execute-api:Invoke\"\n\t\t\t],\n\t    \"Resource\": \"arn:aws:execute-api:*:*:*\"\n\t\t},\n    {\n      \"Effect\": \"Allow\",\n      \"Action\": \"sts:AssumeRole\",\n      \"Resource\": \"arn:aws:iam::123456789012:role/jmeter-sandbox-role-terraform\"\n    }\n  ]\n}\n","role":"myapp-sandbox-instance-role-terraform"},"depends_on":["aws_iam_role.instance_role"]},{"address":"aws_iam_role_policy_attachment.systems-manager-role","mode":"managed","type":"aws_iam_role_policy_attachment","name":"systems-manager-role","provider_name":"aws","schema_version":0,"values":{"id":"myapp-sandbox-instance-role-terraform-20190802184500040100000004","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonEC2RoleforSSM","role":"myapp-sandbox-instance-role-terraform"},"depends_on":["aws_iam_role.instance_role"]},{"address":"aws_security_group.lambda_sg","mode":"managed","type":"aws_security_group","name":"lambda_sg","provider_name":"aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:123456789012:security-group/sg-041e96ff356b17d07","description":"MyApp Lambda Security Group (Managed by Terraform)","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-041e96ff356b17d07","ingress":[{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"name":"myapp-lambda-security-group-sandbox","name_prefix":null,"owner_id":"123456789012","revoke_rules_on_delete":false,"tags":{"Environment":"SB","Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"timeouts":null,"vpc_id":"vpc-32E071F6"}},{"address":"aws_security_group_rule.asg-ingress","mode":"managed","type":"aws_security_group_rule","name":"asg-ingress","provider_name":"aws","schema_version":2,"values":{"cidr_blocks":[],"description":"","from_port":4000,"id":"sgrule-1542931884","ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_group_id":"sg-064772947d40297ad","self":false,"source_security_group_id":"sg-0facdb20f33578aa9","to_port":4000,"type":"ingress"},"depends_on":["module.alb.aws_security_group.alb","module.myapp-asg.aws_security_group.sg_asg"]},{"address":"aws_security_group_rule.asg-ingress-https","mode":"managed","type":"aws_security_group_rule","name":"asg-ingress-https","provider_name":"aws","schema_version":2,"values":{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":443,"id":"sgrule-4096621285","ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_group_id":"sg-064772947d40297ad","self":false,"source_security_group_id":null,"to_port":443,"type":"ingress"},"depends_on":["module.myapp-asg.aws_security_group.sg_asg"]},{"address":"aws_security_group_rule.asg-ingress-ssh","mode":"managed","type":"aws_security_group_rule","name":"asg-ingress-ssh","provider_name":"aws","schema_version":2,"values":{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":22,"id":"sgrule-3938363093","ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_group_id":"sg-064772947d40297ad","self":false,"source_security_group_id":null,"to_port":22,"type":"ingress"},"depends_on":["module.myapp-asg.aws_security_group.sg_asg"]},{"address":"aws_security_group_rule.inbound","mode":"managed","type":"aws_security_group_rule","name":"inbound","provider_name":"aws","schema_version":2,"values":{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":443,"id":"sgrule-328527316","ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_group_id":"sg-0facdb20f33578aa9","self":false,"source_security_group_id":null,"to_port":443,"type":"ingress"},"depends_on":["module.alb.aws_security_group.alb"]},{"address":"aws_security_group_rule.outbound_internet_access","mode":"managed","type":"aws_security_group_rule","name":"outbound_internet_access","provider_name":"aws","schema_version":2,"values":{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"id":"sgrule-2791450964","ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_group_id":"sg-0facdb20f33578aa9","self":false,"source_security_group_id":null,"to_port":0,"type":"egress"},"depends_on":["module.alb.aws_security_group.alb"]},{"address":"data.aws_ami.latest_centos_ami","mode":"data","type":"aws_ami","name":"latest_centos_ami","provider_name":"aws","schema_version":0,"values":{"architecture":"x86_64","block_device_mappings":[{"device_name":"/dev/sda1","ebs":{"delete_on_termination":"true","encrypted":"false","iops":"0","snapshot_id":"snap-0728b6aeae008d24d","volume_size":"30","volume_type":"gp2"},"no_device":"","virtual_name":""}],"creation_date":"2019-12-06T15:00:00.000Z","description":null,"executable_users":null,"filter":[{"name":"is-public","values":["false"]},{"name":"name","values":["CENTOS-*-PTCT-AMI-*"]},{"name":"owner-id","values":["147721705183"]}],"hypervisor":"xen","id":"ami-0d8c17087b65a0f94","image_id":"ami-0d8c17087b65a0f94","image_location":"147721705183/CENTOS-7-PTCT-AMI-2019.12.06.02.41.48","image_owner_alias":null,"image_type":"machine","kernel_id":null,"most_recent":true,"name":"CENTOS-7-PTCT-AMI-2019.12.06.02.41.48","name_regex":null,"owner_id":"147721705183","owners":["147721705183"],"platform":null,"product_codes":[{"product_code_id":"aw0evgkw8e5c1q413zgy5pjce","product_code_type":"marketplace"}],"public":false,"ramdisk_id":null,"root_device_name":"/dev/sda1","root_device_type":"ebs","root_snapshot_id":"snap-0728b6aeae008d24d","sriov_net_support":null,"state":"available","state_reason":{"code":"UNSET","message":"UNSET"},"tags":{},"virtualization_type":"hvm"}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"aws","schema_version":0,"values":{"account_id":"123456789012","arn":"arn:aws:sts::123456789012:assumed-role/cross-account-role-app/1585833017182026679","id":"2020-04-02 13:10:17.373723319 +0000 UTC","user_id":"AROAI5CMA7UDCDDLXYMJE:1585833017182026679"}},{"address":"data.aws_caller_identity.module_validation","mode":"data","type":"aws_caller_identity","name":"module_validation","provider_name":"aws","schema_version":0,"values":{"account_id":"123456789012","arn":"arn:aws:sts::123456789012:assumed-role/cross-account-role-app/1585833017182026679","id":"2020-04-02 13:10:17.375912627 +0000 UTC","user_id":"AROAI5CMA7UDCDDLXYMJE:1585833017182026679"}},{"address":"data.aws_subnet_ids.private_subnets","mode":"data","type":"aws_subnet_ids","name":"private_subnets","provider_name":"aws","schema_version":0,"values":{"filter":null,"id":"vpc-32E071F6","ids":["subnet-13f44a58","subnet-9918eec4"],"tags":{"Name":"us-east-1-mybu-sandbox-private-subnet*"},"vpc_id":"vpc-32E071F6"}},{"address":"data.external.id_retriever","mode":"data","type":"external","name":"id_retriever","provider_name":"external","schema_version":0,"values":{"id":"-","program":["python2.7","./get_id.py"],"query":{"id":"123456789012"},"result":{"accountRetrieval":"true"},"working_dir":null}},{"address":"data.template_file.user_data","mode":"data","type":"template_file","name":"user_data","provider_name":"template","schema_version":0,"values":{"filename":null,"id":"b13a8abd4e0c2a2a96b8244e49fdcb2ad804c1af7ffd32dd53c33a685c6944db","rendered":"#!/bin/bash\n\n#Me:\necho \"Hello World\"\n\n#World:\n\n#Me:\necho \"uh okay. good talk\"\n","template":"#!/bin/bash\n\n#Me:\necho \"Hello World\"\n\n#World:\n\n#Me:\necho \"uh okay. good talk\"\n","vars":{"assume_account":"147721705183","branch":"remove-influx-dependency","build_env":"Sandbox","region":"us-east-1","revision_tag":"HEAD"}}},{"address":"data.terraform_remote_state.mybu_sandbox","mode":"data","type":"terraform_remote_state","name":"mybu_sandbox","provider_name":"terraform","schema_version":0,"values":{"backend":"s3","config":{"bucket":"mycompany-shared-devops-us-east-1","key":"terraform/backend/nonprod/itio/ptct-tf/us-east-1/sandbox/terraform.tfstate","region":"us-east-1"},"defaults":null,"outputs":{"api_invoke_url":"https://juanfzmwaf.execute-api.us-east-1.amazonaws.com/sandbox"},"workspace":"default"}}],"child_modules":[{"resources":[{"address":"aws_lambda_function.lambda","mode":"managed","type":"aws_lambda_function","name":"lambda","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:lambda:us-east-1:123456789012:function:MyAPP_TFUpgradeTest_SB","dead_letter_config":[],"description":"","environment":[{"variables":{"DB_PASSWORD":"DB_PASSWORD","DB_PORT":"5432","DB_USERNAME":"ptctusrz"}}],"filename":null,"function_name":"MyAPP_TFUpgradeTest_SB","handler":"TFUpgradeTest.handler","id":"MyAPP_TFUpgradeTest_SB","invoke_arn":"arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/arn:aws:lambda:us-east-1:123456789012:function:MyAPP_TFUpgradeTest_SB/invocations","kms_key_arn":"","last_modified":"2019-12-10T15:54:39.096+0000","layers":[],"memory_size":256,"publish":false,"qualified_arn":"arn:aws:lambda:us-east-1:123456789012:function:MyAPP_TFUpgradeTest_SB:$LATEST","reserved_concurrent_executions":-1,"role":"arn:aws:iam::123456789012:role/myapp-lambda-exec-role-sandbox","runtime":"python3.7","s3_bucket":"mybu-sandbox-devops-us-east-1","s3_key":"lambdas/PTCT/sandbox/HandleS3Update.zip","s3_object_version":null,"source_code_hash":"JF2nxUZ6bnJhNvF8nOgaOiIMvjiH/Kcdkau4k4khH1o=","source_code_size":12209663,"tags":{"Environment":"Sandbox","Name":"myapp-sandbox-lambda-myapp-tfupgradetest-sb","ProjectType":"secret","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"timeout":900,"timeouts":null,"tracing_config":[{"mode":"PassThrough"}],"version":"$LATEST","vpc_config":[{"security_group_ids":["sg-041e96ff356b17d07"],"subnet_ids":["subnet-13f44a58","subnet-9918eec4"],"vpc_id":"vpc-32E071F6"}]},"depends_on":["aws_iam_role.lambda_role","aws_security_group.lambda_sg"]},{"address":"data.aws_s3_bucket_object.s3_obj","mode":"data","type":"aws_s3_bucket_object","name":"s3_obj","provider_name":"aws","schema_version":0,"values":{"body":null,"bucket":"mybu-sandbox-devops-us-east-1","cache_control":"","content_disposition":"","content_encoding":"","content_language":"","content_length":12209743,"content_type":"binary/octet-stream","etag":"82c222c008f8ad763ecb5bc5088771d3-2","expiration":"","expires":"","id":"mybu-sandbox-devops-us-east-1/lambdas/PTCT/sandbox/HandleS3Update.zip","key":"lambdas/PTCT/sandbox/HandleS3Update.zip","last_modified":"Wed, 11 Dec 2019 15:36:56 UTC","metadata":{},"object_lock_legal_hold_status":"","object_lock_mode":"","object_lock_retain_until_date":"","range":null,"server_side_encryption":"AES256","sse_kms_key_id":"","storage_class":"STANDARD","tags":{"Timestamp":"2019-12-11 15:36:54","base64sha256":"NXnVW3YW8VMPgU70nlFx8NKvuc3T3NCNNUA1X4MgxlM="},"version_id":"","website_redirect_location":""}}],"address":"module.lambda_TFUpgradeTest","child_modules":[{"resources":[{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"aws","schema_version":0,"values":{"current":null,"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1"}},{"address":"data.aws_route53_zone.default","mode":"data","type":"aws_route53_zone","name":"default","provider_name":"aws","schema_version":0,"values":{"caller_reference":"2017-11-04T21:53:04.347301076Z","comment":"Managed by Terraform","id":"ZJH0HXNRO2EHR","linked_service_description":null,"linked_service_principal":null,"name":"mybusandbox.aws.mycompany.com.","name_servers":[],"private_zone":true,"resource_record_set_count":17,"tags":null,"vpc_id":"vpc-32E071F6","zone_id":"ZJH0HXNRO2EHR"}},{"address":"data.aws_route53_zone.public","mode":"data","type":"aws_route53_zone","name":"public","index":0,"provider_name":"aws","schema_version":0,"values":{"caller_reference":"terraform-20190117193659831300000001","comment":"Managed by Terraform","id":"ZC0UVN8232UAR","linked_service_description":null,"linked_service_principal":null,"name":"mybusandbox.aws.mycompany.com.","name_servers":["ns-1784.awsdns-31.co.uk","ns-833.awsdns-40.net","ns-1389.awsdns-45.org","ns-117.awsdns-14.com"],"private_zone":false,"resource_record_set_count":3,"tags":null,"vpc_id":null,"zone_id":"ZC0UVN8232UAR"}},{"address":"data.aws_subnet_ids.default","mode":"data","type":"aws_subnet_ids","name":"default","provider_name":"aws","schema_version":0,"values":{"filter":[{"name":"availability-zone","values":["*"]}],"id":"vpc-32E071F6","ids":["subnet-13f44a58","subnet-9918eec4"],"tags":{"Name":"us-east-1-mybu-sandbox-private-subnet*"},"vpc_id":"vpc-32E071F6"}},{"address":"data.aws_vpc.default","mode":"data","type":"aws_vpc","name":"default","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:123456789012:vpc/vpc-32E071F6","cidr_block":"10.107.56.0/21","cidr_block_associations":[{"association_id":"vpc-cidr-assoc-b82c87d2","cidr_block":"10.107.56.0/21","state":"associated"}],"default":false,"dhcp_options_id":"dopt-029b7b467417bf229","enable_dns_hostnames":true,"enable_dns_support":true,"filter":[{"name":"tag:Name","values":["us-east-1-mybu-sandbox-vpc"]}],"id":"vpc-32E071F6","instance_tenancy":"default","ipv6_association_id":null,"ipv6_cidr_block":null,"main_route_table_id":"rtb-e6ce9a9c","owner_id":"123456789012","state":"available","tags":{"AppComponent":"n/a","AppOwner":"manny.manny@mycompany.com","AppVersion":"n/a","Application":"mybu-networking","BackupDisable":"false","BusinessUnit":"mybu","Cluster":"false","CostCenter":"shared","CreatedBy":"manny.manny@mycompany.com","DataClassification":"n/a","Environment":"sandbox","Function":"networking","Name":"us-east-1-mybu-sandbox-vpc","Region":"us-east-1","Service":"networking","StartTime":"n/a","StopTime":"n/a"}}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":12,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"system_risk_class","value":"2"},"outputs":{"key":"system_risk_class","value":"2"},"random":"9012483891950412406"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":7,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"business_unit","value":"mybu"},"outputs":{"key":"business_unit","value":"mybu"},"random":"1586567611372472673"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":9,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"function","value":"appserver"},"outputs":{"key":"function","value":"appserver"},"random":"4054030251687313792"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":10,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"network_environment","value":"sandbox"},"outputs":{"key":"network_environment","value":"sandbox"},"random":"904631772565744407"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":2,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"ProjectType","value":"secret"},"outputs":{"key":"ProjectType","value":"secret"},"random":"5005949019753262631"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":0,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"Environment","value":"Sandbox"},"outputs":{"key":"Environment","value":"Sandbox"},"random":"9168856980812334434"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":1,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"Name","value":"myapp-sandbox-lambda-myapp-tfupgradetest-sb"},"outputs":{"key":"Name","value":"myapp-sandbox-lambda-myapp-tfupgradetest-sb"},"random":"2444226878465845123"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":5,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"app_environment","value":"sandbox"},"outputs":{"key":"app_environment","value":"sandbox"},"random":"6535697523911524550"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":6,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"application","value":"myapp"},"outputs":{"key":"application","value":"myapp"},"random":"2094322361311257158"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":8,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"created_by","value":"me@example.com"},"outputs":{"key":"created_by","value":"me@example.com"},"random":"7711913380749279542"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":11,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"region","value":"us-east-1"},"outputs":{"key":"region","value":"us-east-1"},"random":"6976736621408835098"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":3,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"app_component","value":"lambda"},"outputs":{"key":"app_component","value":"lambda"},"random":"2214374532394205238"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":4,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"app_contacts","value":"me@example.com"},"outputs":{"key":"app_contacts","value":"me@example.com"},"random":"6744660861705740905"}}],"address":"module.lambda_TFUpgradeTest.module.data-tags"},{"address":"module.lambda_TFUpgradeTest.module.data-utils"}]},{"resources":[{"address":"aws_security_group.sg_asg","mode":"managed","type":"aws_security_group","name":"sg_asg","provider_name":"aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:123456789012:security-group/sg-064772947d40297ad","description":"myapp-sandbox-jmeter-results security group","egress":[],"id":"sg-064772947d40297ad","ingress":[{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":22,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":22},{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443},{"cidr_blocks":[],"description":"","from_port":4000,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":["sg-0facdb20f33578aa9"],"self":false,"to_port":4000}],"name":"myapp-sandbox-jmeter-results-sg-20190802184459801000000001","name_prefix":"myapp-sandbox-jmeter-results-sg-","owner_id":"123456789012","revoke_rules_on_delete":false,"tags":{"Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"timeouts":null,"vpc_id":"vpc-32E071F6"}},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_name":"aws","schema_version":0,"values":{"account_id":"123456789012","arn":"arn:aws:sts::123456789012:assumed-role/cross-account-role-app/1585833017182026679","id":"2020-04-02 13:10:17.372015186 +0000 UTC","user_id":"AROAI5CMA7UDCDDLXYMJE:1585833017182026679"}}],"address":"module.myapp-asg","child_modules":[{"resources":[{"address":"aws_iam_instance_profile.profile","mode":"managed","type":"aws_iam_instance_profile","name":"profile","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::123456789012:instance-profile/myapp-sandbox-jmeter-results-iam-role-20190802184459990200000003","create_date":"2019-08-02T18:45:00Z","id":"myapp-sandbox-jmeter-results-iam-role-20190802184459990200000003","name":"myapp-sandbox-jmeter-results-iam-role-20190802184459990200000003","name_prefix":"myapp-sandbox-jmeter-results-iam-role-","path":"/","role":"myapp-sandbox-jmeter-results20190802184459805500000002","roles":["myapp-sandbox-jmeter-results20190802184459805500000002"],"unique_id":"AIPAYJLBIKT772GQ37DXH"},"depends_on":["module.myapp-asg.module.iam.aws_iam_role.role"]},{"address":"aws_iam_role.role","mode":"managed","type":"aws_iam_role","name":"role","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:iam::123456789012:role/myapp-sandbox-jmeter-results20190802184459805500000002","assume_role_policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Sid\":\"\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"ec2.amazonaws.com\"},\"Action\":\"sts:AssumeRole\"}]}","create_date":"2019-08-02T18:45:00Z","description":"myapp-sandbox-jmeter-results role","force_detach_policies":false,"id":"myapp-sandbox-jmeter-results20190802184459805500000002","max_session_duration":3600,"name":"myapp-sandbox-jmeter-results20190802184459805500000002","name_prefix":"myapp-sandbox-jmeter-results","path":"/","permissions_boundary":null,"tags":{"Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"appserver","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2"},"unique_id":"AROAYJLBIKT7TCP2UP7BJ"}},{"address":"aws_iam_role_policy_attachment.systems-manager-role","mode":"managed","type":"aws_iam_role_policy_attachment","name":"systems-manager-role","provider_name":"aws","schema_version":0,"values":{"id":"myapp-sandbox-jmeter-results20190802184459805500000002-20190802184500043500000005","policy_arn":"arn:aws:iam::aws:policy/service-role/AmazonEC2RoleforSSM","role":"myapp-sandbox-jmeter-results20190802184459805500000002"},"depends_on":["module.myapp-asg.module.iam.aws_iam_role.role"]},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"aws","schema_version":0,"values":{"current":null,"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1"}}],"address":"module.myapp-asg.module.iam","child_modules":[{"resources":[{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"aws","schema_version":0,"values":{"current":null,"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1"}},{"address":"data.aws_route53_zone.default","mode":"data","type":"aws_route53_zone","name":"default","provider_name":"aws","schema_version":0,"values":{"caller_reference":"2017-11-04T21:53:04.347301076Z","comment":"Managed by Terraform","id":"ZJH0HXNRO2EHR","linked_service_description":null,"linked_service_principal":null,"name":"mybusandbox.aws.mycompany.com.","name_servers":[],"private_zone":true,"resource_record_set_count":17,"tags":null,"vpc_id":"vpc-32E071F6","zone_id":"ZJH0HXNRO2EHR"}},{"address":"data.aws_route53_zone.public","mode":"data","type":"aws_route53_zone","name":"public","index":0,"provider_name":"aws","schema_version":0,"values":{"caller_reference":"terraform-20190117193659831300000001","comment":"Managed by Terraform","id":"ZC0UVN8232UAR","linked_service_description":null,"linked_service_principal":null,"name":"mybusandbox.aws.mycompany.com.","name_servers":["ns-1784.awsdns-31.co.uk","ns-833.awsdns-40.net","ns-1389.awsdns-45.org","ns-117.awsdns-14.com"],"private_zone":false,"resource_record_set_count":3,"tags":null,"vpc_id":null,"zone_id":"ZC0UVN8232UAR"}},{"address":"data.aws_subnet_ids.default","mode":"data","type":"aws_subnet_ids","name":"default","provider_name":"aws","schema_version":0,"values":{"filter":[{"name":"availability-zone","values":["*"]}],"id":"vpc-32E071F6","ids":["subnet-13f44a58","subnet-9918eec4"],"tags":{"Name":"us-east-1-mybu-sandbox-private-subnet*"},"vpc_id":"vpc-32E071F6"}},{"address":"data.aws_vpc.default","mode":"data","type":"aws_vpc","name":"default","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:123456789012:vpc/vpc-32E071F6","cidr_block":"10.107.56.0/21","cidr_block_associations":[{"association_id":"vpc-cidr-assoc-b82c87d2","cidr_block":"10.107.56.0/21","state":"associated"}],"default":false,"dhcp_options_id":"dopt-029b7b467417bf229","enable_dns_hostnames":true,"enable_dns_support":true,"filter":[{"name":"tag:Name","values":["us-east-1-mybu-sandbox-vpc"]}],"id":"vpc-32E071F6","instance_tenancy":"default","ipv6_association_id":null,"ipv6_cidr_block":null,"main_route_table_id":"rtb-e6ce9a9c","owner_id":"123456789012","state":"available","tags":{"AppComponent":"n/a","AppOwner":"manny.manny@mycompany.com","AppVersion":"n/a","Application":"mybu-networking","BackupDisable":"false","BusinessUnit":"mybu","Cluster":"false","CostCenter":"shared","CreatedBy":"manny.manny@mycompany.com","DataClassification":"n/a","Environment":"sandbox","Function":"networking","Name":"us-east-1-mybu-sandbox-vpc","Region":"us-east-1","Service":"networking","StartTime":"n/a","StopTime":"n/a"}}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":0,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"Name","propagate_at_launch":"true","value":"myapp-jmeter-results-sandbox"},"outputs":{"key":"Name","propagate_at_launch":"true","value":"myapp-jmeter-results-sandbox"},"random":"3323160587908378373"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":9,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"region","propagate_at_launch":"true","value":"us-east-1"},"outputs":{"key":"region","propagate_at_launch":"true","value":"us-east-1"},"random":"1007558730471138151"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":10,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"system_risk_class","propagate_at_launch":"true","value":"2"},"outputs":{"key":"system_risk_class","propagate_at_launch":"true","value":"2"},"random":"7334071920412466287"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":5,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"business_unit","propagate_at_launch":"true","value":"mybu"},"outputs":{"key":"business_unit","propagate_at_launch":"true","value":"mybu"},"random":"202220304397093483"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":1,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"app_component","propagate_at_launch":"true","value":"jmeter-results"},"outputs":{"key":"app_component","propagate_at_launch":"true","value":"jmeter-results"},"random":"2072493023240463324"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":2,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"app_contacts","propagate_at_launch":"true","value":"me@example.com"},"outputs":{"key":"app_contacts","propagate_at_launch":"true","value":"me@example.com"},"random":"7989061433731871990"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":4,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"application","propagate_at_launch":"true","value":"myapp"},"outputs":{"key":"application","propagate_at_launch":"true","value":"myapp"},"random":"3847981199437702230"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":7,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"function","propagate_at_launch":"true","value":"appserver"},"outputs":{"key":"function","propagate_at_launch":"true","value":"appserver"},"random":"8508807743586783439"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":6,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"created_by","propagate_at_launch":"true","value":"me@example.com"},"outputs":{"key":"created_by","propagate_at_launch":"true","value":"me@example.com"},"random":"1201846797590733287"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":3,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"app_environment","propagate_at_launch":"true","value":"sandbox"},"outputs":{"key":"app_environment","propagate_at_launch":"true","value":"sandbox"},"random":"2283507392541254860"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":8,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"network_environment","propagate_at_launch":"true","value":"sandbox"},"outputs":{"key":"network_environment","propagate_at_launch":"true","value":"sandbox"},"random":"5526717653298065284"}}],"address":"module.myapp-asg.module.iam.module.data-utils"}]},{"resources":[{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"aws","schema_version":0,"values":{"current":null,"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1"}},{"address":"data.aws_route53_zone.default","mode":"data","type":"aws_route53_zone","name":"default","provider_name":"aws","schema_version":0,"values":{"caller_reference":"2017-11-04T21:53:04.347301076Z","comment":"Managed by Terraform","id":"ZJH0HXNRO2EHR","linked_service_description":null,"linked_service_principal":null,"name":"mybusandbox.aws.mycompany.com.","name_servers":[],"private_zone":true,"resource_record_set_count":17,"tags":null,"vpc_id":"vpc-32E071F6","zone_id":"ZJH0HXNRO2EHR"}},{"address":"data.aws_route53_zone.public","mode":"data","type":"aws_route53_zone","name":"public","index":0,"provider_name":"aws","schema_version":0,"values":{"caller_reference":"terraform-20190117193659831300000001","comment":"Managed by Terraform","id":"ZC0UVN8232UAR","linked_service_description":null,"linked_service_principal":null,"name":"mybusandbox.aws.mycompany.com.","name_servers":["ns-1784.awsdns-31.co.uk","ns-833.awsdns-40.net","ns-1389.awsdns-45.org","ns-117.awsdns-14.com"],"private_zone":false,"resource_record_set_count":3,"tags":null,"vpc_id":null,"zone_id":"ZC0UVN8232UAR"}},{"address":"data.aws_subnet_ids.default","mode":"data","type":"aws_subnet_ids","name":"default","provider_name":"aws","schema_version":0,"values":{"filter":[{"name":"availability-zone","values":["*"]}],"id":"vpc-32E071F6","ids":["subnet-13f44a58","subnet-9918eec4"],"tags":{"Name":"us-east-1-mybu-sandbox-private-subnet*"},"vpc_id":"vpc-32E071F6"}},{"address":"data.aws_vpc.default","mode":"data","type":"aws_vpc","name":"default","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:123456789012:vpc/vpc-32E071F6","cidr_block":"10.107.56.0/21","cidr_block_associations":[{"association_id":"vpc-cidr-assoc-b82c87d2","cidr_block":"10.107.56.0/21","state":"associated"}],"default":false,"dhcp_options_id":"dopt-029b7b467417bf229","enable_dns_hostnames":true,"enable_dns_support":true,"filter":[{"name":"tag:Name","values":["us-east-1-mybu-sandbox-vpc"]}],"id":"vpc-32E071F6","instance_tenancy":"default","ipv6_association_id":null,"ipv6_cidr_block":null,"main_route_table_id":"rtb-e6ce9a9c","owner_id":"123456789012","state":"available","tags":{"AppComponent":"n/a","AppOwner":"manny.manny@mycompany.com","AppVersion":"n/a","Application":"mybu-networking","BackupDisable":"false","BusinessUnit":"mybu","Cluster":"false","CostCenter":"shared","CreatedBy":"manny.manny@mycompany.com","DataClassification":"n/a","Environment":"sandbox","Function":"networking","Name":"us-east-1-mybu-sandbox-vpc","Region":"us-east-1","Service":"networking","StartTime":"n/a","StopTime":"n/a"}}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":5,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"business_unit","propagate_at_launch":"true","value":"mybu"},"outputs":{"key":"business_unit","propagate_at_launch":"true","value":"mybu"},"random":"9184926148225369625"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":0,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"Name","propagate_at_launch":"true","value":"myapp-jmeter-results-sandbox"},"outputs":{"key":"Name","propagate_at_launch":"true","value":"myapp-jmeter-results-sandbox"},"random":"8348837323155946498"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":3,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"app_environment","propagate_at_launch":"true","value":"sandbox"},"outputs":{"key":"app_environment","propagate_at_launch":"true","value":"sandbox"},"random":"7480379102404354715"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":10,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"system_risk_class","propagate_at_launch":"true","value":"2"},"outputs":{"key":"system_risk_class","propagate_at_launch":"true","value":"2"},"random":"2296310614093632825"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":9,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"region","propagate_at_launch":"true","value":"us-east-1"},"outputs":{"key":"region","propagate_at_launch":"true","value":"us-east-1"},"random":"388453711185575099"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":6,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"created_by","propagate_at_launch":"true","value":"me@example.com"},"outputs":{"key":"created_by","propagate_at_launch":"true","value":"me@example.com"},"random":"7330705911120920264"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":7,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"function","propagate_at_launch":"true","value":"appserver"},"outputs":{"key":"function","propagate_at_launch":"true","value":"appserver"},"random":"2169736801355616911"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":8,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"network_environment","propagate_at_launch":"true","value":"sandbox"},"outputs":{"key":"network_environment","propagate_at_launch":"true","value":"sandbox"},"random":"3091776051171557568"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":1,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"app_component","propagate_at_launch":"true","value":"jmeter-results"},"outputs":{"key":"app_component","propagate_at_launch":"true","value":"jmeter-results"},"random":"170742011615448761"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":2,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"app_contacts","propagate_at_launch":"true","value":"me@example.com"},"outputs":{"key":"app_contacts","propagate_at_launch":"true","value":"me@example.com"},"random":"5874087754880611075"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":4,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"application","propagate_at_launch":"true","value":"myapp"},"outputs":{"key":"application","propagate_at_launch":"true","value":"myapp"},"random":"5174993259753900670"}}],"address":"module.myapp-asg.module.data-utils"}]},{"resources":[{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"aws","schema_version":0,"values":{"current":null,"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1"}},{"address":"data.aws_route53_zone.default","mode":"data","type":"aws_route53_zone","name":"default","provider_name":"aws","schema_version":0,"values":{"caller_reference":"2017-11-04T21:53:04.347301076Z","comment":"Managed by Terraform","id":"ZJH0HXNRO2EHR","linked_service_description":null,"linked_service_principal":null,"name":"mybusandbox.aws.mycompany.com.","name_servers":[],"private_zone":true,"resource_record_set_count":17,"tags":null,"vpc_id":"vpc-32E071F6","zone_id":"ZJH0HXNRO2EHR"}},{"address":"data.aws_route53_zone.public","mode":"data","type":"aws_route53_zone","name":"public","index":0,"provider_name":"aws","schema_version":0,"values":{"caller_reference":"terraform-20190117193659831300000001","comment":"Managed by Terraform","id":"ZC0UVN8232UAR","linked_service_description":null,"linked_service_principal":null,"name":"mybusandbox.aws.mycompany.com.","name_servers":["ns-1784.awsdns-31.co.uk","ns-833.awsdns-40.net","ns-1389.awsdns-45.org","ns-117.awsdns-14.com"],"private_zone":false,"resource_record_set_count":3,"tags":null,"vpc_id":null,"zone_id":"ZC0UVN8232UAR"}},{"address":"data.aws_subnet_ids.default","mode":"data","type":"aws_subnet_ids","name":"default","provider_name":"aws","schema_version":0,"values":{"filter":[{"name":"availability-zone","values":["*"]}],"id":"vpc-32E071F6","ids":["subnet-13f44a58","subnet-9918eec4"],"tags":{"Name":"us-east-1-mybu-sandbox-private-subnet*"},"vpc_id":"vpc-32E071F6"}},{"address":"data.aws_vpc.default","mode":"data","type":"aws_vpc","name":"default","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:123456789012:vpc/vpc-32E071F6","cidr_block":"10.107.56.0/21","cidr_block_associations":[{"association_id":"vpc-cidr-assoc-b82c87d2","cidr_block":"10.107.56.0/21","state":"associated"}],"default":false,"dhcp_options_id":"dopt-029b7b467417bf229","enable_dns_hostnames":true,"enable_dns_support":true,"filter":[{"name":"tag:Name","values":["us-east-1-mybu-sandbox-vpc"]}],"id":"vpc-32E071F6","instance_tenancy":"default","ipv6_association_id":null,"ipv6_cidr_block":null,"main_route_table_id":"rtb-e6ce9a9c","owner_id":"123456789012","state":"available","tags":{"AppComponent":"n/a","AppOwner":"manny.manny@mycompany.com","AppVersion":"n/a","Application":"mybu-networking","BackupDisable":"false","BusinessUnit":"mybu","Cluster":"false","CostCenter":"shared","CreatedBy":"manny.manny@mycompany.com","DataClassification":"n/a","Environment":"sandbox","Function":"networking","Name":"us-east-1-mybu-sandbox-vpc","Region":"us-east-1","Service":"networking","StartTime":"n/a","StopTime":"n/a"}}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":9,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"network_environment","propagate_at_launch":"true","value":"sandbox"},"outputs":{"key":"network_environment","propagate_at_launch":"true","value":"sandbox"},"random":"2484460266821612934"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":7,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"created_by","propagate_at_launch":"true","value":"me@example.com"},"outputs":{"key":"created_by","propagate_at_launch":"true","value":"me@example.com"},"random":"1637037249999535824"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":8,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"function","propagate_at_launch":"true","value":"appserver"},"outputs":{"key":"function","propagate_at_launch":"true","value":"appserver"},"random":"8717735456278665106"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":4,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"app_environment","propagate_at_launch":"true","value":"sandbox"},"outputs":{"key":"app_environment","propagate_at_launch":"true","value":"sandbox"},"random":"3099335491505311967"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":11,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"system_risk_class","propagate_at_launch":"true","value":"2"},"outputs":{"key":"system_risk_class","propagate_at_launch":"true","value":"2"},"random":"1015335054351402702"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":2,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"app_component","propagate_at_launch":"true","value":"jmeter-results"},"outputs":{"key":"app_component","propagate_at_launch":"true","value":"jmeter-results"},"random":"2249839653056327657"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":3,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"app_contacts","propagate_at_launch":"true","value":"me@example.com"},"outputs":{"key":"app_contacts","propagate_at_launch":"true","value":"me@example.com"},"random":"5192645864139432361"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":1,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"Name","propagate_at_launch":"true","value":"myapp-jmeter-results-sandbox"},"outputs":{"key":"Name","propagate_at_launch":"true","value":"myapp-jmeter-results-sandbox"},"random":"7454944295286329807"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":0,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"Environment","propagate_at_launch":"true","value":"SB"},"outputs":{"key":"Environment","propagate_at_launch":"true","value":"SB"},"random":"2216801331747229119"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":10,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"region","propagate_at_launch":"true","value":"us-east-1"},"outputs":{"key":"region","propagate_at_launch":"true","value":"us-east-1"},"random":"8392313935713812472"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":6,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"business_unit","propagate_at_launch":"true","value":"mybu"},"outputs":{"key":"business_unit","propagate_at_launch":"true","value":"mybu"},"random":"901987138139258431"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":5,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"application","propagate_at_launch":"true","value":"myapp"},"outputs":{"key":"application","propagate_at_launch":"true","value":"myapp"},"random":"3470505264935187926"}}],"address":"module.data-utils"},{"resources":[{"address":"aws_alb.alb","mode":"managed","type":"aws_alb","name":"alb","provider_name":"aws","schema_version":0,"values":{"access_logs":[{"bucket":"alb-access-logs-us-east-1","enabled":true,"prefix":"mybu/myapp/sandbox/jmeter-results"}],"arn":"arn:aws:elasticloadbalancing:us-east-1:123456789012:loadbalancer/app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465","arn_suffix":"app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465","dns_name":"internal-mybu-sandbox-myapp-instance-alb-478863.us-east-1.elb.amazonaws.com","enable_cross_zone_load_balancing":null,"enable_deletion_protection":false,"enable_http2":true,"id":"arn:aws:elasticloadbalancing:us-east-1:123456789012:loadbalancer/app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465","idle_timeout":60,"internal":true,"ip_address_type":"ipv4","load_balancer_type":"application","name":"mybu-sandbox-myapp-instance-alb","name_prefix":null,"security_groups":["sg-0facdb20f33578aa9"],"subnet_mapping":[{"allocation_id":"","subnet_id":"subnet-13f44a58"},{"allocation_id":"","subnet_id":"subnet-9918eec4"}],"subnets":["subnet-13f44a58","subnet-9918eec4"],"tags":{"Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"loadbalancer","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2","waf_custom":"","waf_policy":"internal"},"timeouts":null,"vpc_id":"vpc-32E071F6","zone_id":"Z35SHUIKEG7D7L"},"depends_on":["module.alb.aws_security_group.alb"]},{"address":"aws_alb_listener.alb","mode":"managed","type":"aws_alb_listener","name":"alb","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:us-east-1:123456789012:listener/app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465/ae54df34347920f4","certificate_arn":"arn:aws:acm:us-east-1:123456789012:certificate/a48731a1-5c79-411a-acb7-fa0b28937250","default_action":[{"authenticate_cognito":[],"authenticate_oidc":[],"fixed_response":[],"order":1,"redirect":[],"target_group_arn":"arn:aws:elasticloadbalancing:us-east-1:123456789012:targetgroup/mybu-sandbox-myapp-instance-alb/f33662f2da142d83","type":"forward"}],"id":"arn:aws:elasticloadbalancing:us-east-1:123456789012:listener/app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465/ae54df34347920f4","load_balancer_arn":"arn:aws:elasticloadbalancing:us-east-1:123456789012:loadbalancer/app/mybu-sandbox-myapp-instance-alb/2ae7b3df5b81f465","port":443,"protocol":"HTTPS","ssl_policy":"ELBSecurityPolicy-2016-08","timeouts":null},"depends_on":["module.alb.aws_alb.alb","module.alb.aws_alb_target_group.alb","module.alb.aws_security_group.alb"]},{"address":"aws_alb_target_group.alb","mode":"managed","type":"aws_alb_target_group","name":"alb","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:elasticloadbalancing:us-east-1:123456789012:targetgroup/mybu-sandbox-myapp-instance-alb/f33662f2da142d83","arn_suffix":"targetgroup/mybu-sandbox-myapp-instance-alb/f33662f2da142d83","deregistration_delay":300,"health_check":[{"enabled":true,"healthy_threshold":2,"interval":60,"matcher":"200","path":"/index.html","port":"traffic-port","protocol":"HTTP","timeout":10,"unhealthy_threshold":5}],"id":"arn:aws:elasticloadbalancing:us-east-1:123456789012:targetgroup/mybu-sandbox-myapp-instance-alb/f33662f2da142d83","lambda_multi_value_headers_enabled":false,"name":"mybu-sandbox-myapp-instance-alb","name_prefix":null,"port":4000,"protocol":"HTTP","proxy_protocol_v2":false,"slow_start":0,"stickiness":[{"cookie_duration":1,"enabled":false,"type":"lb_cookie"}],"tags":{"Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"loadbalancer","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2","waf_custom":"","waf_policy":"internal"},"target_type":"instance","vpc_id":"vpc-32E071F6"}},{"address":"aws_route53_record.route53","mode":"managed","type":"aws_route53_record","name":"route53","provider_name":"aws","schema_version":2,"values":{"alias":[{"evaluate_target_health":true,"name":"internal-mybu-sandbox-myapp-instance-alb-478863.us-east-1.elb.amazonaws.com","zone_id":"Z35SHUIKEG7D7L"}],"allow_overwrite":null,"failover_routing_policy":[],"fqdn":"myapp.mybusandbox.aws.mycompany.com","geolocation_routing_policy":[],"health_check_id":"","id":"ZJH0HXNRO2EHR_myapp_A","latency_routing_policy":[],"multivalue_answer_routing_policy":null,"name":"myapp","records":[],"set_identifier":"","ttl":0,"type":"A","weighted_routing_policy":[],"zone_id":"ZJH0HXNRO2EHR"},"depends_on":["module.alb.aws_alb.alb","module.alb.aws_security_group.alb"]},{"address":"aws_security_group.alb","mode":"managed","type":"aws_security_group","name":"alb","provider_name":"aws","schema_version":1,"values":{"arn":"arn:aws:ec2:us-east-1:123456789012:security-group/sg-0facdb20f33578aa9","description":"Managed by Terraform","egress":[{"cidr_blocks":["0.0.0.0/0"],"description":"","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"id":"sg-0facdb20f33578aa9","ingress":[{"cidr_blocks":["10.0.0.0/8"],"description":"","from_port":443,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","security_groups":[],"self":false,"to_port":443}],"name":"mybu-sandbox-myapp-instance-alb-alb-sg","name_prefix":null,"owner_id":"123456789012","revoke_rules_on_delete":false,"tags":{"Name":"myapp-jmeter-results-sandbox","app_component":"jmeter-results","app_contacts":"me@example.com","app_environment":"sandbox","application":"myapp","business_unit":"mybu","created_by":"me@example.com","function":"loadbalancer","network_environment":"sandbox","region":"us-east-1","system_risk_class":"2","waf_custom":"","waf_policy":"internal"},"timeouts":null,"vpc_id":"vpc-32E071F6"}}],"address":"module.alb","child_modules":[{"address":"module.alb.module.data-utils"},{"resources":[{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_name":"aws","schema_version":0,"values":{"current":null,"description":"US East (N. Virginia)","endpoint":"ec2.us-east-1.amazonaws.com","id":"us-east-1","name":"us-east-1"}},{"address":"data.aws_route53_zone.default","mode":"data","type":"aws_route53_zone","name":"default","provider_name":"aws","schema_version":0,"values":{"caller_reference":"2017-11-04T21:53:04.347301076Z","comment":"Managed by Terraform","id":"ZJH0HXNRO2EHR","linked_service_description":null,"linked_service_principal":null,"name":"mybusandbox.aws.mycompany.com.","name_servers":[],"private_zone":true,"resource_record_set_count":17,"tags":null,"vpc_id":"vpc-32E071F6","zone_id":"ZJH0HXNRO2EHR"}},{"address":"data.aws_route53_zone.public","mode":"data","type":"aws_route53_zone","name":"public","index":0,"provider_name":"aws","schema_version":0,"values":{"caller_reference":"terraform-20190117193659831300000001","comment":"Managed by Terraform","id":"ZC0UVN8232UAR","linked_service_description":null,"linked_service_principal":null,"name":"mybusandbox.aws.mycompany.com.","name_servers":["ns-1784.awsdns-31.co.uk","ns-833.awsdns-40.net","ns-1389.awsdns-45.org","ns-117.awsdns-14.com"],"private_zone":false,"resource_record_set_count":3,"tags":null,"vpc_id":null,"zone_id":"ZC0UVN8232UAR"}},{"address":"data.aws_subnet_ids.default","mode":"data","type":"aws_subnet_ids","name":"default","provider_name":"aws","schema_version":0,"values":{"filter":[{"name":"availability-zone","values":["*"]}],"id":"vpc-32E071F6","ids":["subnet-13f44a58","subnet-9918eec4"],"tags":{"Name":"us-east-1-mybu-sandbox-private-subnet*"},"vpc_id":"vpc-32E071F6"}},{"address":"data.aws_vpc.default","mode":"data","type":"aws_vpc","name":"default","provider_name":"aws","schema_version":0,"values":{"arn":"arn:aws:ec2:us-east-1:123456789012:vpc/vpc-32E071F6","cidr_block":"10.107.56.0/21","cidr_block_associations":[{"association_id":"vpc-cidr-assoc-b82c87d2","cidr_block":"10.107.56.0/21","state":"associated"}],"default":false,"dhcp_options_id":"dopt-029b7b467417bf229","enable_dns_hostnames":true,"enable_dns_support":true,"filter":[{"name":"tag:Name","values":["us-east-1-mybu-sandbox-vpc"]}],"id":"vpc-32E071F6","instance_tenancy":"default","ipv6_association_id":null,"ipv6_cidr_block":null,"main_route_table_id":"rtb-e6ce9a9c","owner_id":"123456789012","state":"available","tags":{"AppComponent":"n/a","AppOwner":"manny.manny@mycompany.com","AppVersion":"n/a","Application":"mybu-networking","BackupDisable":"false","BusinessUnit":"mybu","Cluster":"false","CostCenter":"shared","CreatedBy":"manny.manny@mycompany.com","DataClassification":"n/a","Environment":"sandbox","Function":"networking","Name":"us-east-1-mybu-sandbox-vpc","Region":"us-east-1","Service":"networking","StartTime":"n/a","StopTime":"n/a"}}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":0,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"Name","propagate_at_launch":"true","value":"mybu-sandbox-myapp-instance-alb"},"outputs":{"key":"Name","propagate_at_launch":"true","value":"mybu-sandbox-myapp-instance-alb"},"random":"3260572767349139296"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":6,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"created_by","propagate_at_launch":"true","value":"me@example.com"},"outputs":{"key":"created_by","propagate_at_launch":"true","value":"me@example.com"},"random":"6244472172674922044"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":8,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"network_environment","propagate_at_launch":"true","value":"sandbox"},"outputs":{"key":"network_environment","propagate_at_launch":"true","value":"sandbox"},"random":"7007013860594217849"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":11,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"waf_custom","propagate_at_launch":"true","value":""},"outputs":{"key":"waf_custom","propagate_at_launch":"true","value":""},"random":"6175167041398928742"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":5,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"business_unit","propagate_at_launch":"true","value":"mybu"},"outputs":{"key":"business_unit","propagate_at_launch":"true","value":"mybu"},"random":"4475889700173124592"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":2,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"app_contacts","propagate_at_launch":"true","value":"me@example.com"},"outputs":{"key":"app_contacts","propagate_at_launch":"true","value":"me@example.com"},"random":"9193274866036464938"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":3,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"app_environment","propagate_at_launch":"true","value":"sandbox"},"outputs":{"key":"app_environment","propagate_at_launch":"true","value":"sandbox"},"random":"4261170839270599298"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":9,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"region","propagate_at_launch":"true","value":"us-east-1"},"outputs":{"key":"region","propagate_at_launch":"true","value":"us-east-1"},"random":"2487503871061001310"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":10,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"system_risk_class","propagate_at_launch":"true","value":"2"},"outputs":{"key":"system_risk_class","propagate_at_launch":"true","value":"2"},"random":"8905983983823336084"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":12,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"waf_policy","propagate_at_launch":"true","value":"internal"},"outputs":{"key":"waf_policy","propagate_at_launch":"true","value":"internal"},"random":"4051141072695746351"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":1,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"app_component","propagate_at_launch":"true","value":"jmeter-results"},"outputs":{"key":"app_component","propagate_at_launch":"true","value":"jmeter-results"},"random":"7488731053586277074"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":4,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"application","propagate_at_launch":"true","value":"myapp"},"outputs":{"key":"application","propagate_at_launch":"true","value":"myapp"},"random":"8820278791941675681"}},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","index":7,"provider_name":"null","schema_version":0,"values":{"has_computed_default":"default","id":"static","inputs":{"key":"function","propagate_at_launch":"true","value":"loadbalancer"},"outputs":{"key":"function","propagate_at_launch":"true","value":"loadbalancer"},"random":"2370475229970016751"}}],"address":"module.alb.module.data-tags"}]}]}}},"configuration":{"provider_config":{"aws":{"name":"aws","version_constraint":"\u003e= 1.15","expressions":{"assume_role":[{"role_arn":{"references":["var.role_arn"]}}],"region":{"references":["var.aws_region"]}}}},"root_module":{"outputs":{"lambda_execution_arn":{"expression":{"references":["aws_iam_role.lambda_role"]}}},"resources":[{"address":"aws_iam_instance_profile.profile","mode":"managed","type":"aws_iam_instance_profile","name":"profile","provider_config_key":"aws","expressions":{"name":{"references":["local.profile_name"]},"role":{"references":["aws_iam_role.instance_role"]}},"schema_version":0},{"address":"aws_iam_role.instance_role","mode":"managed","type":"aws_iam_role","name":"instance_role","provider_config_key":"aws","expressions":{"assume_role_policy":{"constant_value":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": \"ec2.amazonaws.com\"\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n"},"description":{"constant_value":"MyApp Instance Role (Managed by Terraform)"},"name":{"references":["local.name"]},"path":{"constant_value":"/"},"tags":{"references":["module.data-utils.tags"]}},"schema_version":0},{"address":"aws_iam_role.lambda_role","mode":"managed","type":"aws_iam_role","name":"lambda_role","provider_config_key":"aws","expressions":{"assume_role_policy":{"constant_value":"{\n  \"Version\": \"2012-10-17\",\n  \"Statement\": [\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": \"lambda.amazonaws.com\"\n      },\n      \"Action\": \"sts:AssumeRole\"\n    },\n    {\n      \"Effect\": \"Allow\",\n      \"Principal\": {\n        \"Service\": \"apigateway.amazonaws.com\"\n      },\n      \"Action\": \"sts:AssumeRole\"\n    }\n  ]\n}\n"},"description":{"constant_value":"MyApp Lambda Role (Managed by Terraform)"},"name":{"references":["var.lambda_exec_role_name","local.env"]},"path":{"constant_value":"/"},"tags":{"references":["module.data-utils.tags"]}},"schema_version":0},{"address":"aws_iam_role_policy.lambda_role_policy","mode":"managed","type":"aws_iam_role_policy","name":"lambda_role_policy","provider_config_key":"aws","expressions":{"name":{"constant_value":"MyAppambdaExecutionRoleAccess"},"policy":{"references":["var.asg_instance_assume_role"]},"role":{"references":["aws_iam_role.lambda_role"]}},"schema_version":0},{"address":"aws_iam_role_policy.myapp_instance_role_policy","mode":"managed","type":"aws_iam_role_policy","name":"myapp_instance_role_policy","provider_config_key":"aws","expressions":{"name":{"constant_value":"MyAppInstanceRoleAccess"},"policy":{"references":["var.asg_instance_assume_role"]},"role":{"references":["aws_iam_role.instance_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.systems-manager-role","mode":"managed","type":"aws_iam_role_policy_attachment","name":"systems-manager-role","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AmazonEC2RoleforSSM"},"role":{"references":["aws_iam_role.instance_role"]}},"schema_version":0},{"address":"aws_security_group.lambda_sg","mode":"managed","type":"aws_security_group","name":"lambda_sg","provider_config_key":"aws","expressions":{"description":{"constant_value":"MyApp Lambda Security Group (Managed by Terraform)"},"name":{"references":["local.env"]},"tags":{"references":["module.data-utils.tags"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1},{"address":"aws_security_group_rule.asg-ingress","mode":"managed","type":"aws_security_group_rule","name":"asg-ingress","provider_config_key":"aws","expressions":{"from_port":{"constant_value":4000},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["module.myapp-asg.sg_id"]},"source_security_group_id":{"references":["module.alb.sg_id"]},"to_port":{"constant_value":4000},"type":{"constant_value":"ingress"}},"schema_version":2},{"address":"aws_security_group_rule.asg-ingress-https","mode":"managed","type":"aws_security_group_rule","name":"asg-ingress-https","provider_config_key":"aws","expressions":{"cidr_blocks":{"constant_value":["10.0.0.0/8"]},"from_port":{"constant_value":443},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["module.myapp-asg.sg_id"]},"to_port":{"constant_value":443},"type":{"constant_value":"ingress"}},"schema_version":2},{"address":"aws_security_group_rule.asg-ingress-ssh","mode":"managed","type":"aws_security_group_rule","name":"asg-ingress-ssh","provider_config_key":"aws","expressions":{"cidr_blocks":{"constant_value":["10.0.0.0/8"]},"from_port":{"constant_value":22},"protocol":{"constant_value":"tcp"},"security_group_id":{"references":["module.myapp-asg.sg_id"]},"to_port":{"constant_value":22},"type":{"constant_value":"ingress"}},"schema_version":2},{"address":"aws_security_group_rule.inbound","mode":"managed","type":"aws_security_group_rule","name":"inbound","provider_config_key":"aws","expressions":{"cidr_blocks":{"constant_value":["10.0.0.0/8"]},"from_port":{"constant_value":443},"protocol":{"constant_value":"TCP"},"security_group_id":{"references":["module.alb.sg_id"]},"to_port":{"constant_value":443},"type":{"constant_value":"ingress"}},"schema_version":2},{"address":"aws_security_group_rule.outbound_internet_access","mode":"managed","type":"aws_security_group_rule","name":"outbound_internet_access","provider_config_key":"aws","expressions":{"cidr_blocks":{"constant_value":["0.0.0.0/0"]},"from_port":{"constant_value":0},"protocol":{"constant_value":"-1"},"security_group_id":{"references":["module.alb.sg_id"]},"to_port":{"constant_value":0},"type":{"constant_value":"egress"}},"schema_version":2},{"address":"data.aws_ami.latest_centos_ami","mode":"data","type":"aws_ami","name":"latest_centos_ami","provider_config_key":"aws","expressions":{"filter":[{"name":{"constant_value":"name"},"values":{"references":["var.ami_name_regex"]}},{"name":{"constant_value":"owner-id"},"values":{"references":["var.ami_owner"]}},{"name":{"constant_value":"is-public"},"values":{"constant_value":["false"]}}],"most_recent":{"constant_value":true},"owners":{"references":["var.ami_owner"]}},"schema_version":0},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"aws","schema_version":0},{"address":"data.aws_caller_identity.module_validation","mode":"data","type":"aws_caller_identity","name":"module_validation","provider_config_key":"aws","schema_version":0},{"address":"data.aws_subnet_ids.private_subnets","mode":"data","type":"aws_subnet_ids","name":"private_subnets","provider_config_key":"aws","expressions":{"tags":{"references":["var.name_prefix"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":0},{"address":"data.external.id_retriever","mode":"data","type":"external","name":"id_retriever","provider_config_key":"external","expressions":{"program":{"references":["path.module"]},"query":{"references":["data.aws_caller_identity.module_validation"]}},"schema_version":0},{"address":"data.template_file.user_data","mode":"data","type":"template_file","name":"user_data","provider_config_key":"template","expressions":{"template":{"references":["path.module"]},"vars":{"references":["var.environment","var.region","var.branch","var.revision_tag","var.assume_account"]}},"schema_version":0},{"address":"data.terraform_remote_state.mybu_sandbox","mode":"data","type":"terraform_remote_state","name":"mybu_sandbox","provider_config_key":"terraform","expressions":{"backend":{"constant_value":"s3"},"config":{"references":["var.remote_state_s3_bucket","var.remote_state_s3_key","var.aws_region"]}},"schema_version":0}],"module_calls":{"alb":{"source":"git::ssh://aws_jenkins@git.mycompany.com:7999/tfng/alb?ref=v1.0.0","expressions":{"alb_listener_certificate_arn":{"references":["var.alb_listener_certificate_arn"]},"alb_listener_port":{"references":["var.alb_listener_port"]},"alb_listener_protocol":{"references":["var.alb_listener_protocol"]},"alb_listener_ssl_policy":{"references":["var.alb_listener_ssl_policy"]},"alb_name":{"references":["var.business_unit","var.environment","var.application"]},"alb_target_group_port":{"references":["var.alb_target_group_port"]},"alb_target_group_protocol":{"references":["var.alb_target_group_protocol"]},"alb_target_group_type":{"references":["var.alb_target_group_type"]},"app_component":{"references":["var.app_component"]},"app_contacts":{"references":["var.app_contacts"]},"app_environment":{"references":["var.app_environment"]},"application":{"references":["var.application"]},"attributes":{"references":["var.attributes"]},"business_unit":{"references":["var.business_unit"]},"created_by":{"references":["var.created_by"]},"deregistration_delay":{"references":["var.deregistration_delay"]},"enable_deletion_protection":{"references":["var.enable_deletion_protection"]},"function":{"constant_value":"loadbalancer"},"health_check":{"references":["var.health_check"]},"idle_timeout":{"references":["var.idle_timeout"]},"internal":{"references":["var.internal"]},"ip_address_type":{"references":["var.ip_address_type"]},"network_environment":{"references":["var.network_environment"]},"region":{"references":["var.region"]},"stickiness":{"references":["var.stickiness"]},"system_risk_class":{"references":["var.system_risk_class"]},"tags":{"references":["var.tags"]},"waf_custom":{"references":["var.waf_custom"]},"waf_policy":{"references":["var.waf_policy"]}},"module":{"outputs":{"alb_arn":{"expression":{"references":["aws_alb.alb"]}},"alb_dns_name":{"expression":{"references":["aws_alb.alb"]}},"alb_id":{"expression":{"references":["aws_alb.alb"]}},"alb_listener_arn":{"expression":{"references":["aws_alb_listener.alb"]}},"alb_target_group_arn":{"expression":{"references":["aws_alb_target_group.alb"]}},"r53_fqdn":{"expression":{"references":["aws_route53_record.route53"]}},"sg_id":{"expression":{"references":["aws_security_group.alb"]}}},"resources":[{"address":"aws_alb.alb","mode":"managed","type":"aws_alb","name":"alb","provider_config_key":"alb:aws","expressions":{"access_logs":[{"bucket":{"references":["local.log_bucket_name"]},"enabled":{"constant_value":true},"prefix":{"references":["local.log_prefix"]}}],"enable_deletion_protection":{"references":["var.enable_deletion_protection"]},"idle_timeout":{"references":["var.idle_timeout"]},"internal":{"references":["var.internal"]},"ip_address_type":{"references":["var.ip_address_type"]},"name":{"references":["var.alb_name"]},"security_groups":{"references":["aws_security_group.alb"]},"subnets":{"references":["module.data-tags.aws_subnet_ids"]},"tags":{"references":["module.data-tags.tags"]}},"schema_version":0},{"address":"aws_alb_listener.alb","mode":"managed","type":"aws_alb_listener","name":"alb","provider_config_key":"alb:aws","expressions":{"certificate_arn":{"references":["var.alb_listener_certificate_arn"]},"default_action":[{"target_group_arn":{"references":["aws_alb_target_group.alb"]},"type":{"constant_value":"forward"}}],"load_balancer_arn":{"references":["aws_alb.alb"]},"port":{"references":["var.alb_listener_port"]},"protocol":{"references":["var.alb_listener_protocol"]},"ssl_policy":{"references":["var.alb_listener_ssl_policy"]}},"schema_version":0},{"address":"aws_alb_target_group.alb","mode":"managed","type":"aws_alb_target_group","name":"alb","provider_config_key":"alb:aws","expressions":{"deregistration_delay":{"references":["var.deregistration_delay"]},"health_check":[{"healthy_threshold":{"references":["var.health_check"]},"interval":{"references":["var.health_check"]},"matcher":{"references":["var.health_check"]},"path":{"references":["var.health_check"]},"port":{"references":["var.health_check"]},"protocol":{"references":["var.health_check"]},"timeout":{"references":["var.health_check"]},"unhealthy_threshold":{"references":["var.health_check"]}}],"name":{"references":["var.alb_name"]},"port":{"references":["var.alb_target_group_port"]},"protocol":{"references":["var.alb_target_group_protocol"]},"stickiness":[{"cookie_duration":{"references":["var.stickiness"]},"enabled":{"references":["var.stickiness"]},"type":{"constant_value":"lb_cookie"}}],"tags":{"references":["module.data-tags.tags"]},"target_type":{"references":["var.alb_target_group_type"]},"vpc_id":{"references":["module.data-tags.vpc_id"]}},"schema_version":0},{"address":"aws_route53_record.route53","mode":"managed","type":"aws_route53_record","name":"route53","provider_config_key":"alb:aws","expressions":{"alias":[{"evaluate_target_health":{"constant_value":true},"name":{"references":["aws_alb.alb"]},"zone_id":{"references":["aws_alb.alb"]}}],"name":{"references":["local.dns_name"]},"type":{"constant_value":"A"},"zone_id":{"references":["module.data-tags.zone_id"]}},"schema_version":2},{"address":"aws_security_group.alb","mode":"managed","type":"aws_security_group","name":"alb","provider_config_key":"alb:aws","expressions":{"name":{"references":["var.alb_name"]},"tags":{"references":["module.data-tags.tags"]},"vpc_id":{"references":["module.data-tags.vpc_id"]}},"schema_version":1}],"module_calls":{"data-tags":{"source":"git::ssh://git@git.mycompany.com:7999/tfng/data-utils?ref=v1.0.0","expressions":{"additional_tag_map":{"references":["var.additional_tag_map"]},"app_component":{"references":["var.app_component"]},"app_contacts":{"references":["var.app_contacts"]},"app_environment":{"references":["var.app_environment"]},"application":{"references":["var.application"]},"attributes":{"references":["var.attributes"]},"business_unit":{"references":["var.business_unit"]},"created_by":{"references":["var.created_by"]},"function":{"references":["var.function"]},"network_environment":{"references":["var.network_environment"]},"region":{"references":["var.region"]},"subnet_filter":{"references":["var.subnet_filter"]},"subnet_type":{"references":["var.subnet_type"]},"system_risk_class":{"references":["var.system_risk_class"]},"tags":{"references":["var.tags_additional","var.alb_name","var.waf_policy","var.waf_custom"]}},"module":{"outputs":{"aws_subnet_ids":{"expression":{"references":["data.aws_subnet_ids.default"]}},"id":{"expression":{"references":["local.enabled","local.id"]},"description":"Disambiguated ID"},"public_zone_id":{"expression":{"references":["data.aws_route53_zone.public"]}},"region":{"expression":{"references":["data.aws_region.current"]}},"subnet_group_elasticache":{"expression":{"references":["local.subnet_group_elasticache"]}},"subnet_group_rds":{"expression":{"references":["local.subnet_group_rds"]}},"tags":{"expression":{"references":["local.tags"]},"description":"Normalized Tag map"},"tags_as_list_of_maps":{"expression":{"references":["local.tags_as_list_of_maps"]},"description":"Additional tags as a list of maps, which can be used in several AWS resources"},"vpc_id":{"expression":{"references":["data.aws_vpc.default"]}},"zone_id":{"expression":{"references":["data.aws_route53_zone.default"]}}},"resources":[{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"data-tags:aws","schema_version":0},{"address":"data.aws_route53_zone.default","mode":"data","type":"aws_route53_zone","name":"default","provider_config_key":"data-tags:aws","expressions":{"name":{"references":["var.network_environment","local.bu","local.bu","var.network_environment"]},"private_zone":{"constant_value":true},"vpc_id":{"references":["data.aws_vpc.default"]}},"schema_version":0},{"address":"data.aws_route53_zone.public","mode":"data","type":"aws_route53_zone","name":"public","provider_config_key":"data-tags:aws","expressions":{"name":{"references":["var.network_environment","local.bu","local.bu","var.network_environment"]},"private_zone":{"constant_value":false}},"schema_version":0,"count_expression":{"references":["var.business_unit","var.network_environment","var.network_environment"]}},{"address":"data.aws_subnet_ids.default","mode":"data","type":"aws_subnet_ids","name":"default","provider_config_key":"data-tags:aws","expressions":{"filter":[{"name":{"constant_value":"availability-zone"},"values":{"references":["var.subnet_filter"]}}],"tags":{"references":["local.name_prefix","var.subnet_type"]},"vpc_id":{"references":["data.aws_vpc.default"]}},"schema_version":0},{"address":"data.aws_vpc.default","mode":"data","type":"aws_vpc","name":"default","provider_config_key":"data-tags:aws","expressions":{"filter":[{"name":{"constant_value":"tag:Name"},"values":{"references":["local.name_prefix"]}}]},"schema_version":0},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","provider_config_key":"data-tags:null","expressions":{"inputs":{"references":["local.tags","count.index","local.tags","count.index","var.additional_tag_map"]}},"schema_version":0,"count_expression":{"references":["local.enabled","local.tags"]}}],"variables":{"additional_tag_map":{"default":{"propagate_at_launch":"true"},"description":"Additional tags for appending to each tag map"},"app_component":{"default":"","description":"Breakdown of the functional parts (“components” or “subservices”) that make up an application. Grouping is based more on function than underlying technology. "},"app_contacts":{"default":"","description":"Application DL"},"app_environment":{"default":"","description":"Could be the same as network environment, except in the case of multiple app environments within a single network environment. "},"application":{"default":"","description":"Application name; a unifying name for the system involved. Must be globally unique across ALL of mycompany (there is only one “ourcom”), and must be uniform across all components of the app (all of these components are parts of the “ourcom” application)."},"attributes":{"default":[],"description":"Additional attributes to be appended to id (e.g. `1`)"},"business_unit":{"default":"","description":"The IT business unit paying for this application out of their budget, in lowercase."},"created_by":{"default":"","description":"Email address of person creating infrastructure (typically the person who writes the Terraform)"},"enabled":{"default":"true","description":"Set to false to prevent the module from creating any resources"},"function":{"default":"","description":"Used to identify function of server (app layer)"},"network_environment":{"default":"","description":"Network Env is a reference to the VPC you are building in. MUST be one of fixed values[ sandbox | dev | qa | prod ]"},"region":{"default":"","description":"region"},"subnet_filter":{"default":["*"],"description":"Filter subnets by keywords."},"subnet_type":{"default":"private","description":"which subnets to get: [private, protected, public]"},"system_risk_class":{"default":"","description":"system risk classification"},"tags":{"default":{},"description":"Additional tags (e.g. `map('BusinessUnit','XYZ')`"}}}}},"variables":{"additional_tag_map":{"default":{"propagate_at_launch":"true"},"description":"Additional tags for appending to each tag map"},"alb_listener_certificate_arn":{"default":null,"description":" (Optional) The ARN of the SSL server certificate. Exactly one certificate is required if the protocol is HTTPS."},"alb_listener_port":{"description":"(Required) The port on which the load balancer is listening."},"alb_listener_protocol":{"default":null,"description":"(Optional) The protocol for connections from clients to the load balancer. Valid values are HTTP and HTTPS. Defaults to HTTP."},"alb_listener_ssl_policy":{"default":null,"description":"(Optional) The name of the SSL Policy for the listener. Required if protocol is HTTPS."},"alb_name":{"description":"The name of the loadbalancer"},"alb_target_group_port":{"description":" (Required) The port on which targets receive traffic, unless overridden when registering a specific target."},"alb_target_group_protocol":{"description":" (Required) The protocol to use for routing traffic to the targets."},"alb_target_group_type":{"default":null,"description":" (Optional) The type of target that you must specify when registering targets with this target group."},"app_component":{"description":"Breakdown of the functional parts (“components” or “subservices”) that make up an application. Grouping is based more on function than underlying technology. "},"app_contacts":{"description":"Application DL"},"app_environment":{"description":"Could be the same as network environment, except in the case of multiple app environments within a single network environment. "},"application":{"description":"Application name; a unifying name for the system involved. Must be globally unique across ALL of mycompany (there is only one “ourcom”), and must be uniform across all components of the app (all of these components are parts of the “ourcom” application)."},"attributes":{"default":[],"description":"Additional attributes to be appended to id (e.g. `1`)"},"business_unit":{"description":"The IT business unit paying for this application out of their budget, in lowercase."},"created_by":{"description":"Email address of person creating infrastructure (typically the person who writes the Terraform)"},"delimiter":{"default":"-","description":"Delimiter to be used between values"},"deregistration_delay":{"default":null,"description":"The default deregistration delay"},"enable_deletion_protection":{"default":null,"description":"(Optional) If true, deletion of the load balancer will be disabled via the AWS API. This will prevent Terraform from deleting the load balancer. Defaults to false."},"enabled":{"default":"true","description":"Set to false to prevent the module from creating any resources"},"function":{"default":"","description":"Used to identify function of server (app layer)"},"health_check":{"default":{"healthy_threshold":null,"interval":null,"matcher":"200","path":"/","port":null,"protocol":null,"timeout":null,"unhealthy_threshold":null},"description":"(Optional) A Health Check block."},"idle_timeout":{"default":null,"description":"(Optional) The time in seconds that the connection is allowed to be idle. Default: 60."},"internal":{"default":true,"description":"(Optional) If true, the ALB will be internal."},"ip_address_type":{"default":"ipv4","description":"(Optional) The type of IP addresses used by the subnets for your load balancer. The possible values are ipv4 and dualstack"},"network_environment":{"description":"Network Env is a reference to the VPC you are building in. MUST be one of fixed values[ sandbox | dev | qa | prod ]"},"regex_replace_chars":{"default":"/[^a-zA-Z0-9-]/","description":"Regex to replace chars with empty string in values. By default only hyphens, letters and digits are allowed, all other chars are removed"},"region":{"description":"region"},"stickiness":{"default":{"cookie_duration":"1","enabled":"false"},"description":"A list of for stickiness variables"},"subnet_filter":{"default":["*"],"description":"Filter subnets by keywords."},"subnet_type":{"default":"private","description":"(Optional) by default alb will be built in private subnet but can be overrode by setting this variable"},"system_risk_class":{"description":"system risk classification"},"tags":{"default":{},"description":"Additional tags (e.g. `map('BusinessUnit','XYZ')`"},"tags_additional":{"default":{}},"waf_custom":{"default":"","description":"This to match a custom policy name in AWS FMS, created with security team (leave this blank if waf_policy tag not set to custom)."},"waf_policy":{"default":"internal","description":"Valid values are internal, external and custom"}}}},"data-utils":{"source":"git::ssh://git@git.mycompany.com:7999/tfng/data-utils?ref=v1.0.0","expressions":{"additional_tag_map":{"constant_value":{"propagate_at_launch":true}},"app_component":{"references":["var.app_component"]},"app_contacts":{"references":["var.app_contacts"]},"app_environment":{"references":["var.app_environment"]},"application":{"references":["var.application"]},"attributes":{"references":["var.attributes"]},"business_unit":{"references":["var.business_unit"]},"created_by":{"references":["var.created_by"]},"function":{"references":["var.function"]},"network_environment":{"references":["var.network_environment"]},"region":{"references":["var.region"]},"system_risk_class":{"references":["var.system_risk_class"]},"tags":{"references":["var.tags"]}},"module":{"outputs":{"aws_subnet_ids":{"expression":{"references":["data.aws_subnet_ids.default"]}},"id":{"expression":{"references":["local.enabled","local.id"]},"description":"Disambiguated ID"},"public_zone_id":{"expression":{"references":["data.aws_route53_zone.public"]}},"region":{"expression":{"references":["data.aws_region.current"]}},"subnet_group_elasticache":{"expression":{"references":["local.subnet_group_elasticache"]}},"subnet_group_rds":{"expression":{"references":["local.subnet_group_rds"]}},"tags":{"expression":{"references":["local.tags"]},"description":"Normalized Tag map"},"tags_as_list_of_maps":{"expression":{"references":["local.tags_as_list_of_maps"]},"description":"Additional tags as a list of maps, which can be used in several AWS resources"},"vpc_id":{"expression":{"references":["data.aws_vpc.default"]}},"zone_id":{"expression":{"references":["data.aws_route53_zone.default"]}}},"resources":[{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"data-utils:aws","schema_version":0},{"address":"data.aws_route53_zone.default","mode":"data","type":"aws_route53_zone","name":"default","provider_config_key":"data-utils:aws","expressions":{"name":{"references":["var.network_environment","local.bu","local.bu","var.network_environment"]},"private_zone":{"constant_value":true},"vpc_id":{"references":["data.aws_vpc.default"]}},"schema_version":0},{"address":"data.aws_route53_zone.public","mode":"data","type":"aws_route53_zone","name":"public","provider_config_key":"data-utils:aws","expressions":{"name":{"references":["var.network_environment","local.bu","local.bu","var.network_environment"]},"private_zone":{"constant_value":false}},"schema_version":0,"count_expression":{"references":["var.business_unit","var.network_environment","var.network_environment"]}},{"address":"data.aws_subnet_ids.default","mode":"data","type":"aws_subnet_ids","name":"default","provider_config_key":"data-utils:aws","expressions":{"filter":[{"name":{"constant_value":"availability-zone"},"values":{"references":["var.subnet_filter"]}}],"tags":{"references":["local.name_prefix","var.subnet_type"]},"vpc_id":{"references":["data.aws_vpc.default"]}},"schema_version":0},{"address":"data.aws_vpc.default","mode":"data","type":"aws_vpc","name":"default","provider_config_key":"data-utils:aws","expressions":{"filter":[{"name":{"constant_value":"tag:Name"},"values":{"references":["local.name_prefix"]}}]},"schema_version":0},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","provider_config_key":"data-utils:null","expressions":{"inputs":{"references":["local.tags","count.index","local.tags","count.index","var.additional_tag_map"]}},"schema_version":0,"count_expression":{"references":["local.enabled","local.tags"]}}],"variables":{"additional_tag_map":{"default":{"propagate_at_launch":"true"},"description":"Additional tags for appending to each tag map"},"app_component":{"default":"","description":"Breakdown of the functional parts (“components” or “subservices”) that make up an application. Grouping is based more on function than underlying technology. "},"app_contacts":{"default":"","description":"Application DL"},"app_environment":{"default":"","description":"Could be the same as network environment, except in the case of multiple app environments within a single network environment. "},"application":{"default":"","description":"Application name; a unifying name for the system involved. Must be globally unique across ALL of mycompany (there is only one “ourcom”), and must be uniform across all components of the app (all of these components are parts of the “ourcom” application)."},"attributes":{"default":[],"description":"Additional attributes to be appended to id (e.g. `1`)"},"business_unit":{"default":"","description":"The IT business unit paying for this application out of their budget, in lowercase."},"created_by":{"default":"","description":"Email address of person creating infrastructure (typically the person who writes the Terraform)"},"enabled":{"default":"true","description":"Set to false to prevent the module from creating any resources"},"function":{"default":"","description":"Used to identify function of server (app layer)"},"network_environment":{"default":"","description":"Network Env is a reference to the VPC you are building in. MUST be one of fixed values[ sandbox | dev | qa | prod ]"},"region":{"default":"","description":"region"},"subnet_filter":{"default":["*"],"description":"Filter subnets by keywords."},"subnet_type":{"default":"private","description":"which subnets to get: [private, protected, public]"},"system_risk_class":{"default":"","description":"system risk classification"},"tags":{"default":{},"description":"Additional tags (e.g. `map('BusinessUnit','XYZ')`"}}}},"lambda_TFUpgradeTest":{"source":"git::ssh://aws_jenkins@git.mycompany.com:7999/tfng/lambda?ref=v1.0.0","expressions":{"app_component":{"references":["var.app_component"]},"app_contacts":{"references":["var.app_contacts"]},"app_environment":{"references":["var.app_environment"]},"application":{"references":["var.application"]},"attributes":{"references":["var.attributes"]},"business_unit":{"references":["var.business_unit"]},"created_by":{"references":["var.created_by"]},"dead_letter_config":{"references":["var.dead_letter_config"]},"description":{"references":["var.description"]},"environment_vars":{"references":["var.environment_vars"]},"function":{"references":["var.function"]},"function_name":{"references":["local.lambda_name_prefix","var.TFUpgradeTest_function_name","local.lambda_name_postfix"]},"handler":{"references":["var.TFUpgradeTest_lambda_handler"]},"kms_key_arn":{"references":["var.kms_key_arn"]},"memory_size":{"references":["var.TFUpgradeTest_memory_size"]},"network_environment":{"references":["var.network_environment"]},"publish":{"references":["var.publish"]},"region":{"references":["var.region"]},"role":{"references":["aws_iam_role.lambda_role"]},"runtime":{"references":["var.lambda_runtime"]},"s3_bucket":{"references":["var.lambda_s3_bucket"]},"s3_key":{"references":["var.lambda_s3_path","local.env","var.TFUpgradeTest_s3_key"]},"security_group_ids":{"references":["aws_security_group.lambda_sg"]},"subnet_ids":{"references":["data.aws_subnet_ids.private_subnets"]},"system_risk_class":{"references":["var.system_risk_class"]},"tags":{"references":["var.lambda_tags"]},"timeout":{"references":["var.TFUpgradeTest_timeout"]}},"module":{"outputs":{"lambda_arn":{"expression":{"references":["aws_lambda_function.lambda"]}},"lambda_data_tags":{"expression":{"references":["module.data-tags.tags"]}},"lambda_function_name":{"expression":{"references":["aws_lambda_function.lambda"]}},"lambda_invoke_arn":{"expression":{"references":["aws_lambda_function.lambda"]}},"lambda_last_modified":{"expression":{"references":["aws_lambda_function.lambda"]}},"lambda_qualified_arn":{"expression":{"references":["aws_lambda_function.lambda"]}},"lambda_source_code_hash":{"expression":{"references":["aws_lambda_function.lambda"]}},"lambda_version":{"expression":{"references":["aws_lambda_function.lambda"]}}},"resources":[{"address":"aws_lambda_function.lambda","mode":"managed","type":"aws_lambda_function","name":"lambda","provider_config_key":"lambda_TFUpgradeTest:aws","expressions":{"description":{"references":["var.description"]},"function_name":{"references":["var.function_name"]},"handler":{"references":["var.handler"]},"kms_key_arn":{"references":["var.kms_key_arn"]},"layers":{"references":["var.layers"]},"memory_size":{"references":["var.memory_size"]},"publish":{"references":["var.publish"]},"reserved_concurrent_executions":{"references":["var.reserved_concurrent_executions"]},"role":{"references":["var.role"]},"runtime":{"references":["var.runtime"]},"s3_bucket":{"references":["data.aws_s3_bucket_object.s3_obj"]},"s3_key":{"references":["data.aws_s3_bucket_object.s3_obj"]},"source_code_hash":{"references":["data.aws_s3_bucket_object.s3_obj"]},"tags":{"references":["module.data-tags.tags"]},"timeout":{"references":["var.timeout"]},"tracing_config":[{"mode":{"references":["var.tracing_config_mode"]}}],"vpc_config":[{"security_group_ids":{"references":["var.security_group_ids"]},"subnet_ids":{"references":["var.subnet_ids"]}}]},"schema_version":0},{"address":"data.aws_s3_bucket_object.s3_obj","mode":"data","type":"aws_s3_bucket_object","name":"s3_obj","provider_config_key":"lambda_TFUpgradeTest:aws","expressions":{"bucket":{"references":["var.s3_bucket"]},"key":{"references":["var.s3_key"]},"tags":{"references":["module.data-tags.tags"]}},"schema_version":0}],"module_calls":{"data-tags":{"source":"git::ssh://git@git.mycompany.com:7999/tfng/data-utils?ref=v1.0.0","expressions":{"additional_tag_map":{"references":["var.additional_tag_map"]},"app_component":{"references":["var.app_component"]},"app_contacts":{"references":["var.app_contacts"]},"app_environment":{"references":["var.app_environment"]},"application":{"references":["var.application"]},"attributes":{"references":["var.attributes"]},"business_unit":{"references":["var.business_unit"]},"created_by":{"references":["var.created_by"]},"function":{"references":["var.function"]},"network_environment":{"references":["var.network_environment"]},"region":{"references":["var.region"]},"subnet_filter":{"references":["var.subnet_filter"]},"subnet_type":{"references":["var.subnet_type"]},"system_risk_class":{"references":["var.system_risk_class"]},"tags":{"references":["var.tags","var.application","var.app_environment","var.function_name"]}},"module":{"outputs":{"aws_subnet_ids":{"expression":{"references":["data.aws_subnet_ids.default"]}},"id":{"expression":{"references":["local.enabled","local.id"]},"description":"Disambiguated ID"},"public_zone_id":{"expression":{"references":["data.aws_route53_zone.public"]}},"region":{"expression":{"references":["data.aws_region.current"]}},"subnet_group_elasticache":{"expression":{"references":["local.subnet_group_elasticache"]}},"subnet_group_rds":{"expression":{"references":["local.subnet_group_rds"]}},"tags":{"expression":{"references":["local.tags"]},"description":"Normalized Tag map"},"tags_as_list_of_maps":{"expression":{"references":["local.tags_as_list_of_maps"]},"description":"Additional tags as a list of maps, which can be used in several AWS resources"},"vpc_id":{"expression":{"references":["data.aws_vpc.default"]}},"zone_id":{"expression":{"references":["data.aws_route53_zone.default"]}}},"resources":[{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"data-tags:aws","schema_version":0},{"address":"data.aws_route53_zone.default","mode":"data","type":"aws_route53_zone","name":"default","provider_config_key":"data-tags:aws","expressions":{"name":{"references":["var.network_environment","local.bu","local.bu","var.network_environment"]},"private_zone":{"constant_value":true},"vpc_id":{"references":["data.aws_vpc.default"]}},"schema_version":0},{"address":"data.aws_route53_zone.public","mode":"data","type":"aws_route53_zone","name":"public","provider_config_key":"data-tags:aws","expressions":{"name":{"references":["var.network_environment","local.bu","local.bu","var.network_environment"]},"private_zone":{"constant_value":false}},"schema_version":0,"count_expression":{"references":["var.business_unit","var.network_environment","var.network_environment"]}},{"address":"data.aws_subnet_ids.default","mode":"data","type":"aws_subnet_ids","name":"default","provider_config_key":"data-tags:aws","expressions":{"filter":[{"name":{"constant_value":"availability-zone"},"values":{"references":["var.subnet_filter"]}}],"tags":{"references":["local.name_prefix","var.subnet_type"]},"vpc_id":{"references":["data.aws_vpc.default"]}},"schema_version":0},{"address":"data.aws_vpc.default","mode":"data","type":"aws_vpc","name":"default","provider_config_key":"data-tags:aws","expressions":{"filter":[{"name":{"constant_value":"tag:Name"},"values":{"references":["local.name_prefix"]}}]},"schema_version":0},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","provider_config_key":"data-tags:null","expressions":{"inputs":{"references":["local.tags","count.index","local.tags","count.index","var.additional_tag_map"]}},"schema_version":0,"count_expression":{"references":["local.enabled","local.tags"]}}],"variables":{"additional_tag_map":{"default":{"propagate_at_launch":"true"},"description":"Additional tags for appending to each tag map"},"app_component":{"default":"","description":"Breakdown of the functional parts (“components” or “subservices”) that make up an application. Grouping is based more on function than underlying technology. "},"app_contacts":{"default":"","description":"Application DL"},"app_environment":{"default":"","description":"Could be the same as network environment, except in the case of multiple app environments within a single network environment. "},"application":{"default":"","description":"Application name; a unifying name for the system involved. Must be globally unique across ALL of mycompany (there is only one “ourcom”), and must be uniform across all components of the app (all of these components are parts of the “ourcom” application)."},"attributes":{"default":[],"description":"Additional attributes to be appended to id (e.g. `1`)"},"business_unit":{"default":"","description":"The IT business unit paying for this application out of their budget, in lowercase."},"created_by":{"default":"","description":"Email address of person creating infrastructure (typically the person who writes the Terraform)"},"enabled":{"default":"true","description":"Set to false to prevent the module from creating any resources"},"function":{"default":"","description":"Used to identify function of server (app layer)"},"network_environment":{"default":"","description":"Network Env is a reference to the VPC you are building in. MUST be one of fixed values[ sandbox | dev | qa | prod ]"},"region":{"default":"","description":"region"},"subnet_filter":{"default":["*"],"description":"Filter subnets by keywords."},"subnet_type":{"default":"private","description":"which subnets to get: [private, protected, public]"},"system_risk_class":{"default":"","description":"system risk classification"},"tags":{"default":{},"description":"Additional tags (e.g. `map('BusinessUnit','XYZ')`"}}}}},"variables":{"additional_tag_map":{"default":{},"description":"Additional tags for appending to each tag map"},"app_component":{"description":"Breakdown of the functional parts (“components” or “subservices”) that make up an application. Grouping is based more on function than underlying technology. "},"app_contacts":{"description":"Application DL"},"app_environment":{"description":"Could be the same as network environment, except in the case of multiple app environments within a single network environment. "},"application":{"description":"Application name; a unifying name for the system involved. Must be globally unique across ALL of mycompany (there is only one “ourcom”), and must be uniform across all components of the app (all of these components are parts of the “ourcom” application)."},"attributes":{"default":[],"description":"Additional attributes to be appended to id (e.g. `1`)"},"business_unit":{"description":"The IT business unit paying for this application out of their budget, in lowercase."},"created_by":{"description":"Email address of person creating infrastructure (typically the person who writes the Terraform)"},"dead_letter_config":{"default":[],"description":"(Optional) Nested block to configure the function's dead letter queue."},"description":{"default":null,"description":"(Optional) Description of what your Lambda Function does."},"enabled":{"default":"true","description":"Set to false to prevent the module from creating any resources"},"environment_vars":{"default":[],"description":"(Optional) The Lambda environment's configuration settings"},"function":{"description":"Used to identify function of server (app layer)"},"function_name":{"description":"A unique name for your Lambda Function."},"handler":{"description":"The function entrypoint in your code."},"kms_key_arn":{"default":null,"description":"(Optional) The ARN for the KMS encryption key"},"layers":{"default":[],"description":"Lambda layers, max of 5"},"memory_size":{"default":null,"description":"(Optional) Amount of memory in MB your Lambda Function can use at runtime. Defaults to 128."},"network_environment":{"description":"Network Env is a reference to the VPC you are building in. MUST be one of fixed values[ sandbox | dev | qa | prod ]"},"publish":{"default":null,"description":"(Optional) Whether to publish creation/change as new Lambda Function Version. Defaults to false"},"region":{"description":"region"},"reserved_concurrent_executions":{"default":null,"description":"The amount of reserved concurrent executions for this lambda function. A value of 0 disables lambda from being triggered and -1 removes any concurrency limitations."},"role":{"description":"(Required) IAM role attached to the Lambda Function. This governs both who / what can invoke your Lambda Function, as well as what resources our Lambda Function has access to."},"runtime":{"description":"The runtime to use for the function. (e.g. python3.7)"},"s3_bucket":{"description":"The s3 bucket where the lambda code source is stored"},"s3_key":{"description":"The key of the source for the lambda code in the s3 store"},"security_group_ids":{"description":"(Required) A list of security group IDs associated with the Lambda function"},"subnet_filter":{"default":["*"],"description":"Filter subnets by keywords."},"subnet_ids":{"description":"(Required) A list of subnet IDs associated with the Lambda function"},"subnet_type":{"default":"private","description":"(Optional) by default alb will be built in private subnet but can be overrode by setting this variable"},"system_risk_class":{"description":"system risk classification"},"tags":{"default":{},"description":"Additional tags (e.g. `map('BusinessUnit','XYZ')`"},"timeout":{"default":null,"description":"(Optional) The amount of time your Lambda Function has to run in seconds. Defaults to 3."},"tracing_config_mode":{"default":"PassThrough","description":"Type of tracing to be used. Can be either 'PassThrough' or 'Active'"}}}},"myapp-asg":{"source":"git::ssh://aws_jenkins@git.mycompany.com:7999/tfng/asg//asg?ref=master","expressions":{"app_component":{"references":["var.app_component"]},"app_contacts":{"references":["var.app_contacts"]},"app_environment":{"references":["var.app_environment"]},"application":{"references":["var.application"]},"associate_public_ip_address":{"references":["var.asg_associate_public_ip_address"]},"attributes":{"references":["var.attributes"]},"business_unit":{"references":["var.business_unit"]},"created_by":{"references":["var.created_by"]},"default_cooldown":{"references":["var.asg_default_cooldown"]},"desired_capacity":{"references":["var.asg_desired_capacity"]},"ebs_block_device":{"references":["var.asg_ebs_block_device"]},"ebs_optimized":{"references":["var.asg_ebs_optimized"]},"enable_monitoring":{"references":["var.asg_enable_monitoring"]},"enabled_metrics":{"references":["var.asg_enabled_metrics"]},"ephemeral_block_device":{"references":["var.asg_ephemeral_block_device"]},"force_delete":{"references":["var.asg_force_delete"]},"function":{"references":["var.function"]},"health_check_grace_period":{"references":["var.asg_health_check_grace_period"]},"health_check_type":{"references":["var.asg_health_check_type"]},"image_id":{"references":["data.aws_ami.latest_centos_ami"]},"instance_type":{"references":["var.asg_instance_type"]},"key_name":{"references":["var.asg_key_name"]},"load_balancers":{"references":["var.asg_load_balancers"]},"max_size":{"references":["var.asg_max_size"]},"metrics_granularity":{"references":["var.asg_metrics_granularity"]},"min_elb_capacity":{"references":["var.asg_min_elb_capacity"]},"min_size":{"references":["var.asg_min_size"]},"network_environment":{"references":["var.network_environment"]},"placement_group":{"references":["var.asg_placement_group"]},"placement_tenancy":{"references":["var.asg_placement_tenancy"]},"protect_from_scale_in":{"references":["var.asg_protect_from_scale_in"]},"region":{"references":["var.region"]},"root_block_device":{"references":["var.asg_root_block_device"]},"suspended_processes":{"references":["var.asg_suspended_processes"]},"system_risk_class":{"references":["var.system_risk_class"]},"target_group_arns":{"references":["module.alb.alb_target_group_arn"]},"termination_policies":{"references":["var.asg_termination_policies"]},"user_data":{"references":["data.template_file.user_data"]},"wait_for_capacity_timeout":{"references":["var.asg_wait_for_capacity_timeout"]},"wait_for_elb_capacity":{"references":["var.asg_wait_for_elb_capacity"]}},"module":{"outputs":{"autoscaling_group_arn":{"expression":{"references":["aws_autoscaling_group.asg"]},"description":"The ARN for asg AutoScaling Group"},"autoscaling_group_default_cooldown":{"expression":{"references":["aws_autoscaling_group.asg"]},"description":"Time between a scaling activity and the succeeding scaling activity"},"autoscaling_group_desired_capacity":{"expression":{"references":["aws_autoscaling_group.asg"]},"description":"The number of Amazon EC2 instances that should be running in the group"},"autoscaling_group_health_check_grace_period":{"expression":{"references":["aws_autoscaling_group.asg"]},"description":"Time after instance comes into service before checking health"},"autoscaling_group_health_check_type":{"expression":{"references":["aws_autoscaling_group.asg"]},"description":"EC2 or ELB. Controls how health checking is done"},"autoscaling_group_id":{"expression":{"references":["aws_autoscaling_group.asg"]},"description":"The autoscaling group id"},"autoscaling_group_launch_configuration":{"expression":{"references":["aws_autoscaling_group.asg"]},"description":"The launch configuration of the autoscale group"},"autoscaling_group_max_size":{"expression":{"references":["aws_autoscaling_group.asg"]},"description":"The maximum size of the autoscale group"},"autoscaling_group_min_size":{"expression":{"references":["aws_autoscaling_group.asg"]},"description":"The minimum size of the autoscale group"},"autoscaling_group_name":{"expression":{"references":["aws_autoscaling_group.asg"]},"description":"The autoscaling group name"},"autoscaling_group_vpc_zone_identifier":{"expression":{"references":["aws_autoscaling_group.asg"]},"description":"The VPC zone identifier"},"iam_profile_arn":{"expression":{"references":["module.iam.iam_profile_arn"]}},"iam_role_id":{"expression":{"references":["module.iam.iam_role_id"]},"description":"output of value from iam module"},"launch_configuration_id":{"expression":{"references":["aws_launch_configuration.lc"]},"description":"The ID of the launch configuration"},"launch_configuration_name":{"expression":{"references":["aws_launch_configuration.lc"]},"description":"The name of the launch configuration"},"sg_id":{"expression":{"references":["aws_security_group.sg_asg"]}}},"resources":[{"address":"aws_autoscaling_group.asg","mode":"managed","type":"aws_autoscaling_group","name":"asg","provider_config_key":"myapp-asg:aws","expressions":{"default_cooldown":{"references":["var.default_cooldown"]},"desired_capacity":{"references":["var.desired_capacity"]},"enabled_metrics":{"references":["var.enabled_metrics"]},"force_delete":{"references":["var.force_delete"]},"health_check_grace_period":{"references":["var.health_check_grace_period"]},"health_check_type":{"references":["var.health_check_type"]},"launch_configuration":{"references":["aws_launch_configuration.lc"]},"load_balancers":{"references":["var.load_balancers"]},"max_size":{"references":["var.max_size"]},"metrics_granularity":{"references":["var.metrics_granularity"]},"min_elb_capacity":{"references":["var.min_elb_capacity"]},"min_size":{"references":["var.min_size"]},"name_prefix":{"references":["local.name"]},"placement_group":{"references":["var.placement_group"]},"protect_from_scale_in":{"references":["var.protect_from_scale_in"]},"suspended_processes":{"references":["var.suspended_processes"]},"tags":{"references":["module.data-utils.tags_as_list_of_maps"]},"target_group_arns":{"references":["var.target_group_arns"]},"termination_policies":{"references":["var.termination_policies"]},"vpc_zone_identifier":{"references":["module.data-utils.aws_subnet_ids"]},"wait_for_capacity_timeout":{"references":["var.wait_for_capacity_timeout"]},"wait_for_elb_capacity":{"references":["var.wait_for_elb_capacity"]}},"schema_version":0},{"address":"aws_autoscaling_policy.policy","mode":"managed","type":"aws_autoscaling_policy","name":"policy","provider_config_key":"myapp-asg:aws","expressions":{"autoscaling_group_name":{"references":["aws_autoscaling_group.asg"]},"estimated_instance_warmup":{"references":["var.estimated_instance_warmup"]},"name":{"references":["local.name"]},"policy_type":{"constant_value":"TargetTrackingScaling"},"target_tracking_configuration":[{"predefined_metric_specification":[{"predefined_metric_type":{"constant_value":"ASGAverageCPUUtilization"}}],"target_value":{"references":["var.cpu_utilization_value"]}}]},"schema_version":0,"count_expression":{"references":["var.scaleinoncpu"]}},{"address":"aws_launch_configuration.lc","mode":"managed","type":"aws_launch_configuration","name":"lc","provider_config_key":"myapp-asg:aws","expressions":{"associate_public_ip_address":{"references":["var.associate_public_ip_address"]},"ebs_optimized":{"references":["var.ebs_optimized"]},"enable_monitoring":{"references":["var.enable_monitoring"]},"iam_instance_profile":{"references":["module.iam.iam_profile_arn"]},"image_id":{"references":["var.image_id"]},"instance_type":{"references":["var.instance_type"]},"key_name":{"references":["var.key_name"]},"name_prefix":{"references":["local.name"]},"placement_tenancy":{"references":["var.placement_tenancy"]},"security_groups":{"references":["aws_security_group.sg_asg"]},"user_data":{"references":["var.user_data"]}},"schema_version":0},{"address":"aws_security_group.sg_asg","mode":"managed","type":"aws_security_group","name":"sg_asg","provider_config_key":"myapp-asg:aws","expressions":{"description":{"references":["local.name"]},"name_prefix":{"references":["local.name"]},"tags":{"references":["module.data-utils.tags"]},"vpc_id":{"references":["module.data-utils.vpc_id"]}},"schema_version":1},{"address":"data.aws_caller_identity.current","mode":"data","type":"aws_caller_identity","name":"current","provider_config_key":"myapp-asg:aws","schema_version":0}],"module_calls":{"data-utils":{"source":"git::ssh://git@git.mycompany.com:7999/tfng/data-utils?ref=master","expressions":{"additional_tag_map":{"constant_value":{"propagate_at_launch":true}},"app_component":{"references":["var.app_component"]},"app_contacts":{"references":["var.app_contacts"]},"app_environment":{"references":["var.app_environment"]},"application":{"references":["var.application"]},"attributes":{"references":["var.attributes"]},"business_unit":{"references":["var.business_unit"]},"created_by":{"references":["var.created_by"]},"function":{"references":["var.function"]},"network_environment":{"references":["var.network_environment"]},"region":{"references":["var.region"]},"system_risk_class":{"references":["var.system_risk_class"]},"tags":{"references":["var.tags"]}},"module":{"outputs":{"aws_subnet_ids":{"expression":{"references":["data.aws_subnet_ids.default"]}},"id":{"expression":{"references":["local.enabled","local.id"]},"description":"Disambiguated ID"},"public_zone_id":{"expression":{"references":["data.aws_route53_zone.public"]}},"region":{"expression":{"references":["data.aws_region.current"]}},"subnet_group_elasticache":{"expression":{"references":["local.subnet_group_elasticache"]}},"subnet_group_rds":{"expression":{"references":["local.subnet_group_rds"]}},"tags":{"expression":{"references":["local.tags"]},"description":"Normalized Tag map"},"tags_as_list_of_maps":{"expression":{"references":["local.tags_as_list_of_maps"]},"description":"Additional tags as a list of maps, which can be used in several AWS resources"},"vpc_id":{"expression":{"references":["data.aws_vpc.default"]}},"zone_id":{"expression":{"references":["data.aws_route53_zone.default"]}}},"resources":[{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"data-utils:aws","schema_version":0},{"address":"data.aws_route53_zone.default","mode":"data","type":"aws_route53_zone","name":"default","provider_config_key":"data-utils:aws","expressions":{"name":{"references":["var.network_environment","local.bu","local.bu","var.network_environment"]},"private_zone":{"constant_value":true},"vpc_id":{"references":["data.aws_vpc.default"]}},"schema_version":0},{"address":"data.aws_route53_zone.public","mode":"data","type":"aws_route53_zone","name":"public","provider_config_key":"data-utils:aws","expressions":{"name":{"references":["var.network_environment","local.bu","local.bu","var.network_environment"]},"private_zone":{"constant_value":false}},"schema_version":0,"count_expression":{"references":["var.business_unit","var.network_environment","var.network_environment"]}},{"address":"data.aws_subnet_ids.default","mode":"data","type":"aws_subnet_ids","name":"default","provider_config_key":"data-utils:aws","expressions":{"filter":[{"name":{"constant_value":"availability-zone"},"values":{"references":["var.subnet_filter"]}}],"tags":{"references":["local.name_prefix","var.subnet_type"]},"vpc_id":{"references":["data.aws_vpc.default"]}},"schema_version":0},{"address":"data.aws_vpc.default","mode":"data","type":"aws_vpc","name":"default","provider_config_key":"data-utils:aws","expressions":{"filter":[{"name":{"constant_value":"tag:Name"},"values":{"references":["local.name_prefix"]}}]},"schema_version":0},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","provider_config_key":"data-utils:null","expressions":{"inputs":{"references":["local.tags","count.index","local.tags","count.index","var.additional_tag_map"]}},"schema_version":0,"count_expression":{"references":["local.enabled","local.tags"]}}],"variables":{"additional_tag_map":{"default":{"propagate_at_launch":"true"},"description":"Additional tags for appending to each tag map"},"app_component":{"default":"","description":"Breakdown of the functional parts (“components” or “subservices”) that make up an application. Grouping is based more on function than underlying technology. "},"app_contacts":{"default":"","description":"Application DL"},"app_environment":{"default":"","description":"Could be the same as network environment, except in the case of multiple app environments within a single network environment. "},"application":{"default":"","description":"Application name; a unifying name for the system involved. Must be globally unique across ALL of mycompany (there is only one “ourcom”), and must be uniform across all components of the app (all of these components are parts of the “ourcom” application)."},"attributes":{"default":[],"description":"Additional attributes to be appended to id (e.g. `1`)"},"business_unit":{"default":"","description":"The IT business unit paying for this application out of their budget, in lowercase."},"created_by":{"default":"","description":"Email address of person creating infrastructure (typically the person who writes the Terraform)"},"enabled":{"default":"true","description":"Set to false to prevent the module from creating any resources"},"function":{"default":"","description":"Used to identify function of server (app layer)"},"network_environment":{"default":"","description":"Network Env is a reference to the VPC you are building in. MUST be one of fixed values[ sandbox | dev | qa | prod ]"},"region":{"default":"","description":"region"},"subnet_filter":{"default":["*"],"description":"Filter subnets by keywords."},"subnet_type":{"default":"private","description":"which subnets to get: [private, protected, public]"},"system_risk_class":{"default":"","description":"system risk classification"},"tags":{"default":{},"description":"Additional tags (e.g. `map('BusinessUnit','XYZ')`"}}}},"iam":{"source":"git::ssh://aws_jenkins@git.mycompany.com:7999/tfng/iam//instance_profile?ref=master","expressions":{"addroletovault":{"references":["var.addroletovault"]},"app_component":{"references":["var.app_component"]},"app_contacts":{"references":["var.app_contacts"]},"app_environment":{"references":["var.app_environment"]},"application":{"references":["var.application"]},"attributes":{"references":["var.attributes"]},"business_unit":{"references":["var.business_unit"]},"created_by":{"references":["var.created_by"]},"function":{"references":["var.function"]},"haspolicycodedeploy":{"references":["var.haspolicycodedeploy"]},"network_environment":{"references":["var.network_environment"]},"region":{"references":["var.region"]},"system_risk_class":{"references":["var.system_risk_class"]}},"module":{"outputs":{"iam_profile_arn":{"expression":{"references":["aws_iam_instance_profile.profile"]}},"iam_profile_id":{"expression":{"references":["aws_iam_instance_profile.profile"]}},"iam_profile_name":{"expression":{"references":["aws_iam_instance_profile.profile"]}},"iam_role_arn":{"expression":{"references":["aws_iam_role.role"]}},"iam_role_id":{"expression":{"references":["aws_iam_role.role"]}},"iam_role_name":{"expression":{"references":["aws_iam_role.role"]}},"iam_role_unique_id":{"expression":{"references":["aws_iam_role.role"]}}},"resources":[{"address":"aws_iam_instance_profile.profile","mode":"managed","type":"aws_iam_instance_profile","name":"profile","provider_config_key":"iam:aws","expressions":{"name_prefix":{"references":["local.name"]},"role":{"references":["aws_iam_role.role"]}},"schema_version":0},{"address":"aws_iam_role.role","mode":"managed","type":"aws_iam_role","name":"role","provider_config_key":"iam:aws","expressions":{"assume_role_policy":{"references":["var.service_entity"]},"description":{"references":["local.name"]},"force_detach_policies":{"references":["var.force_detach_policies"]},"name_prefix":{"references":["local.name"]},"path":{"references":["var.path"]},"tags":{"references":["module.data-utils.tags"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.codedeploy","mode":"managed","type":"aws_iam_role_policy_attachment","name":"codedeploy","provider_config_key":"iam:aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AmazonEC2RoleforAWSCodeDeploy"},"role":{"references":["aws_iam_role.role"]}},"schema_version":0,"count_expression":{"references":["var.haspolicycodedeploy"]}},{"address":"aws_iam_role_policy_attachment.systems-manager-role","mode":"managed","type":"aws_iam_role_policy_attachment","name":"systems-manager-role","provider_config_key":"iam:aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AmazonEC2RoleforSSM"},"role":{"references":["aws_iam_role.role"]}},"schema_version":0},{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"iam:aws","schema_version":0}],"module_calls":{"data-utils":{"source":"git::ssh://git@git.mycompany.com:7999/tfng/data-utils?ref=master","expressions":{"additional_tag_map":{"constant_value":{"propagate_at_launch":true}},"app_component":{"references":["var.app_component"]},"app_contacts":{"references":["var.app_contacts"]},"app_environment":{"references":["var.app_environment"]},"application":{"references":["var.application"]},"attributes":{"references":["var.attributes"]},"business_unit":{"references":["var.business_unit"]},"created_by":{"references":["var.created_by"]},"function":{"references":["var.function"]},"network_environment":{"references":["var.network_environment"]},"region":{"references":["var.region"]},"system_risk_class":{"references":["var.system_risk_class"]},"tags":{"references":["var.tags"]}},"module":{"outputs":{"aws_subnet_ids":{"expression":{"references":["data.aws_subnet_ids.default"]}},"id":{"expression":{"references":["local.enabled","local.id"]},"description":"Disambiguated ID"},"public_zone_id":{"expression":{"references":["data.aws_route53_zone.public"]}},"region":{"expression":{"references":["data.aws_region.current"]}},"subnet_group_elasticache":{"expression":{"references":["local.subnet_group_elasticache"]}},"subnet_group_rds":{"expression":{"references":["local.subnet_group_rds"]}},"tags":{"expression":{"references":["local.tags"]},"description":"Normalized Tag map"},"tags_as_list_of_maps":{"expression":{"references":["local.tags_as_list_of_maps"]},"description":"Additional tags as a list of maps, which can be used in several AWS resources"},"vpc_id":{"expression":{"references":["data.aws_vpc.default"]}},"zone_id":{"expression":{"references":["data.aws_route53_zone.default"]}}},"resources":[{"address":"data.aws_region.current","mode":"data","type":"aws_region","name":"current","provider_config_key":"data-utils:aws","schema_version":0},{"address":"data.aws_route53_zone.default","mode":"data","type":"aws_route53_zone","name":"default","provider_config_key":"data-utils:aws","expressions":{"name":{"references":["var.network_environment","local.bu","local.bu","var.network_environment"]},"private_zone":{"constant_value":true},"vpc_id":{"references":["data.aws_vpc.default"]}},"schema_version":0},{"address":"data.aws_route53_zone.public","mode":"data","type":"aws_route53_zone","name":"public","provider_config_key":"data-utils:aws","expressions":{"name":{"references":["var.network_environment","local.bu","local.bu","var.network_environment"]},"private_zone":{"constant_value":false}},"schema_version":0,"count_expression":{"references":["var.business_unit","var.network_environment","var.network_environment"]}},{"address":"data.aws_subnet_ids.default","mode":"data","type":"aws_subnet_ids","name":"default","provider_config_key":"data-utils:aws","expressions":{"filter":[{"name":{"constant_value":"availability-zone"},"values":{"references":["var.subnet_filter"]}}],"tags":{"references":["local.name_prefix","var.subnet_type"]},"vpc_id":{"references":["data.aws_vpc.default"]}},"schema_version":0},{"address":"data.aws_vpc.default","mode":"data","type":"aws_vpc","name":"default","provider_config_key":"data-utils:aws","expressions":{"filter":[{"name":{"constant_value":"tag:Name"},"values":{"references":["local.name_prefix"]}}]},"schema_version":0},{"address":"data.null_data_source.tags_as_list_of_maps","mode":"data","type":"null_data_source","name":"tags_as_list_of_maps","provider_config_key":"data-utils:null","expressions":{"inputs":{"references":["local.tags","count.index","local.tags","count.index","var.additional_tag_map"]}},"schema_version":0,"count_expression":{"references":["local.enabled","local.tags"]}}],"variables":{"additional_tag_map":{"default":{"propagate_at_launch":"true"},"description":"Additional tags for appending to each tag map"},"app_component":{"default":"","description":"Breakdown of the functional parts (“components” or “subservices”) that make up an application. Grouping is based more on function than underlying technology. "},"app_contacts":{"default":"","description":"Application DL"},"app_environment":{"default":"","description":"Could be the same as network environment, except in the case of multiple app environments within a single network environment. "},"application":{"default":"","description":"Application name; a unifying name for the system involved. Must be globally unique across ALL of mycompany (there is only one “ourcom”), and must be uniform across all components of the app (all of these components are parts of the “ourcom” application)."},"attributes":{"default":[],"description":"Additional attributes to be appended to id (e.g. `1`)"},"business_unit":{"default":"","description":"The IT business unit paying for this application out of their budget, in lowercase."},"created_by":{"default":"","description":"Email address of person creating infrastructure (typically the person who writes the Terraform)"},"enabled":{"default":"true","description":"Set to false to prevent the module from creating any resources"},"function":{"default":"","description":"Used to identify function of server (app layer)"},"network_environment":{"default":"","description":"Network Env is a reference to the VPC you are building in. MUST be one of fixed values[ sandbox | dev | qa | prod ]"},"region":{"default":"","description":"region"},"subnet_filter":{"default":["*"],"description":"Filter subnets by keywords."},"subnet_type":{"default":"private","description":"which subnets to get: [private, protected, public]"},"system_risk_class":{"default":"","description":"system risk classification"},"tags":{"default":{},"description":"Additional tags (e.g. `map('BusinessUnit','XYZ')`"}}}}},"variables":{"additional_tag_map":{"default":{},"description":"Additional tags for appending to each tag map"},"addroletovault":{"default":false,"description":"if you want this role added to vault set this to true"},"app_component":{"default":"","description":"Breakdown of the functional parts (“components” or “subservices”) that make up an application. Grouping is based more on function than underlying technology. "},"app_contacts":{"default":"","description":"Application DL"},"app_environment":{"default":"","description":"Could be the same as network environment, except in the case of multiple app environments within a single network environment. "},"application":{"default":"","description":"Application name; a unifying name for the system involved. Must be globally unique across ALL of mycompany (there is only one “ourcom”), and must be uniform across all components of the app (all of these components are parts of the “ourcom” application)."},"attributes":{"default":[],"description":"Additional attributes to be appended to id (e.g. `1`)"},"aws_iam_role_policy":{"default":""},"business_unit":{"default":"","description":"The IT business unit paying for this application out of their budget, in lowercase."},"created_by":{"default":"","description":"Email address of person creating infrastructure (typically the person who writes the Terraform)"},"enabled":{"default":"true","description":"Set to false to prevent the module from creating any resources"},"force_detach_policies":{"default":null,"description":"Force detach policies for IAM roles"},"function":{"default":"","description":"Used to identify function of server (app layer)"},"haspolicycodedeploy":{"default":false,"description":"this is a conditional for if we want codedeploy we just need to pass this var as true to attach codedeploy policy as well"},"network_environment":{"default":"","description":"Network Env is a reference to the VPC you are building in. MUST be one of fixed values[ sandbox | dev | qa | prod ]"},"path":{"default":null,"description":"Path for iam roles"},"region":{"default":"","description":"region"},"service_entity":{"default":"ec2.amazonaws.com","description":"the entity that will be allowed to assume the role"},"system_risk_class":{"default":"","description":"system risk classification"},"tags":{"default":{},"description":"Additional tags (e.g. `map('BusinessUnit','XYZ')`"}}}}},"variables":{"additional_tag_map":{"default":{},"description":"Additional tags for appending to each tag map"},"addroletovault":{"default":false,"description":"pass through to iam module if you need vault features"},"app_component":{"default":"","description":"Breakdown of the functional parts (“components” or “subservices”) that make up an application. Grouping is based more on function than underlying technology. "},"app_contacts":{"default":"","description":"Application DL"},"app_environment":{"default":"","description":"Could be the same as network environment, except in the case of multiple app environments within a single network environment. "},"application":{"default":"","description":"Application name; a unifying name for the system involved. Must be globally unique across ALL of mycompany (there is only one “ourcom”), and must be uniform across all components of the app (all of these components are parts of the “ourcom” application)."},"associate_public_ip_address":{"default":false,"description":"Associate a public ip address with an instance in a VPC"},"attributes":{"default":[],"description":"Additional attributes to be appended to id (e.g. `1`)"},"business_unit":{"default":"","description":"The IT business unit paying for this application out of their budget, in lowercase."},"cpu_utilization_value":{"default":40,"description":"CPU percentage to scale at. Default will be 40%"},"created_by":{"default":"","description":"Email address of person creating infrastructure (typically the person who writes the Terraform)"},"default_cooldown":{"default":300,"description":"The amount of time, in seconds, after a scaling activity completes before another scaling activity can start"},"desired_capacity":{"default":1,"description":"The number of Amazon EC2 instances that should be running in the group"},"ebs_block_device":{"default":[],"description":"Additional EBS block devices to attach to the instance"},"ebs_optimized":{"default":false,"description":"If true, the launched EC2 instance will be EBS-optimized"},"enable_monitoring":{"default":null,"description":"Enables/disables detailed monitoring. This is enabled by default."},"enabled":{"default":"true","description":"Set to false to prevent the module from creating any resources"},"enabled_metrics":{"default":["GroupMinSize","GroupMaxSize","GroupDesiredCapacity","GroupInServiceInstances","GroupPendingInstances","GroupStandbyInstances","GroupTerminatingInstances","GroupTotalInstances"],"description":"A list of metrics to collect. The allowed values are GroupMinSize, GroupMaxSize, GroupDesiredCapacity, GroupInServiceInstances, GroupPendingInstances, GroupStandbyInstances, GroupTerminatingInstances, GroupTotalInstances"},"ephemeral_block_device":{"default":[],"description":"Customize Ephemeral (also known as 'Instance Store') volumes on the instance"},"estimated_instance_warmup":{"default":180,"description":" (Optional) The estimated time, in seconds, until a newly launched instance will contribute CloudWatch metrics. Without a value, AWS will default to the group's specified cooldown period."},"force_delete":{"default":false,"description":"Allows deleting the autoscaling group without waiting for all instances in the pool to terminate. You can force an autoscaling group to delete even if it's in the process of scaling a resource. Normally, Terraform drains all the instances before deleting the group. This bypasses that behavior and potentially leaves resources dangling"},"function":{"default":"","description":"Used to identify function of server (app layer)"},"haspolicycodedeploy":{"default":false,"description":"set to true if you want to aws managed code deploy policy attached"},"health_check_grace_period":{"default":300,"description":"Time (in seconds) after instance comes into service before checking health"},"health_check_type":{"default":"EC2","description":"Controls how health checking is done. Values are - EC2 and ELB"},"image_id":{"description":"The EC2 image ID to launch"},"instance_type":{"default":"t2.medium","description":"The size of instance to launch"},"key_name":{"default":null,"description":"The key name that should be used for the instance"},"load_balancers":{"default":null,"description":"A list of elastic load balancer names to add to the autoscaling group names. Only valid for classic load balancers"},"max_size":{"default":1,"description":"The maximum size of the auto scale group"},"metrics_granularity":{"default":null,"description":"The granularity to associate with the metrics to collect. The only valid value is 1Minute"},"min_elb_capacity":{"default":0,"description":"Setting this causes Terraform to wait for this number of instances to show up healthy in the ELB only on creation. Updates will not wait on ELB instance number changes"},"min_size":{"default":1,"description":"The minimum size of the auto scale group"},"network_environment":{"default":"","description":"Network Env is a reference to the VPC you are building in. MUST be one of fixed values[ sandbox | dev | qa | prod ]"},"placement_group":{"default":null,"description":"The name of the placement group into which you'll launch your instances, if any"},"placement_tenancy":{"default":"default","description":"The tenancy of the instance. Valid values are 'default' or 'dedicated'"},"protect_from_scale_in":{"default":false,"description":"Allows setting instance protection. The autoscaling group will not select instances with this setting for terminination during scale in events."},"region":{"default":"","description":"region"},"root_block_device":{"default":[],"description":"Customize details about the root block device of the instance"},"scaleinoncpu":{"default":false,"description":"Set to true if you want asg to scale in on average cpu"},"suspended_processes":{"default":null,"description":"A list of processes to suspend for the AutoScaling Group. The allowed values are Launch, Terminate, HealthCheck, ReplaceUnhealthy, AZRebalance, AlarmNotification, ScheduledActions, AddToLoadBalancer. Note that if you suspend either the Launch or Terminate process types, it can prevent your autoscaling group from functioning properly."},"system_risk_class":{"default":"","description":"system risk classification"},"tags":{"default":{},"description":"Additional tags (e.g. `map('BusinessUnit','XYZ')`"},"target_group_arns":{"default":null,"description":"A list of aws_alb_target_group ARNs, for use with Application Load Balancing"},"termination_policies":{"default":["Default"],"description":"A list of policies to decide how the instances in the auto scale group should be terminated. The allowed values are OldestInstance, NewestInstance, OldestLaunchConfiguration, ClosestToNextInstanceHour, Default"},"user_data":{"default":null,"description":"(Optional) The user data to provide when launching the instance"},"wait_for_capacity_timeout":{"default":null,"description":"A maximum duration that Terraform should wait for ASG instances to be healthy before timing out. (See also Waiting for Capacity below.) Setting this to '0' causes Terraform to skip all Capacity Waiting behavior."},"wait_for_elb_capacity":{"default":1,"description":"Setting this will cause Terraform to wait for exactly this number of healthy instances in all attached load balancers on both create and update operations. Takes precedence over min_elb_capacity behavior."}}}}},"variables":{"TFUpgradeTest_function_name":{"default":"TFUpgradeTest"},"TFUpgradeTest_lambda_handler":{"default":"TFUpgradeTest.handler"},"TFUpgradeTest_memory_size":{"default":256},"TFUpgradeTest_s3_key":{"default":"HandleS3Update.zip"},"TFUpgradeTest_timeout":{"default":900},"additional_tag_map":{"default":{},"description":"Additional tags for appending to each tag map"},"alb_listener_certificate_arn":{"default":null,"description":" (Optional) The ARN of the SSL server certificate. Exactly one certificate is required if the protocol is HTTPS."},"alb_listener_port":{"description":"(Required) The port on which the load balancer is listening."},"alb_listener_protocol":{"default":null,"description":"(Optional) The protocol for connections from clients to the load balancer. Valid values are HTTP and HTTPS. Defaults to HTTP."},"alb_listener_ssl_policy":{"default":null,"description":"(Optional) The name of the SSL Policy for the listener. Required if protocol is HTTPS."},"alb_target_group_port":{"description":" (Required) The port on which targets receive traffic, unless overridden when registering a specific target."},"alb_target_group_protocol":{"description":" (Required) The protocol to use for routing traffic to the targets."},"alb_target_group_type":{"default":null,"description":" (Optional) The type of target that you must specify when registering targets with this target group."},"ami_name_regex":{"default":"CENTOS-*-PTCT-AMI-*","description":"mycompany CentOS AMI Regex"},"ami_owner":{"default":"147721705183","description":"mycompany CentOS AMI Owner ID"},"app_component":{"default":"","description":"Breakdown of the functional parts (“components” or “subservices”) that make up an application. Grouping is based more on function than underlying technology. "},"app_contacts":{"default":"","description":"Application DL"},"app_environment":{"default":"","description":"Could be the same as network environment, except in the case of multiple app environments within a single network environment. "},"application":{"default":"","description":"Application name; a unifying name for the system involved. Must be globally unique across ALL of mycompany (there is only one “ourcom”), and must be uniform across all components of the app (all of these components are parts of the “ourcom” application)."},"asg_associate_public_ip_address":{"default":false,"description":"Associate a public ip address with an instance in a VPC"},"asg_default_cooldown":{"default":300,"description":"The amount of time, in seconds, after a scaling activity completes before another scaling activity can start"},"asg_desired_capacity":{"default":1,"description":"The number of Amazon EC2 instances that should be running in the group"},"asg_ebs_block_device":{"default":[],"description":"Additional EBS block devices to attach to the instance"},"asg_ebs_optimized":{"default":false,"description":"If true, the launched EC2 instance will be EBS-optimized"},"asg_enable_monitoring":{"default":true,"description":"Enables/disables detailed monitoring. This is enabled by default."},"asg_enabled_metrics":{"default":["GroupMinSize","GroupMaxSize","GroupDesiredCapacity","GroupInServiceInstances","GroupPendingInstances","GroupStandbyInstances","GroupTerminatingInstances","GroupTotalInstances"],"description":"A list of metrics to collect. The allowed values are GroupMinSize, GroupMaxSize, GroupDesiredCapacity, GroupInServiceInstances, GroupPendingInstances, GroupStandbyInstances, GroupTerminatingInstances, GroupTotalInstances"},"asg_ephemeral_block_device":{"default":[],"description":"Customize Ephemeral (also known as 'Instance Store') volumes on the instance"},"asg_force_delete":{"default":false,"description":"Allows deleting the autoscaling group without waiting for all instances in the pool to terminate. You can force an autoscaling group to delete even if it's in the process of scaling a resource. Normally, Terraform drains all the instances before deleting the group. This bypasses that behavior and potentially leaves resources dangling"},"asg_health_check_grace_period":{"default":300,"description":"Time (in seconds) after instance comes into service before checking health"},"asg_health_check_type":{"default":"EC2","description":"Controls how health checking is done. Values are - EC2 and ELB"},"asg_iam_instance_profile":{"default":"","description":"The IAM instance profile to associate with launched instances"},"asg_instance_assume_role":{"description":"The remote account role the instance can assume"},"asg_instance_type":{"default":"t2.medium","description":"The size of instance to launch"},"asg_key_name":{"description":"The key name that should be used for the instance"},"asg_load_balancers":{"default":null,"description":"A list of elastic load balancer names to add to the autoscaling group names"},"asg_max_size":{"default":1,"description":"The maximum size of the auto scale group"},"asg_metrics_granularity":{"default":"1Minute","description":"The granularity to associate with the metrics to collect. The only valid value is 1Minute"},"asg_min_elb_capacity":{"default":0,"description":"Setting this causes Terraform to wait for this number of instances to show up healthy in the ELB only on creation. Updates will not wait on ELB instance number changes"},"asg_min_size":{"default":1,"description":"The minimum size of the auto scale group"},"asg_name":{"description":"The name of the auto scaling group"},"asg_placement_group":{"default":"","description":"The name of the placement group into which you'll launch your instances, if any"},"asg_placement_tenancy":{"default":"default","description":"The tenancy of the instance. Valid values are 'default' or 'dedicated'"},"asg_protect_from_scale_in":{"default":false,"description":"Allows setting instance protection. The autoscaling group will not select instances with this setting for terminination during scale in events."},"asg_root_block_device":{"default":[],"description":"Customize details about the root block device of the instance"},"asg_sg_tags":{"default":{},"description":"A map of tags to add to all resources"},"asg_suspended_processes":{"default":[],"description":"A list of processes to suspend for the AutoScaling Group. The allowed values are Launch, Terminate, HealthCheck, ReplaceUnhealthy, AZRebalance, AlarmNotification, ScheduledActions, AddToLoadBalancer. Note that if you suspend either the Launch or Terminate process types, it can prevent your autoscaling group from functioning properly."},"asg_tags":{"default":[],"description":"A map of tags to add"},"asg_target_group_arns":{"default":[""],"description":"A list of aws_alb_target_group ARNs, for use with Application Load Balancing"},"asg_termination_policies":{"default":["Default"],"description":"A list of policies to decide how the instances in the auto scale group should be terminated. The allowed values are OldestInstance, NewestInstance, OldestLaunchConfiguration, ClosestToNextInstanceHour, Default"},"asg_user_data":{"default":"","description":"The user data to provide when launching the instance"},"asg_wait_for_capacity_timeout":{"default":"0","description":"A maximum duration that Terraform should wait for ASG instances to be healthy before timing out. (See also Waiting for Capacity below.) Setting this to '0' causes Terraform to skip all Capacity Waiting behavior."},"asg_wait_for_elb_capacity":{"default":1,"description":"Setting this will cause Terraform to wait for exactly this number of healthy instances in all attached load balancers on both create and update operations. Takes precedence over min_elb_capacity behavior."},"assume_account":{},"attributes":{"default":[],"description":"Additional attributes to be appended to id (e.g. `1`)"},"aws_region":{},"branch":{},"business_unit":{"default":"","description":"The IT business unit paying for this application out of their budget, in lowercase."},"created_by":{"default":"","description":"Email address of person creating infrastructure (typically the person who writes the Terraform)"},"dead_letter_config":{"default":[]},"deregistration_delay":{"default":null,"description":"The default deregistration delay"},"description":{"default":null},"enable_basepath":{"default":false},"enable_deletion_protection":{"default":null,"description":"(Optional) If true, deletion of the load balancer will be disabled via the AWS API. This will prevent Terraform from deleting the load balancer. Defaults to false."},"enabled":{"default":"true","description":"Set to false to prevent the module from creating any resources"},"environment":{},"environment_vars":{"default":[]},"function":{"default":"","description":"Used to identify function of server (app layer)"},"health_check":{"default":{"healthy_threshold":null,"interval":null,"matcher":"200","path":"/","port":null,"protocol":null,"timeout":null,"unhealthy_threshold":null},"description":"(Optional) A Health Check block."},"idle_timeout":{"default":null,"description":"(Optional) The time in seconds that the connection is allowed to be idle. Default: 60."},"internal":{"default":true,"description":"(Optional) If true, the ALB will be internal."},"ip_address_type":{"default":"ipv4","description":"(Optional) The type of IP addresses used by the subnets for your load balancer. The possible values are ipv4 and dualstack"},"kms_key_arn":{"default":null},"lambda_exec_role_name":{},"lambda_runtime":{},"lambda_s3_bucket":{"description":"The s3 bucket where the lambda code source is stored"},"lambda_s3_path":{},"lambda_tags":{"default":{},"description":"A map of tags to add to resources"},"name_prefix":{},"network_environment":{"default":"","description":"Network Env is a reference to the VPC you are building in. MUST be one of fixed values[ sandbox | dev | qa | prod ]"},"publish":{"default":null},"region":{"default":"","description":"region"},"remote_state_s3_bucket":{},"remote_state_s3_key":{},"results_s3_bucket":{},"results_site_url":{},"revision_tag":{"default":"HEAD"},"role_arn":{},"stickiness":{"default":{"cookie_duration":"1","enabled":"false"},"description":"A list of for stickiness variables"},"subnet_filter":{"default":["*"],"description":"Filter subnets by keywords."},"subnet_type":{"default":"private","description":"(Optional) by default alb will be built in private subnet but can be overrode by setting this variable"},"system_risk_class":{"default":"","description":"system risk classification"},"tags":{"default":{},"description":"Additional tags (e.g. `map('BusinessUnit','XYZ')`"},"vpc_id":{},"waf_custom":{"default":"","description":"This to match a custom policy name in AWS FMS, created with security team (leave this blank if waf_policy tag not set to custom)."},"waf_policy":{"default":"internal","description":"Valid values are internal, external and custom"}}}}}
